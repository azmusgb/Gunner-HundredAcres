<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=5.0, user-scalable=yes">
    <title>Baby Gunner's Hundred Acre Wood Celebration</title>
    
    <!-- Meta Tags -->
    <meta name="description" content="Join us in celebrating Baby Gunner's first adventure in the Hundred Acre Wood! A storybook-themed celebration with an interactive honey catch game and magical moments.">
    <meta name="keywords" content="baby celebration, first birthday, Hundred Acre Wood, Winnie the Pooh, storybook theme, baby shower, baby Gunner">
    <meta name="author" content="The Celebration Crew">
    <meta name="theme-color" content="#ffb347">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Lato:wght@300;400;700&family=Patrick+Hand&family=Cormorant+Garamond:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Skip Link for Accessibility -->
    <a href="#mainContent" class="skip-link">Skip to Main Content</a>

    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="honey-spinner">
            <div class="loading-jar">
                <div class="loading-honey-fill"></div>
                <div class="loading-bubble" style="left: 20%;"></div>
                <div class="loading-bubble" style="left: 50%; animation-delay: 0.5s;"></div>
                <div class="loading-bubble" style="left: 80%; animation-delay: 1s;"></div>
            </div>
        </div>
        
        <div class="loading-text">Welcome to the Hundred Acre Wood</div>
        <p class="loading-subtext">Preparing a special celebration for Baby Gunner's first magical year...</p>
        
        <div class="loading-dots">
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
        </div>
        
        <div class="loading-hint">
            <i class="fas fa-lightbulb"></i>
            <span>Tip: Make sure your sound is on for the full magical experience!</span>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="main-nav">
        <div class="nav-container">
            <a href="#cover" class="nav-brand">
                <span class="nav-title">Baby Gunner's Woodland Adventure</span>
                <span class="nav-subtitle">A First Year Celebration</span>
            </a>
            
            <ul class="nav-menu">
                <li><a href="#story" class="nav-item"><i class="fas fa-book-open"></i> Our Story</a></li>
                <li><a href="#characters" class="nav-item"><i class="fas fa-users"></i> Characters</a></li>
                <li><a href="#details" class="nav-item"><i class="fas fa-calendar-alt"></i> Details</a></li>
                <li><a href="#games" class="nav-item"><i class="fas fa-gamepad"></i> Games</a></li>
                <li><a href="#rsvp" class="nav-item"><i class="fas fa-envelope"></i> RSVP</a></li>
            </ul>
        </div>
    </nav>

    <!-- Reading Progress Bar -->
    <div class="reading-progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div>

    <!-- Storybook Cover -->
    <section class="storybook-cover" id="cover">
        <h1 class="cover-title">Baby Gunner's<br>Hundred Acre Wood</h1>
        <h2 class="cover-subtitle">A Storybook Celebration of One Magical Year</h2>
        
        <a href="#mainContent" class="open-book-btn">
            <i class="fas fa-book"></i>
            <span>Open Storybook</span>
        </a>
    </section>

    <!-- Music Controls -->
    <div class="music-controls">
        <button class="music-btn" aria-label="Play background music" aria-pressed="false">
            <i class="fas fa-music"></i>
        </button>
    </div>

    <!-- Floating Action Buttons -->
    <div class="fab-container">
        <button class="fab fab--visible" aria-label="Scroll to Top">
            <i class="fas fa-arrow-up"></i>
        </button>
        <button class="fab" aria-label="Share Celebration">
            <i class="fas fa-share-alt"></i>
        </button>
    </div>

    <!-- Persistent RSVP CTA -->
    <button class="persistent-rsvp" aria-label="RSVP Now">
        <span class="persistent-rsvp-text">RSVP Now</span>
        <i class="fas fa-feather-alt"></i>
    </button>

    <!-- Main Content -->
    <main id="mainContent" class="storybook-shell">
        <div class="storybook">
            <div class="storybook-inner">
                <!-- Storybook Header -->
                <header class="storybook-header">
                    <h1 class="storybook-heading">Chapter One: The Beginning</h1>
                    <p class="storybook-subheading">A tale of adventure, friendship, and one special little bear</p>
                </header>

                <!-- Story Section -->
                <section id="story" class="content-section">
                    <div class="content-section-inner">
                        <div class="section-number">1</div>
                        <div class="section-header">
                            <h2 class="story-title">
                                <i class="fas fa-book-open"></i>
                                Our Story
                            </h2>
                            <p class="story-intro">Welcome to our enchanted corner of the Hundred Acre Wood, where every day is an adventure and every friend is family.</p>
                        </div>

                        <div class="story-section">
                            <p class="story-text">
                                Once upon a time, in a cozy corner of the Hundred Acre Wood, a new adventure began. 
                                Little Gunner arrived, bringing with him the sweetest honey and the warmest cuddles 
                                the wood had ever known. For one whole year, he's been exploring, learning, and 
                                filling our days with laughter and wonder.
                            </p>
                            <p class="story-text">
                                From his first giggle (which sounded remarkably like a happy little bear) to his 
                                determined crawls through the meadow (always following the scent of honey, of course), 
                                every moment has been a page in this beautiful storybook.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- Characters Section -->
                <section id="characters" class="content-section">
                    <div class="content-section-inner">
                        <div class="section-number">2</div>
                        <div class="section-header">
                            <h2 class="story-title">
                                <i class="fas fa-users"></i>
                                Meet the Characters
                            </h2>
                            <p class="story-intro">Every great story needs wonderful friends. Here are the special characters in Gunner's adventure.</p>
                        </div>

                        <div class="characters-grid">
                            <!-- Character 1 -->
                            <article class="character-card">
                                <button class="character-spotlight" type="button">
                                    <div class="character-illustration">
                                        <span>üêª</span>
                                    </div>
                                    <div class="character-spotlight-content">
                                        <blockquote class="character-quote">
                                            "A little consideration, a little thought for others, makes all the difference."
                                        </blockquote>
                                        <h3 class="character-name">Winnie the Pooh</h3>
                                        <span class="character-badge">Honey Expert</span>
                                    </div>
                                </button>
                            </article>

                            <!-- Character 2 -->
                            <article class="character-card">
                                <button class="character-spotlight" type="button">
                                    <div class="character-illustration">
                                        <span>üê∑</span>
                                    </div>
                                    <div class="character-spotlight-content">
                                        <blockquote class="character-quote">
                                            "The things that make me different are the things that make me, me."
                                        </blockquote>
                                        <h3 class="character-name">Piglet</h3>
                                        <span class="character-badge">Brave Heart</span>
                                    </div>
                                </button>
                            </article>

                            <!-- Character 3 -->
                            <article class="character-card">
                                <button class="character-spotlight" type="button">
                                    <div class="character-illustration">
                                        <span>üêØ</span>
                                    </div>
                                    <div class="character-spotlight-content">
                                        <blockquote class="character-quote">
                                            "The most wonderful thing about Tiggers is I'm the only one!"
                                        </blockquote>
                                        <h3 class="character-name">Tigger</h3>
                                        <span class="character-badge">Bouncy Friend</span>
                                    </div>
                                </button>
                            </article>

                            <!-- Character 4 -->
                            <article class="character-card">
                                <button class="character-spotlight" type="button">
                                    <div class="character-illustration">
                                        <span>üê¥</span>
                                    </div>
                                    <div class="character-spotlight-content">
                                        <blockquote class="character-quote">
                                            "Thanks for noticing me."
                                        </blockquote>
                                        <h3 class="character-name">Eeyore</h3>
                                        <span class="character-badge">Thoughtful Friend</span>
                                    </div>
                                </button>
                            </article>
                        </div>
                    </div>
                </section>

                <!-- Details Section -->
                <section id="details" class="content-section">
                    <div class="content-section-inner">
                        <div class="section-number">3</div>
                        <div class="section-header">
                            <h2 class="story-title">
                                <i class="fas fa-calendar-alt"></i>
                                Celebration Details
                            </h2>
                            <p class="story-intro">Join us for a magical day in the Hundred Acre Wood</p>
                        </div>

                        <div class="invitation-details">
                            <!-- Detail Card 1 -->
                            <article class="detail-card">
                                <div class="detail-icon">
                                    <i class="fas fa-calendar-day"></i>
                                </div>
                                <h3 class="detail-title">When</h3>
                                <div class="detail-content">
                                    <p>Saturday, June 15th, 2024</p>
                                    <p>2:00 PM - 5:00 PM</p>
                                    <small>Rain or shine - we have cozy spots for every weather!</small>
                                </div>
                            </article>

                            <!-- Detail Card 2 -->
                            <article class="detail-card">
                                <div class="detail-icon">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <h3 class="detail-title">Where</h3>
                                <div class="detail-content">
                                    <p>The Hundred Acre Meadow</p>
                                    <p>123 Enchanted Forest Lane</p>
                                    <p>Storybook Valley, Woodlands</p>
                                    <small>Parking available in Rabbit's carrot patch</small>
                                </div>
                            </article>

                            <!-- Detail Card 3 -->
                            <article class="detail-card">
                                <div class="detail-icon">
                                    <i class="fas fa-gift"></i>
                                </div>
                                <h3 class="detail-title">Gifts</h3>
                                <div class="detail-content">
                                    <p>Your presence is the best present!</p>
                                    <p>If you wish to bring something, consider:</p>
                                    <ul>
                                        <li>Books for our library</li>
                                        <li>Outdoor adventure gear</li>
                                        <li>Contributions to his college fund</li>
                                    </ul>
                                </div>
                            </article>

                            <!-- Detail Card 4 -->
                            <article class="detail-card">
                                <div class="detail-icon">
                                    <i class="fas fa-utensils"></i>
                                </div>
                                <h3 class="detail-title">Food & Fun</h3>
                                <div class="detail-content">
                                    <p>Honey-themed treats</p>
                                    <p>Picnic-style lunch</p>
                                    <p>Woodland games & adventures</p>
                                    <p>Storytime with characters</p>
                                    <em>All dietary needs accommodated - just let us know!</em>
                                </div>
                            </article>
                        </div>
                    </div>
                </section>

                <!-- Games Section -->
                <section id="games" class="content-section">
                    <div class="content-section-inner">
                        <div class="section-number">4</div>
                        <div class="section-header">
                            <h2 class="story-title">
                                <i class="fas fa-gamepad"></i>
                                Woodland Game: Honey Hunt
                            </h2>
                            <p class="story-intro">Help Pooh collect as many honey pots as you can while dodging those very busy bees.</p>
                        </div>

                        <div class="game-layout">
                            <div class="game-overview-panel">
                                <!-- Stats Banner -->
                                <div class="game-stats-banner" aria-hidden="true">
                                    <div class="stat-item">
                                        <strong>60s</strong>
                                        <div class="stat-label">
                                            <span>Quick Play</span>
                                            <small>Perfect party-length game</small>
                                        </div>
                                    </div>
                                    <div class="stat-item">
                                        <strong>3</strong>
                                        <div class="stat-label">
                                            <span>Honey Jars</span>
                                            <small>Lose them to the bees!</small>
                                        </div>
                                    </div>
                                    <div class="stat-item">
                                        <strong>5x</strong>
                                        <div class="stat-label">
                                            <span>Combo Cap</span>
                                            <small>Chain catches for big scores</small>
                                        </div>
                                    </div>
                                    <div class="stat-item">
                                        <strong>Touch</strong>
                                        <div class="stat-label">
                                            <span>Phone Friendly</span>
                                            <small>Buttons & swipe controls</small>
                                        </div>
                                    </div>
                                </div>

                                <!-- Games Grid (single game) -->
                                <div class="games-grid">
                                    <!-- Game 1: Honey Hunt -->
                                    <article class="game-card featured">
                                        <div class="game-card-header">
                                            <div class="game-badge">Most Popular</div>
                                            <div class="game-character-icon" aria-hidden="true">üêªüçØ</div>
                                            <div class="game-rating">
                                                <i class="fas fa-star"></i>
                                                <span>4.8</span>
                                            </div>
                                        </div>

                                        <div class="game-card-body">
                                            <div class="game-icon-large">üçØ</div>
                                            <h3 class="game-title">Honey Hunt Adventure</h3>
                                            <p class="game-description">
                                                Move Pooh across the meadow to catch falling honey pots and dodge buzzing bees.
                                                Chain catches together to build your honey combo and climb the high-score board.
                                            </p>

                                            <div class="game-tags">
                                                <span class="tag">Touch Friendly</span>
                                                <span class="tag">Score Chase</span>
                                                <span class="tag">Ages 3+</span>
                                            </div>

                                            <div class="game-stats">
                                                <div class="stat">
                                                    <i class="fas fa-signal"></i>
                                                    <span>Easy to Learn</span>
                                                </div>
                                                <div class="stat">
                                                    <i class="fas fa-user"></i>
                                                    <span>1 Player</span>
                                                </div>
                                                <div class="stat">
                                                    <i class="fas fa-clock"></i>
                                                    <span>60s Rounds</span>
                                                </div>
                                            </div>

                                            <div class="game-controls">
                                                <button class="btn-play-game" type="button" data-action="play-honey-game">
                                                    <i class="fas fa-play"></i>
                                                    <span>Play Honey Hunt</span>
                                                </button>
                                                <button class="btn-secondary" type="button">
                                                    <i class="fas fa-book-open"></i>
                                                    <span>How to Play</span>
                                                </button>
                                            </div>
                                        </div>

                                        <div class="game-card-footer">
                                            <div class="high-score">
                                                <i class="fas fa-crown"></i>
                                                <span id="card-high-score-text">High Score: 0</span>
                                            </div>
                                            <div class="game-meta">
                                                <span><i class="fas fa-mobile-alt"></i> Optimized for phones</span>
                                                <span><i class="fas fa-child"></i> Kid + grown-up friendly</span>
                                            </div>
                                        </div>
                                    </article>
                                </div>

                                <div class="game-checklist" aria-label="Quick start tips">
                                    <h4><i class="fas fa-map-signs"></i> Quick play checklist</h4>
                                    <ul>
                                        <li><i class="fas fa-check-circle check-icon"></i>Tap <strong>Play Honey Hunt</strong> to drop into the meadow.</li>
                                        <li><i class="fas fa-check-circle check-icon"></i>Use arrow keys or the touch buttons to glide Pooh left or right.</li>
                                        <li><i class="fas fa-check-circle check-icon"></i>Catch honey pots to build combos, dodge bees to protect your jars.</li>
                                    </ul>
                                </div>
                            </div>

                            <!-- Live Game Area -->
                            <div class="games-play-area" id="honeyGameArea">
                                <div class="play-column">
                                <div class="play-header">
                                    <p class="eyebrow">Interactive Mini Game</p>
                                    <h3>Honey Hunt Adventure</h3>
                                    <p class="tiny-text">Use arrow keys (or A/D) on desktop, or the touch buttons on mobile, to move Pooh and collect honey.</p>
                                    <div class="play-hud">
                                        <div>
                                            <strong id="honey-score">0</strong>
                                            <span>Score</span>
                                        </div>
                                        <div>
                                            <strong id="honey-time">60s</strong>
                                            <span>Time</span>
                                        </div>
                                        <div>
                                            <strong id="honey-lives">3</strong>
                                            <span>Honey Jars</span>
                                        </div>
                                        <div>
                                            <strong id="honey-combo">1x</strong>
                                            <span>Combo</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="game-surface">
                                    <canvas id="honeyCanvas" aria-label="Honey Hunt game area" role="img"></canvas>
                                    <div class="game-overlay" id="catch-overlay">
                                        <div class="overlay-inner">
                                            <div id="catch-countdown">Tap Start to begin!</div>
                                            <div id="catch-hint">Move Pooh to catch honey pots and dodge bees.</div>
                                            <div id="catch-status">Use keyboard arrows or the touch buttons below.</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="play-controls">
                                    <button class="magical-btn" id="start-catch" type="button">
                                        <i class="fas fa-play"></i>
                                        <span>Start Hunt</span>
                                    </button>
                                    <button class="ghost-btn" id="pause-catch" type="button" disabled>
                                        <i class="fas fa-pause"></i>
                                        <span>Pause</span>
                                    </button>
                                    <div class="hud-badge">
                                        <i class="fas fa-crown"></i>
                                        <span id="catch-high-score-display">0 points</span>
                                    </div>
                                </div>

                                <div class="mobile-controls-panel" aria-label="Honey Hunt touch controls">
                                    <p class="eyebrow">Touch Controls</p>
                                    <div class="touch-buttons">
                                        <button class="ghost-btn" id="mobileLeftBtn" type="button">
                                            <i class="fas fa-chevron-left"></i>
                                            <span>Left</span>
                                        </button>
                                        <button class="ghost-btn" id="mobileRightBtn" type="button">
                                            <i class="fas fa-chevron-right"></i>
                                            <span>Right</span>
                                        </button>
                                    </div>
                                    <p class="tiny-text">
                                        Hold the buttons or swipe on the game area to move. Catch honey pots for points, avoid bees to protect your honey jars.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- RSVP Section -->
                <section id="rsvp" class="content-section">
                    <div class="content-section-inner">
                        <div class="section-number">5</div>
                        
                        <div class="rsvp-form">
                            <div class="section-header">
                                <h2 class="story-title">
                                    <i class="fas fa-feather-alt"></i>
                                    RSVP to the Adventure
                                </h2>
                                <p class="story-intro">Let us know if you can join our woodland celebration</p>
                            </div>
                            
                            <div class="rsvp-count">
                                <i class="fas fa-users"></i>
                                <span id="rsvp-count">42</span> friends are already joining the adventure!
                            </div>
                            
                            <form class="storybook-form" id="rsvpForm" novalidate>
                                <div class="form-grid">
                                    <div class="form-field">
                                        <label for="guestName" class="field-label">
                                            <i class="fas fa-user"></i>
                                            Your Name
                                        </label>
                                        <input type="text" id="guestName" name="guestName" required 
                                               placeholder="Christopher Robin" autocomplete="name">
                                        <div class="field-hint">Please include your full name</div>
                                    </div>
                                    
                                    <div class="form-field">
                                        <label for="guestEmail" class="field-label">
                                            <i class="fas fa-envelope"></i>
                                            Email Address
                                        </label>
                                        <input type="email" id="guestEmail" name="guestEmail" required 
                                               placeholder="christopher@hundredacrewood.com" autocomplete="email">
                                        <div class="field-hint">We'll send confirmation here</div>
                                    </div>
                                </div>
                                
                                <div class="form-field">
                                    <label for="partySize" class="field-label">
                                        <i class="fas fa-users"></i>
                                        How Many in Your Party?
                                    </label>
                                    <select id="partySize" name="partySize" required>
                                        <option value="" selected disabled>Select number of guests</option>
                                        <option value="1">Just me (1)</option>
                                        <option value="2">Me + 1 (2)</option>
                                        <option value="3">Me + 2 (3)</option>
                                        <option value="4">Me + 3 (4)</option>
                                        <option value="5">Me + 4 (5)</option>
                                        <option value="6">Me + 5 (6)</option>
                                        <option value="7">Me + 6 (7)</option>
                                        <option value="8">Me + 7 (8)</option>
                                    </select>
                                    <div class="field-hint">Include yourself in the count</div>
                                </div>
                                
                                <div class="form-field">
                                    <label class="field-label">
                                        <i class="fas fa-calendar-check"></i>
                                        Will you attend?
                                    </label>
                                    <div class="attendance-options">
                                        <label class="radio-option">
                                            <input type="radio" name="attendance" value="yes" required>
                                            <span>Yes, I'll be there with bells on!</span>
                                        </label>
                                        <label class="radio-option">
                                            <input type="radio" name="attendance" value="maybe">
                                            <span>Maybe - I'll do my best to make it</span>
                                        </label>
                                        <label class="radio-option">
                                            <input type="radio" name="attendance" value="no">
                                            <span>Unfortunately, I can't make it</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="form-field">
                                    <label for="guestMessage" class="field-label">
                                        <i class="fas fa-comment-alt"></i>
                                        Message for Baby Gunner
                                    </label>
                                    <textarea id="guestMessage" name="guestMessage" 
                                              placeholder="Share a wish, memory, or piece of advice for Baby Gunner's adventure book..."></textarea>
                                    <div class="field-hint">This will be added to Gunner's memory book</div>
                                </div>
                                
                                <div class="form-field">
                                    <label for="dietaryNeeds" class="field-label">
                                        <i class="fas fa-utensils"></i>
                                        Dietary Requirements
                                    </label>
                                    <input type="text" id="dietaryNeeds" name="dietaryNeeds" 
                                           placeholder="e.g., vegetarian, allergies, preferences">
                                    <div class="field-hint">Let us know so we can prepare accordingly</div>
                                </div>
                                
                                <button type="submit" class="magical-btn">
                                    <i class="fas fa-paper-plane"></i>
                                    <span>Send RSVP</span>
                                </button>
                                
                                <div class="form-status" style="display: none;"></div>
                            </form>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Character Modal -->
    <div class="character-modal" id="characterModal" aria-hidden="true" role="dialog" aria-modal="true">
        <div class="modal-content">
            <button class="close-modal" type="button" aria-label="Close character details">&times;</button>
            <div class="modal-character">
                <div class="modal-character-icon" id="modalCharacterIcon">üêª</div>
                <h3 class="modal-character-name" id="modalCharacterName">Winnie the Pooh</h3>
            </div>
            <p class="modal-character-quote" id="modalCharacterQuote">
                "A little consideration, a little thought for others, makes all the difference."
            </p>
            <p class="modal-character-bio" id="modalCharacterBio">
                Pooh and his friends are here to help us celebrate Baby Gunner's first year with kindness, curiosity, 
                and plenty of honey-sweet memories. At the party, each character represents a different kind of friend 
                we‚Äôre grateful to have in Gunner‚Äôs life.
            </p>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>
            And so our story continues, with new adventures waiting around every corner...
        </p>
        <p>
            Thank you for being part of Baby Gunner's magical first year in the Hundred Acre Wood.
        </p>
        <div class="footer-credits">
            <p>
                Made with <i class="fas fa-heart"></i> by family & friends<br>
                Inspired by A.A. Milne's wonderful world<br>
                ¬© <span id="currentYear">2024</span> Baby Gunner's Celebration
            </p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Helper: smooth scroll
        function smoothScrollTo(targetId) {
            const targetElement = document.querySelector(targetId);
            if (!targetElement) return;
            const offset = 80;
            const top = targetElement.getBoundingClientRect().top + window.scrollY - offset;
            window.scrollTo({
                top,
                behavior: 'smooth'
            });
        }

        // Loading Screen
        window.addEventListener('load', function() {
            setTimeout(function() {
                const loadingScreen = document.getElementById('loadingScreen');
                if (loadingScreen) loadingScreen.style.display = 'none';
            }, 2000);
        });

        // Navigation Smooth Scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                const targetId = this.getAttribute('href');
                if (!targetId || targetId === '#') return;
                e.preventDefault();
                smoothScrollTo(targetId);
            });
        });

        // Reading Progress Bar
        const progressBar = document.querySelector('.reading-progress');
        window.addEventListener('scroll', function() {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = height > 0 ? (winScroll / height) * 100 : 0;
            if (progressBar) {
                progressBar.style.width = scrolled + '%';
                progressBar.setAttribute('aria-valuenow', scrolled.toFixed(0));
            }
        });

        // Scroll to Top Button
        const scrollTopBtn = document.querySelector('.fab.fab--visible');
        if (scrollTopBtn) {
            scrollTopBtn.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        }

        // Persistent RSVP button scroll
        const persistentRsvpBtn = document.querySelector('.persistent-rsvp');
        if (persistentRsvpBtn) {
            persistentRsvpBtn.addEventListener('click', function() {
                smoothScrollTo('#rsvp');
            });
        }

        // Music Control (UI only)
        const musicBtn = document.querySelector('.music-btn');
        if (musicBtn) {
            musicBtn.addEventListener('click', function() {
                const isPressed = this.getAttribute('aria-pressed') === 'true';
                this.setAttribute('aria-pressed', (!isPressed).toString());
                this.setAttribute('aria-label', !isPressed ? 'Mute background music' : 'Play background music');
                this.innerHTML = `<i class="fas fa-${!isPressed ? 'volume-mute' : 'music'}"></i>`;
                // Hook real audio here if desired.
            });
        }

        // Share Button (Web Share API + fallback)
        const shareFab = document.querySelector('.fab[aria-label="Share Celebration"]');
        if (shareFab) {
            shareFab.addEventListener('click', function() {
                const shareData = {
                    title: "Baby Gunner's Hundred Acre Wood Celebration",
                    text: "Join us in celebrating Baby Gunner's first adventure in the Hundred Acre Wood!",
                    url: window.location.href
                };
                if (navigator.share) {
                    navigator.share(shareData).catch(() => {});
                } else {
                    alert('Share this celebration with your friends! Copy the link:\n\n' + window.location.href);
                }
            });
        }

        // Character Modal
        (function initCharacterModal() {
            const modal = document.getElementById('characterModal');
            if (!modal) return;

            const closeBtn = modal.querySelector('.close-modal');
            const modalName = document.getElementById('modalCharacterName');
            const modalQuote = document.getElementById('modalCharacterQuote');
            const modalIcon = document.getElementById('modalCharacterIcon');
            let lastFocusedElement = null;

            function openModalFromButton(btn) {
                const nameEl = btn.querySelector('.character-name');
                const quoteEl = btn.querySelector('.character-quote');
                const iconEl = btn.querySelector('.character-illustration span');

                if (nameEl && modalName) modalName.textContent = nameEl.textContent.trim();
                if (quoteEl && modalQuote) modalQuote.textContent = quoteEl.textContent.trim();
                if (iconEl && modalIcon) modalIcon.textContent = iconEl.textContent.trim() || 'üçØ';

                lastFocusedElement = btn;
                modal.style.display = 'flex';
                modal.setAttribute('aria-hidden', 'false');
                if (closeBtn) closeBtn.focus();
            }

            function closeModal() {
                modal.style.display = 'none';
                modal.setAttribute('aria-hidden', 'true');
                if (lastFocusedElement) lastFocusedElement.focus();
            }

            document.querySelectorAll('.character-spotlight').forEach(btn => {
                btn.addEventListener('click', function() {
                    openModalFromButton(this);
                });
            });

            if (closeBtn) {
                closeBtn.addEventListener('click', closeModal);
            }

            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeModal();
                }
            });

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modal.style.display === 'flex') {
                    closeModal();
                }
            });
        })();

        // RSVP Form
        (function initRsvpForm() {
            const form = document.getElementById('rsvpForm');
            if (!form) return;
            const formStatus = form.querySelector('.form-status');
            const rsvpCountEl = document.getElementById('rsvp-count');

            form.addEventListener('submit', function(e) {
                e.preventDefault();

                const name = form.querySelector('#guestName');
                const email = form.querySelector('#guestEmail');
                const partySize = form.querySelector('#partySize');
                const attendance = form.querySelector('input[name="attendance"]:checked');

                if (!name.value.trim() || !email.value.trim() || !partySize.value || !attendance) {
                    if (formStatus) {
                        formStatus.style.display = 'block';
                        formStatus.textContent = 'Please fill in all required fields before sending your RSVP.';
                        formStatus.className = 'form-status error';
                    }
                    return;
                }

                // Basic RSVP success path
                if (formStatus) {
                    formStatus.style.display = 'block';
                    formStatus.textContent = 'Thank you for your RSVP! We look forward to celebrating with you.';
                    formStatus.className = 'form-status success';
                }

                // Only increment count if yes or maybe
                if ((attendance.value === 'yes' || attendance.value === 'maybe') && rsvpCountEl) {
                    const current = parseInt(rsvpCountEl.textContent, 10) || 0;
                    rsvpCountEl.textContent = String(current + 1);
                }

                // Reset form after a short delay
                setTimeout(() => {
                    form.reset();
                }, 2500);
            });
        })();

        // Footer year
        const yearEl = document.getElementById('currentYear');
        if (yearEl) {
            yearEl.textContent = new Date().getFullYear();
        }

        // Honey Hunt Game
        class HoneyHuntGame {
            constructor() {
                this.canvas = document.getElementById('honeyCanvas');
                this.overlay = document.getElementById('catch-overlay');
                this.countdownEl = document.getElementById('catch-countdown');
                this.hintEl = document.getElementById('catch-hint');
                this.statusEl = document.getElementById('catch-status');

                this.scoreEl = document.getElementById('honey-score');
                this.timeEl = document.getElementById('honey-time');
                this.livesEl = document.getElementById('honey-lives');
                this.comboEl = document.getElementById('honey-combo');
                this.highScoreDisplay = document.getElementById('catch-high-score-display');
                this.cardHighScoreText = document.getElementById('card-high-score-text');

                this.startBtn = document.getElementById('start-catch');
                this.pauseBtn = document.getElementById('pause-catch');
                this.mobileLeftBtn = document.getElementById('mobileLeftBtn');
                this.mobileRightBtn = document.getElementById('mobileRightBtn');
                this.playCardButtons = document.querySelectorAll('[data-action="play-honey-game"]');

                const required = [
                    this.canvas,
                    this.overlay,
                    this.startBtn,
                    this.pauseBtn,
                    this.scoreEl,
                    this.timeEl,
                    this.livesEl,
                    this.comboEl,
                    this.highScoreDisplay
                ];

                if (required.some(el => !el)) return;

                this.ctx = this.canvas.getContext('2d');
                if (!this.ctx) return;

                this.width = 0;
                this.height = 0;
                this.player = null;
                this.honeys = [];
                this.bees = [];

                this.state = {
                    status: 'idle',
                    time: 60,
                    score: 0,
                    lives: 3,
                    combo: 1,
                    spawnHoneyTimer: 0,
                    spawnBeeTimer: 0,
                    lastFrameTime: 0,
                    moveLeft: false,
                    moveRight: false
                };

                this.rafId = null;

                this.highScore = parseInt(localStorage.getItem('honeyHighScore') || '0', 10);
                this.updateHighScoreDisplay();

                this.gameLoop = this.gameLoop.bind(this);
                this.resizeCanvas = this.resizeCanvas.bind(this);

                this.setOverlayCopy({
                    countdown: 'Tap Start to begin!',
                    hint: 'Move Pooh to catch honey pots and dodge bees.',
                    status: 'Use keyboard arrows or the touch buttons below.'
                });

                this.resizeCanvas();
                window.addEventListener('resize', this.resizeCanvas);
                this.bindControls();
                this.updateHUD();
            }

            setOverlayCopy({ countdown, hint, status }) {
                if (this.countdownEl && countdown !== undefined) this.countdownEl.textContent = countdown;
                if (this.hintEl && hint !== undefined) this.hintEl.textContent = hint;
                if (this.statusEl && status !== undefined) this.statusEl.textContent = status;
            }

            updateHighScoreDisplay() {
                if (this.highScoreDisplay) this.highScoreDisplay.textContent = `${this.highScore} points`;
                if (this.cardHighScoreText) this.cardHighScoreText.textContent = `High Score: ${this.highScore}`;
            }

            resizeCanvas() {
                const parent = this.canvas.parentElement;
                if (!parent) return;

                const rect = parent.getBoundingClientRect();
                const dpr = window.devicePixelRatio || 1;

                this.canvas.width = rect.width * dpr;
                this.canvas.height = rect.height * dpr;
                this.ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

                const prevWidth = this.width || rect.width;
                this.width = rect.width;
                this.height = rect.height;

                if (!this.player) {
                    this.player = {
                        width: 60,
                        height: 40,
                        x: this.width / 2 - 30,
                        y: this.height - 70,
                        speed: 320
                    };
                } else {
                    const ratio = this.width / prevWidth;
                    this.player.x = Math.min(this.width - this.player.width, this.player.x * ratio);
                    this.player.y = this.height - 70;
                }
            }

            rectsIntersect(a, b) {
                return !(
                    a.x > b.x + b.width ||
                    a.x + a.width < b.x ||
                    a.y > b.y + b.height ||
                    a.y + a.height < b.y
                );
            }

            fillRoundedRect(x, y, width, height, radius) {
                const r = Math.min(radius, width / 2, height / 2);
                this.ctx.beginPath();
                this.ctx.moveTo(x + r, y);
                this.ctx.lineTo(x + width - r, y);
                this.ctx.quadraticCurveTo(x + width, y, x + width, y + r);
                this.ctx.lineTo(x + width, y + height - r);
                this.ctx.quadraticCurveTo(x + width, y + height, x + width - r, y + height);
                this.ctx.lineTo(x + r, y + height);
                this.ctx.quadraticCurveTo(x, y + height, x, y + height - r);
                this.ctx.lineTo(x, y + r);
                this.ctx.quadraticCurveTo(x, y, x + r, y);
                this.ctx.closePath();
                this.ctx.fill();
            }

            spawnHoney() {
                const width = 26;
                const x = Math.random() * (this.width - width - 20) + 10;
                const speed = 140 + Math.random() * 80;
                this.honeys.push({ x, y: -30, width, height: width, speed });
            }

            spawnBee() {
                const width = 26;
                const x = Math.random() * (this.width - width - 20) + 10;
                const speed = 160 + Math.random() * 90;
                this.bees.push({ x, y: -30, width, height: width, speed });
            }

            updateHUD() {
                if (this.scoreEl) this.scoreEl.textContent = Math.round(this.state.score).toString();
                if (this.timeEl) this.timeEl.textContent = `${Math.max(0, Math.ceil(this.state.time))}s`;
                if (this.livesEl) this.livesEl.textContent = this.state.lives.toString();
                if (this.comboEl) {
                    const comboText = this.state.combo.toFixed(1).replace(/\.0$/, '');
                    this.comboEl.textContent = `${comboText}x`;
                }
            }

            drawGame() {
                this.ctx.clearRect(0, 0, this.width, this.height);

                // background
                const gradient = this.ctx.createLinearGradient(0, 0, 0, this.height);
                gradient.addColorStop(0, '#FFF7E6');
                gradient.addColorStop(1, '#FFE0B2');
                this.ctx.fillStyle = gradient;
                this.ctx.fillRect(0, 0, this.width, this.height);

                // ground
                this.ctx.fillStyle = '#D7CCC8';
                this.ctx.fillRect(0, this.height - 24, this.width, 30);
                this.ctx.fillStyle = '#8D6E63';
                this.ctx.fillRect(0, this.height - 16, this.width, 16);

                // player
                const p = this.player;
                this.ctx.fillStyle = '#FFC107';
                this.fillRoundedRect(p.x, p.y, p.width, p.height, 10);
                this.ctx.fillStyle = '#6D4C41';
                this.ctx.fillRect(p.x + 18, p.y + 8, p.width - 36, 10);
                this.ctx.fillStyle = '#FFA000';
                this.ctx.fillRect(p.x + 6, p.y + 26, p.width - 12, 8);

                // honeys
                this.honeys.forEach(h => {
                    this.ctx.fillStyle = '#FFB300';
                    this.fillRoundedRect(h.x, h.y, h.width, h.height, 6);
                    this.ctx.fillStyle = '#FFE082';
                    this.ctx.fillRect(h.x + h.width * 0.2, h.y + 2, h.width * 0.6, 6);
                    this.ctx.fillStyle = '#6D4C41';
                    this.ctx.fillRect(h.x + h.width * 0.2, h.y - 4, h.width * 0.6, 6);
                });

                // bees
                this.bees.forEach(b => {
                    const centerX = b.x + b.width / 2;
                    const centerY = b.y + b.height / 2;
                    const r = b.width / 2;

                    this.ctx.beginPath();
                    this.ctx.fillStyle = '#FFEB3B';
                    this.ctx.ellipse(centerX, centerY, r, r * 0.7, 0, 0, Math.PI * 2);
                    this.ctx.fill();

                    this.ctx.strokeStyle = '#212121';
                    this.ctx.lineWidth = 3;
                    this.ctx.beginPath();
                    this.ctx.moveTo(centerX - r, centerY - r * 0.3);
                    this.ctx.lineTo(centerX + r, centerY - r * 0.3);
                    this.ctx.moveTo(centerX - r, centerY);
                    this.ctx.lineTo(centerX + r, centerY);
                    this.ctx.moveTo(centerX - r, centerY + r * 0.3);
                    this.ctx.lineTo(centerX + r, centerY + r * 0.3);
                    this.ctx.stroke();

                    this.ctx.fillStyle = 'rgba(255,255,255,0.8)';
                    this.ctx.beginPath();
                    this.ctx.ellipse(centerX - r * 0.4, centerY - r * 0.9, r * 0.4, r * 0.6, -0.3, 0, Math.PI * 2);
                    this.ctx.fill();
                    this.ctx.beginPath();
                    this.ctx.ellipse(centerX + r * 0.4, centerY - r * 0.9, r * 0.4, r * 0.6, 0.3, 0, Math.PI * 2);
                    this.ctx.fill();
                });
            }

            updateGame(delta) {
                this.state.time = Math.max(0, this.state.time - delta);

                const distance = this.player.speed * delta;
                if (this.state.moveLeft) this.player.x -= distance;
                if (this.state.moveRight) this.player.x += distance;
                this.player.x = Math.max(0, Math.min(this.width - this.player.width, this.player.x));

                this.state.spawnHoneyTimer += delta;
                this.state.spawnBeeTimer += delta;
                if (this.state.spawnHoneyTimer > 0.9) {
                    this.spawnHoney();
                    this.state.spawnHoneyTimer = 0;
                }
                if (this.state.spawnBeeTimer > 1.6) {
                    this.spawnBee();
                    this.state.spawnBeeTimer = 0;
                }

                this.honeys.forEach(h => { h.y += h.speed * delta; });
                this.bees.forEach(b => { b.y += b.speed * delta; });

                const playerRect = {
                    x: this.player.x,
                    y: this.player.y,
                    width: this.player.width,
                    height: this.player.height
                };

                this.honeys = this.honeys.filter(h => {
                    if (h.y > this.height + 40) return false;
                    if (this.rectsIntersect(playerRect, h)) {
                        const gained = 10 * this.state.combo;
                        this.state.score += gained;
                        this.state.combo = Math.min(this.state.combo + 0.25, 5);
                        return false;
                    }
                    return true;
                });

                this.bees = this.bees.filter(b => {
                    if (b.y > this.height + 40) return false;
                    if (this.rectsIntersect(playerRect, b)) {
                        this.state.lives -= 1;
                        this.state.combo = 1;
                        return false;
                    }
                    return true;
                });

                this.updateHUD();
            }

            endGame(reason) {
                if (this.state.status === 'ended' || this.state.status === 'idle') return;
                this.state.status = 'ended';
                this.updateHUD();

                const finalScore = Math.round(this.state.score);
                this.setOverlayCopy({
                    countdown: 'Game Over',
                    hint: reason === 'time'
                        ? 'Time is up! That was a very fine honey hunt.'
                        : 'The bees were very, very busy today.',
                    status: `Final score: ${finalScore} points`
                });
                if (this.overlay) this.overlay.style.display = 'flex';

                if (finalScore > this.highScore) {
                    this.highScore = finalScore;
                    localStorage.setItem('honeyHighScore', String(this.highScore));
                    if (this.highScoreDisplay) this.highScoreDisplay.textContent = `${finalScore} points (New High Score!)`;
                    if (this.cardHighScoreText) this.cardHighScoreText.textContent = `High Score: ${finalScore} (New!)`;
                } else {
                    this.updateHighScoreDisplay();
                }

                this.rafId = null;

                this.updateButtonStates({
                    startLabel: 'Play Again',
                    pauseDisabled: true,
                    pauseLabel: 'Pause',
                    pauseIcon: 'fas fa-pause'
                });
            }

            gameLoop(timestamp) {
                if (this.state.status !== 'running') return;
                if (!this.state.lastFrameTime) this.state.lastFrameTime = timestamp;
                const delta = (timestamp - this.state.lastFrameTime) / 1000;
                this.state.lastFrameTime = timestamp;

                this.updateGame(delta);
                this.drawGame();

                if (this.state.time <= 0) {
                    this.endGame('time');
                    return;
                }
                if (this.state.lives <= 0) {
                    this.endGame('lives');
                    return;
                }

                this.rafId = requestAnimationFrame(this.gameLoop);
            }

            resetState() {
                this.honeys = [];
                this.bees = [];
                this.state.time = 60;
                this.state.score = 0;
                this.state.lives = 3;
                this.state.combo = 1;
                this.state.spawnHoneyTimer = 0;
                this.state.spawnBeeTimer = 0;
                this.state.lastFrameTime = 0;
                if (this.player) {
                    this.player.x = this.width / 2 - this.player.width / 2;
                    this.player.y = this.height - 70;
                }
                this.updateHUD();
            }

            startGame() {
                const wasRunning = this.state.status === 'running';
                if (wasRunning && this.rafId) {
                    cancelAnimationFrame(this.rafId);
                    this.rafId = null;
                }
                this.resetState();
                this.state.status = 'running';
                if (this.overlay) this.overlay.style.display = 'none';

                this.setOverlayCopy({
                    countdown: '',
                    hint: 'Use arrows/A-D or touch buttons to move.',
                    status: 'Catch honey, dodge bees, build your combo!'
                });

                this.updateButtonStates({
                    startLabel: 'Restart Hunt',
                    startIcon: 'fas fa-redo',
                    pauseDisabled: false,
                    pauseLabel: 'Pause',
                    pauseIcon: 'fas fa-pause'
                });

                this.rafId = requestAnimationFrame(this.gameLoop);
            }

            togglePause() {
                if (this.state.status === 'running') {
                    this.state.status = 'paused';
                    if (this.overlay) this.overlay.style.display = 'flex';
                    this.setOverlayCopy({
                        countdown: 'Game Paused',
                        hint: 'Tap Resume or press Pause again to continue.',
                        status: 'Your honey hunt is waiting.'
                    });
                    this.updateButtonStates({
                        pauseLabel: 'Resume',
                        pauseIcon: 'fas fa-play'
                    });
                    this.rafId = null;
                } else if (this.state.status === 'paused') {
                    this.state.status = 'running';
                    if (this.overlay) this.overlay.style.display = 'none';
                    this.state.lastFrameTime = 0;
                    this.updateButtonStates({
                        pauseLabel: 'Pause',
                        pauseIcon: 'fas fa-pause'
                    });
                    this.rafId = requestAnimationFrame(this.gameLoop);
                }
            }

            updateButtonStates({ startLabel, startIcon = 'fas fa-play', pauseDisabled, pauseLabel, pauseIcon = 'fas fa-pause' }) {
                if (this.startBtn) {
                    const span = this.startBtn.querySelector('span');
                    const icon = this.startBtn.querySelector('i');
                    if (span && startLabel) span.textContent = startLabel;
                    if (icon && startIcon) icon.className = startIcon;
                }

                if (this.pauseBtn) {
                    const span = this.pauseBtn.querySelector('span');
                    const icon = this.pauseBtn.querySelector('i');
                    if (pauseDisabled !== undefined) this.pauseBtn.disabled = pauseDisabled;
                    if (span && pauseLabel) span.textContent = pauseLabel;
                    if (icon && pauseIcon) icon.className = pauseIcon;
                }
            }

            bindControls() {
                window.addEventListener('keydown', (e) => this.handleKeyDown(e));
                window.addEventListener('keyup', (e) => this.handleKeyUp(e));
                this.bindDirectionalButton(this.mobileLeftBtn, 'left');
                this.bindDirectionalButton(this.mobileRightBtn, 'right');
                this.bindSwipeControls();

                if (this.startBtn) {
                    this.startBtn.addEventListener('click', () => this.startGame());
                }

                if (this.pauseBtn) {
                    this.pauseBtn.addEventListener('click', () => {
                        if (!this.pauseBtn.disabled && (this.state.status === 'running' || this.state.status === 'paused')) {
                            this.togglePause();
                        }
                    });
                }

                this.playCardButtons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        smoothScrollTo('#honeyGameArea');
                        if (this.state.status === 'idle' || this.state.status === 'ended') {
                            setTimeout(() => this.startGame(), 400);
                        }
                    });
                });
            }

            handleKeyDown(e) {
                if (this.state.status !== 'running') return;
                if (e.key === 'ArrowLeft' || e.key.toLowerCase() === 'a') {
                    this.state.moveLeft = true;
                    e.preventDefault();
                } else if (e.key === 'ArrowRight' || e.key.toLowerCase() === 'd') {
                    this.state.moveRight = true;
                    e.preventDefault();
                }
            }

            handleKeyUp(e) {
                if (e.key === 'ArrowLeft' || e.key.toLowerCase() === 'a') {
                    this.state.moveLeft = false;
                } else if (e.key === 'ArrowRight' || e.key.toLowerCase() === 'd') {
                    this.state.moveRight = false;
                }
            }

            bindDirectionalButton(btn, direction) {
                if (!btn) return;
                btn.addEventListener('pointerdown', () => {
                    if (this.state.status !== 'running') return;
                    if (direction === 'left') {
                        this.state.moveLeft = true;
                        this.state.moveRight = false;
                    } else {
                        this.state.moveRight = true;
                        this.state.moveLeft = false;
                    }
                });
                const stop = () => {
                    if (direction === 'left') {
                        this.state.moveLeft = false;
                    } else {
                        this.state.moveRight = false;
                    }
                };
                btn.addEventListener('pointerup', stop);
                btn.addEventListener('pointerleave', stop);
            }

            bindSwipeControls() {
                let touchStartX = null;
                this.canvas.addEventListener('touchstart', (e) => {
                    if (!e.touches || e.touches.length === 0) return;
                    touchStartX = e.touches[0].clientX;
                }, { passive: true });

                this.canvas.addEventListener('touchmove', (e) => {
                    if (this.state.status !== 'running') return;
                    if (!e.touches || e.touches.length === 0) return;
                    if (!this.player) return;

                    const touchX = e.touches[0].clientX;
                    if (touchStartX === null) {
                        touchStartX = touchX;
                    }
                    const diff = touchX - touchStartX;
                    this.player.x = Math.max(0, Math.min(this.width - this.player.width, this.player.x + diff * 0.6));
                    touchStartX = touchX;
                }, { passive: true });

                this.canvas.addEventListener('touchend', () => {
                    touchStartX = null;
                });
            }
        }

        (function initHoneyHuntGame() {
            window.honeyGame = new HoneyHuntGame();
        })();
    </script>
</body>
</html>
