<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0, viewport-fit=cover" name="viewport">
    <title>Baby Gunnar's Hundred Acre Wood Adventure</title>
    <meta content="A storybook-style Hundred Acre Wood adventure with a honey-catching game to celebrate Baby Gunnar."
          name="description">
    <meta content="#f4a944" name="theme-color">
    <meta content="light dark" name="color-scheme">
    <meta content="Baby Gunnar's Hundred Acre Wood Shower" property="og:title">
    <meta content="A sweet storybook and honey-catching game‚Äîread, play, and leave your wishes."
          property="og:description">
    <meta content="icons/icon.svg" property="og:image">
    <meta content="website" property="og:type">
    <!-- Font Awesome for game icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <link as="image" href="Images/Characters/Gunnar.png" rel="preload">
    <link href="styles.css" rel="stylesheet">
<style>
/* ==========================================================================
   HUNDRED ACRE WOOD ADVENTURE - AMAZING CSS
   ========================================================================== */

/* CSS Variables for Theming */
:root {
  /* Light Theme (Default) */
  --bg: #fff9ec;
  --bg-soft: #fff4dd;
  --ink: #3b2604;
  --ink-soft: #5a4330;
  --card-bg: #ffffff;
  --border: rgba(139, 92, 0, 0.15);
  --border-soft: rgba(0, 0, 0, 0.06);
  --shadow: 0 8px 32px rgba(139, 92, 0, 0.08);
  --shadow-lg: 0 20px 60px rgba(139, 92, 0, 0.12);
  
  /* Honey Colors */
  --honey: #f4b944;
  --honey-light: #f9d878;
  --honey-dark: #d97706;
  --honey-glow: rgba(244, 185, 68, 0.4);
  
  /* Pooh Red */
  --pooh-red: #e62e2e;
  --pooh-red-light: #ff6b6b;
  
  /* Woodland Colors */
  --sage: #9dc183;
  --sky: #7dd3fc;
  --forest: #4d7c0f;
  --dirt: #a16207;
  
  /* Accents */
  --accent-gold: #fbbf24;
  --accent-blue: #38bdf8;
  --accent-green: #84cc16;
  --accent-pink: #f472b6;
  
  /* Typography */
  --font-heading: 'Georgia', 'Times New Roman', serif;
  --font-body: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  --font-special: 'Comic Sans MS', 'Chalkboard SE', cursive;
  
  /* Spacing */
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;
  --space-3xl: 4rem;
  
  /* Border Radius */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 20px;
  --radius-xl: 30px;
  --radius-full: 999px;
  
  /* Transitions */
  --transition-fast: 150ms ease;
  --transition-base: 300ms ease;
  --transition-slow: 500ms ease;
  --transition-bounce: 300ms cubic-bezier(0.68, -0.55, 0.265, 1.55);
  
  /* Layout */
  --header-height: 80px;
  --page-width: 1200px;
  --content-padding: clamp(1rem, 5vw, 2rem);
}

/* Dark Theme */
:root.theme-dark {
  --bg: #1a1a1a;
  --bg-soft: #2a2a2a;
  --ink: #f0f0f0;
  --ink-soft: #cccccc;
  --card-bg: #2a2a2a;
  --border: rgba(244, 185, 68, 0.2);
  --border-soft: rgba(255, 255, 255, 0.1);
  --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 20px 60px rgba(0, 0, 0, 0.5);
  --honey-glow: rgba(244, 185, 68, 0.2);
}

/* Reset & Base Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
  font-size: 16px;
}

body {
  background: var(--bg);
  color: var(--ink);
  font-family: var(--font-body);
  line-height: 1.6;
  min-height: 100vh;
  overflow-x: hidden;
  position: relative;
}

body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    radial-gradient(circle at 20% 30%, rgba(244, 185, 68, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 70%, rgba(157, 193, 131, 0.08) 0%, transparent 50%),
    radial-gradient(circle at 40% 80%, rgba(125, 211, 252, 0.05) 0%, transparent 50%);
  pointer-events: none;
  z-index: -1;
}

/* Accessibility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Utility Classes */
.flex {
  display: flex;
}

.grid {
  display: grid;
}

.container {
  width: 100%;
  max-width: var(--page-width);
  margin: 0 auto;
  padding: 0 var(--content-padding);
}

/* Enhanced Scene Background */
.enhanced-scene {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: -1;
  opacity: 0.6;
  background-image: 
    url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><path d="M20,20 Q50,5 80,20 T140,20" stroke="%23f4b944" fill="none" stroke-width="0.5" opacity="0.3"/></svg>'),
    url('data:image/svg+xml,<svg width="60" height="60" xmlns="http://www.w3.org/2000/svg"><circle cx="30" cy="30" r="2" fill="%239dc183" opacity="0.2"/></svg>');
}

/* Cloud Layer */
.cloud-layer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 200px;
  pointer-events: none;
  z-index: -1;
  opacity: 0.4;
}

.cloud {
  position: absolute;
  font-size: 4rem;
  opacity: 0.3;
  animation: float 20s infinite linear;
}

.cloud:nth-child(1) {
  top: 20%;
  left: 10%;
  animation-delay: 0s;
}

.cloud:nth-child(2) {
  top: 40%;
  left: 60%;
  animation-delay: -7s;
  animation-duration: 25s;
}

.cloud:nth-child(3) {
  top: 10%;
  left: 80%;
  animation-delay: -14s;
  animation-duration: 30s;
}

@keyframes float {
  0% { transform: translateX(-100px); }
  100% { transform: translateX(calc(100vw + 100px)); }
}

/* Settings Panel */
.settings-panel {
  position: fixed;
  top: var(--space-lg);
  right: var(--space-lg);
  z-index: 1000;
}

.settings-button {
  background: var(--card-bg);
  border: 2px solid var(--border);
  border-radius: var(--radius-full);
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 1.5rem;
  color: var(--ink);
  transition: all var(--transition-base);
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
}

.settings-button:hover {
  transform: scale(1.1) rotate(90deg);
  background: var(--honey);
  color: white;
  box-shadow: 0 0 20px var(--honey-glow);
}

.settings-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(4px);
  z-index: 2000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--content-padding);
  opacity: 0;
  visibility: hidden;
  transition: all var(--transition-base);
}

.settings-overlay.visible {
  opacity: 1;
  visibility: visible;
}

.settings-card {
  background: var(--card-bg);
  border-radius: var(--radius-xl);
  padding: var(--space-2xl);
  width: 100%;
  max-width: 600px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: var(--shadow-lg);
  border: 2px solid var(--border);
  animation: slideUp var(--transition-base);
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.settings-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-2xl);
  padding-bottom: var(--space-lg);
  border-bottom: 2px solid var(--border);
}

.settings-header h2 {
  font-family: var(--font-heading);
  color: var(--ink);
  font-size: 1.75rem;
}

.close-settings {
  background: none;
  border: none;
  font-size: 2rem;
  width: 40px;
  height: 40px;
  cursor: pointer;
  color: var(--ink-soft);
  transition: color var(--transition-fast);
  border-radius: var(--radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
}

.close-settings:hover {
  color: var(--pooh-red);
  background: var(--bg-soft);
}

/* Settings Sections */
.settings-section {
  margin-bottom: var(--space-2xl);
}

.settings-section h3 {
  font-family: var(--font-heading);
  color: var(--ink);
  font-size: 1.25rem;
  margin-bottom: var(--space-lg);
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.setting-option {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-md) 0;
  border-bottom: 1px solid var(--border-soft);
}

.setting-label {
  flex: 1;
}

.setting-label span {
  display: block;
  font-weight: 600;
  color: var(--ink);
  margin-bottom: var(--space-xs);
}

.setting-label small {
  color: var(--ink-soft);
  font-size: 0.875rem;
}

/* Toggle Switch */
.toggle-switch {
  position: relative;
  display: inline-block;
  width: 52px;
  height: 28px;
}

.toggle-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--border-soft);
  transition: var(--transition-base);
  border-radius: var(--radius-full);
}

.toggle-slider:before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: var(--transition-base);
  border-radius: 50%;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

input:checked + .toggle-slider {
  background-color: var(--honey);
}

input:checked + .toggle-slider:before {
  transform: translateX(24px);
}

/* Theme Options */
.theme-options {
  display: flex;
  gap: var(--space-sm);
}

.theme-option {
  flex: 1;
  padding: var(--space-md);
  border: 2px solid var(--border);
  border-radius: var(--radius-md);
  text-align: center;
  cursor: pointer;
  transition: all var(--transition-base);
  background: var(--bg-soft);
}

.theme-option.active {
  border-color: var(--honey);
  background: var(--honey);
  color: white;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px var(--honey-glow);
}

.theme-option:hover:not(.active) {
  border-color: var(--honey-light);
  transform: translateY(-1px);
}

/* Range Sliders */
.setting-range-row {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  width: 100%;
  max-width: 300px;
}

.setting-range {
  flex: 1;
  height: 6px;
  -webkit-appearance: none;
  appearance: none;
  background: linear-gradient(to right, var(--border-soft), var(--honey));
  border-radius: var(--radius-full);
  outline: none;
}

.setting-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--honey);
  cursor: pointer;
  border: 3px solid white;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

.setting-range::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--honey);
  cursor: pointer;
  border: 3px solid white;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

.setting-range-value {
  min-width: 60px;
  text-align: center;
  font-weight: 600;
  color: var(--ink);
}

/* Settings Actions */
.settings-actions {
  display: flex;
  gap: var(--space-md);
  margin-top: var(--space-2xl);
  padding-top: var(--space-xl);
  border-top: 2px solid var(--border);
}

.settings-btn {
  flex: 1;
  padding: var(--space-md) var(--space-lg);
  border: none;
  border-radius: var(--radius-md);
  font-family: var(--font-body);
  font-weight: 600;
  font-size: 1rem;
  cursor: pointer;
  transition: all var(--transition-base);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-sm);
}

.settings-btn.primary {
  background: linear-gradient(135deg, var(--honey), var(--honey-dark));
  color: white;
}

.settings-btn.primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px var(--honey-glow);
}

.settings-btn.secondary {
  background: var(--bg-soft);
  color: var(--ink);
  border: 2px solid var(--border);
}

.settings-btn.secondary:hover {
  background: var(--border-soft);
  transform: translateY(-2px);
}

/* Hero Header */
.masthead-hero {
  position: relative;
  padding-top: var(--space-3xl);
  padding-bottom: var(--space-3xl);
  overflow: hidden;
}

.hero-banner {
  position: relative;
  margin: 0 auto var(--space-3xl);
  max-width: 1200px;
  border-radius: var(--radius-xl);
  overflow: hidden;
  box-shadow: var(--shadow-lg);
  border: 3px solid var(--honey);
}

.hero-image-container {
  position: relative;
  height: 400px;
  background: linear-gradient(45deg, var(--honey-light), var(--sage), var(--sky));
  display: flex;
  align-items: center;
  justify-content: center;
}

.hero-banner__img {
  max-height: 100%;
  max-width: 100%;
  object-fit: contain;
  filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.2));
  animation: floatGently 6s ease-in-out infinite;
}

@keyframes floatGently {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-10px) rotate(0.5deg); }
}

.hero-corner-decoration {
  position: absolute;
  font-size: 2.5rem;
  opacity: 0.7;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
  animation: pulse 4s ease-in-out infinite;
}

.top-left { top: 20px; left: 20px; animation-delay: 0s; }
.top-right { top: 20px; right: 20px; animation-delay: -1s; }
.bottom-left { bottom: 20px; left: 20px; animation-delay: -2s; }
.bottom-right { bottom: 20px; right: 20px; animation-delay: -3s; }

@keyframes pulse {
  0%, 100% { opacity: 0.7; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.1); }
}

.hero-title-container {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: var(--space-2xl);
  background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
  display: flex;
  align-items: flex-end;
  justify-content: center;
}

.title-background {
  background: rgba(255, 255, 255, 0.95);
  padding: var(--space-xl) var(--space-2xl);
  border-radius: var(--radius-lg);
  text-align: center;
  box-shadow: var(--shadow);
  border: 2px solid var(--honey);
  transform: translateY(50%);
  animation: slideInUp var(--transition-slow);
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(100%);
  }
  to {
    opacity: 1;
    transform: translateY(50%);
  }
}

.masthead-title {
  font-family: var(--font-heading);
  font-size: clamp(2rem, 5vw, 3.5rem);
  line-height: 1.1;
  margin-bottom: var(--space-sm);
}

.title-line--primary {
  color: var(--honey-dark);
  display: block;
  text-shadow: 2px 2px 0 var(--honey-light);
}

.title-line--secondary {
  color: var(--pooh-red);
  display: block;
  font-size: clamp(1.5rem, 4vw, 2.5rem);
}

.title-underline {
  display: flex;
  justify-content: center;
  gap: var(--space-sm);
  margin: var(--space-md) 0;
}

.underline-dot {
  color: var(--honey);
  font-size: 1.5rem;
  animation: bounce 1.5s infinite;
}

.underline-dot:nth-child(2) { animation-delay: 0.2s; }
.underline-dot:nth-child(3) { animation-delay: 0.4s; }

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

.hero-subtitle {
  font-size: 1.125rem;
  color: var(--ink-soft);
  font-style: italic;
}

/* Hero Decorations */
.hero-sparkles {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
}

.hero-bunting {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  padding: var(--space-lg);
  display: flex;
  justify-content: space-around;
  font-size: 2rem;
  opacity: 0.7;
  animation: wave 3s ease-in-out infinite;
}

@keyframes wave {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.hero-sheen {
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    45deg,
    transparent 30%,
    rgba(255, 255, 255, 0.1) 50%,
    transparent 70%
  );
  animation: shine 3s infinite;
  pointer-events: none;
}

@keyframes shine {
  0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
  100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
}

/* Hero Panel */
.masthead-hero-inner {
  max-width: 800px;
  margin: 0 auto;
}

.hero-panel {
  background: var(--card-bg);
  border-radius: var(--radius-xl);
  padding: var(--space-2xl);
  box-shadow: var(--shadow);
  border: 2px solid var(--border);
  position: relative;
  z-index: 2;
}

.hero-badge {
  background: linear-gradient(135deg, var(--honey-light), var(--pooh-red-light));
  border-radius: var(--radius-lg);
  padding: var(--space-xl);
  margin-bottom: var(--space-2xl);
  color: white;
  text-align: center;
  position: relative;
  overflow: hidden;
  box-shadow: 0 10px 30px rgba(244, 185, 68, 0.3);
}

.hero-badge::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255,255,255,0.1) 1%, transparent 1%);
  background-size: 20px 20px;
  animation: sparkle 4s linear infinite;
}

@keyframes sparkle {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.badge-icon {
  width: 80px;
  height: 80px;
  background: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto var(--space-md);
  font-size: 2.5rem;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
  animation: bounceRotate 2s infinite;
}

@keyframes bounceRotate {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  25% { transform: translateY(-10px) rotate(5deg); }
  75% { transform: translateY(-5px) rotate(-5deg); }
}

.badge-eyebrow {
  font-size: 0.875rem;
  opacity: 0.9;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: var(--space-xs);
}

.badge-label {
  font-family: var(--font-heading);
  font-size: 1.5rem;
  font-weight: bold;
  margin-bottom: var(--space-xs);
}

.badge-title {
  font-size: 1.125rem;
  opacity: 0.95;
}

.badge-meta {
  display: flex;
  justify-content: center;
  gap: var(--space-md);
  margin-top: var(--space-lg);
  flex-wrap: wrap;
}

.badge-pill {
  background: rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: var(--radius-full);
  padding: var(--space-sm) var(--space-lg);
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  backdrop-filter: blur(4px);
}

/* Hero Details */
.hero-details-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--space-lg);
  margin-bottom: var(--space-2xl);
}

.hero-detail {
  background: var(--bg-soft);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  display: flex;
  align-items: center;
  gap: var(--space-md);
  transition: all var(--transition-base);
  border: 1px solid transparent;
}

.hero-detail:hover {
  transform: translateY(-4px);
  border-color: var(--honey);
  box-shadow: 0 8px 20px var(--honey-glow);
}

.detail-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.detail-title {
  font-family: var(--font-heading);
  color: var(--ink);
  font-size: 1.125rem;
  margin-bottom: var(--space-xs);
}

.detail-text {
  color: var(--ink-soft);
  font-size: 0.875rem;
}

/* Hero Actions */
.hero-actions {
  display: flex;
  gap: var(--space-md);
  margin-bottom: var(--space-2xl);
  flex-wrap: wrap;
  justify-content: center;
}

.hero-action-btn {
  flex: 1;
  min-width: 200px;
  padding: var(--space-lg) var(--space-xl);
  border: none;
  border-radius: var(--radius-md);
  font-family: var(--font-body);
  font-weight: 600;
  font-size: 1.125rem;
  cursor: pointer;
  transition: all var(--transition-bounce);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-sm);
  text-decoration: none;
}

.hero-action-btn.primary {
  background: linear-gradient(135deg, var(--honey), var(--honey-dark));
  color: white;
  box-shadow: 0 6px 20px rgba(244, 185, 68, 0.4);
}

.hero-action-btn.primary:hover {
  transform: translateY(-4px) scale(1.05);
  box-shadow: 0 12px 30px rgba(244, 185, 68, 0.6);
}

.hero-action-btn.secondary {
  background: var(--pooh-red);
  color: white;
  box-shadow: 0 6px 20px rgba(230, 46, 46, 0.4);
}

.hero-action-btn.secondary:hover {
  transform: translateY(-4px) scale(1.05);
  box-shadow: 0 12px 30px rgba(230, 46, 46, 0.6);
}

.hero-action-btn.ghost {
  background: transparent;
  color: var(--ink);
  border: 2px solid var(--border);
}

.hero-action-btn.ghost:hover {
  background: var(--bg-soft);
  transform: translateY(-4px);
  border-color: var(--honey);
}

.orientation-hint {
  background: linear-gradient(135deg, var(--sky), var(--accent-blue));
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  color: white;
  display: flex;
  align-items: center;
  gap: var(--space-lg);
  animation: pulseSoft 2s infinite;
}

@keyframes pulseSoft {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.9; }
}

.hint-icon {
  font-size: 2rem;
  flex-shrink: 0;
}

.hint-text {
  font-size: 0.875rem;
  opacity: 0.95;
}

/* Storybook Container */
.book-container {
  max-width: 1000px;
  margin: 0 auto;
  padding: 0 var(--content-padding) var(--space-3xl);
}

/* Chapter Navigation */
.chapter-tracker {
  background: var(--card-bg);
  border-radius: var(--radius-xl);
  padding: var(--space-xl);
  margin-bottom: var(--space-2xl);
  box-shadow: var(--shadow);
  border: 2px solid var(--border);
  position: sticky;
  top: var(--space-lg);
  z-index: 100;
}

.tracker-row {
  display: flex;
  align-items: center;
  gap: var(--space-lg);
  margin-bottom: var(--space-lg);
}

.tracker-label {
  font-family: var(--font-heading);
  color: var(--ink);
  font-weight: 600;
  white-space: nowrap;
}

.book-progress {
  flex: 1;
  height: 8px;
  background: var(--bg-soft);
  border-radius: var(--radius-full);
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--honey), var(--pooh-red));
  border-radius: var(--radius-full);
  transition: width var(--transition-base);
  width: 25%;
}

.chapter-pill-row {
  display: flex;
  gap: var(--space-sm);
  flex-wrap: wrap;
}

.chapter-pill {
  flex: 1;
  min-width: 120px;
  padding: var(--space-md);
  background: var(--bg-soft);
  border: 2px solid var(--border);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-base);
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  position: relative;
  overflow: hidden;
}

.chapter-pill:hover {
  transform: translateY(-2px);
  border-color: var(--honey-light);
  box-shadow: 0 4px 12px rgba(244, 185, 68, 0.2);
}

.chapter-pill.active {
  background: linear-gradient(135deg, var(--honey-light), var(--honey));
  border-color: var(--honey-dark);
  color: white;
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(244, 185, 68, 0.4);
}

.chapter-pill.sparkle::after {
  content: '‚ú®';
  position: absolute;
  top: -10px;
  right: -10px;
  font-size: 1rem;
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.chapter-pill:hover.sparkle::after {
  opacity: 1;
}

.pill-number {
  width: 32px;
  height: 32px;
  background: var(--card-bg);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 0.875rem;
  flex-shrink: 0;
  transition: all var(--transition-base);
}

.chapter-pill.active .pill-number {
  background: white;
  color: var(--honey-dark);
  transform: scale(1.1);
}

.pill-title {
  font-weight: 600;
  font-size: 0.875rem;
  display: block;
}

.pill-detail {
  font-size: 0.75rem;
  opacity: 0.8;
  display: block;
  margin-top: 2px;
}

/* Story Pages */
.book {
  position: relative;
}

.pages-wrapper {
  position: relative;
  min-height: 600px;
}

.page {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  opacity: 0;
  visibility: hidden;
  transform: translateX(20px);
  transition: all var(--transition-base);
}

.page.active {
  position: relative;
  opacity: 1;
  visibility: visible;
  transform: translateX(0);
  z-index: 10;
}

.page-content {
  background: var(--card-bg);
  border-radius: var(--radius-xl);
  padding: var(--space-2xl);
  box-shadow: var(--shadow);
  border: 2px solid var(--border);
}

/* Chapter Header */
.chapter-header {
  text-align: center;
  margin-bottom: var(--space-2xl);
  padding-bottom: var(--space-lg);
  border-bottom: 3px solid var(--honey);
  position: relative;
}

.chapter-number {
  font-family: var(--font-heading);
  color: var(--honey);
  font-size: 1.125rem;
  text-transform: uppercase;
  letter-spacing: 3px;
  margin-bottom: var(--space-sm);
}

.chapter-title {
  font-family: var(--font-heading);
  color: var(--ink);
  font-size: clamp(2rem, 4vw, 2.5rem);
  line-height: 1.2;
  margin-bottom: var(--space-sm);
}

.chapter-subtitle {
  color: var(--ink-soft);
  font-size: 1.125rem;
  font-style: italic;
}

.honey-drip {
  display: block;
  width: 60px;
  height: 30px;
  background: linear-gradient(to bottom, var(--honey), var(--honey-dark));
  clip-path: polygon(0 0, 100% 0, 80% 100%, 20% 100%);
  margin: var(--space-md) auto 0;
  opacity: 0.8;
}

/* Story Content */
.story-text {
  font-size: 1.125rem;
  line-height: 1.8;
  margin-bottom: var(--space-lg);
  color: var(--ink);
}

.story-text:first-child::first-letter {
  font-family: var(--font-heading);
  font-size: 3em;
  float: left;
  line-height: 1;
  margin-right: 8px;
  color: var(--honey);
  text-shadow: 2px 2px 0 var(--honey-light);
}

.chapter-illustrations {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--space-xl);
  margin: var(--space-2xl) 0;
}

.storybook-figure {
  text-align: center;
  padding: var(--space-lg);
  border-radius: var(--radius-lg);
  background: var(--bg-soft);
  transition: all var(--transition-base);
  position: relative;
  overflow: hidden;
  border: 2px solid transparent;
}

.storybook-figure:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow);
}

.storybook-figure.clickable-character:hover {
  border-color: var(--honey);
  cursor: pointer;
}
.figure-theme-honey {
background: linear-gradient(135deg, rgba(244, 185, 68, 0.1), rgba(217, 119, 6, 0.05));
}

.figure-theme-sky {
background: linear-gradient(135deg, rgba(125, 211, 252, 0.1), rgba(56, 189, 248, 0.05));
}

.figure-theme-forest {
background: linear-gradient(135deg, rgba(157, 193, 131, 0.1), rgba(77, 124, 15, 0.05));
}

.storybook-figure img {
width: 96px;
height: 96px;
margin: 0 auto var(--space-md);
filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
transition: transform var(--transition-base);
}

.clickable-character:hover img {
transform: scale(1.1) rotate(5deg);
}

.figure-copy {
text-align: center;
}

.figure-name {
font-family: var(--font-heading);
font-weight: 600;
color: var(--ink);
margin-bottom: var(--space-xs);
font-size: 0.875rem;
}

.figure-note {
color: var(--ink-soft);
font-size: 0.75rem;
line-height: 1.4;
font-style: italic;
}

.character-message {
position: absolute;
bottom: 0;
left: 0;
right: 0;
padding: var(--space-sm);
background: var(--honey);
color: white;
font-size: 0.75rem;
border-radius: 0 0 var(--radius-md) var(--radius-md);
transform: translateY(100%);
transition: transform var(--transition-base);
}

.clickable-character:hover .character-message {
transform: translateY(0);
}

/* Divider */
.divider {
display: flex;
justify-content: center;
align-items: center;
gap: var(--space-sm);
margin: var(--space-2xl) 0;
font-size: 1.5rem;
color: var(--honey);
opacity: 0.6;
text-align: center;
}

/* Game Styles */
#honey-game {
position: relative;
}

.game-inline-container {
position: relative;
background: linear-gradient(180deg, var(--sky) 30%, var(--sage) 70%, var(--dirt) 100%);
border-radius: var(--radius-xl);
overflow: hidden;
min-height: 600px;
margin: var(--space-2xl) 0;
border: 3px solid var(--honey-dark);
box-shadow: var(--shadow-lg);
}

.game-settings-button {
position: absolute;
top: var(--space-md);
right: var(--space-md);
z-index: 20;
}

.game-bg-horizon {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 40%;
background: linear-gradient(180deg, #87CEEB 0%, #7dd3fc 100%);
}

.game-bg-ground {
position: absolute;
bottom: 0;
left: 0;
width: 100%;
height: 60%;
background: linear-gradient(180deg, var(--sage) 0%, var(--dirt) 100%);
}

/* Game Canvas */
#gameCanvas {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
z-index: 10;
}

/* Game Overlays */
.game-start-overlay,
.game-overlay {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.7);
backdrop-filter: blur(4px);
display: flex;
align-items: center;
justify-content: center;
z-index: 15;
animation: fadeIn var(--transition-base);
}

.game-start-card,
.game-overlay-card {
background: var(--card-bg);
border-radius: var(--radius-xl);
padding: var(--space-2xl);
max-width: 400px;
width: 90%;
text-align: center;
border: 3px solid var(--honey);
box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
animation: scaleIn var(--transition-bounce);
}

@keyframes scaleIn {
from {
opacity: 0;
transform: scale(0.8);
}
to {
opacity: 1;
transform: scale(1);
}
}

.game-start-title {
font-family: var(--font-heading);
color: var(--ink);
font-size: 2rem;
margin-bottom: var(--space-sm);
}

.game-start-subtitle {
color: var(--ink-soft);
margin-bottom: var(--space-xl);
}

/* Game HUD */
.game-hud {
position: absolute;
top: 0;
left: 0;
width: 100%;
padding: var(--space-lg);
display: flex;
justify-content: space-between;
gap: var(--space-md);
z-index: 12;
background: linear-gradient(to bottom, rgba(0, 0, 0, 0.4), transparent);
backdrop-filter: blur(4px);
opacity: 0;
transition: opacity var(--transition-base);
}

.game-hud.visible {
opacity: 1;
}

.game-hud-item {
background: rgba(0, 0, 0, 0.6);
border-radius: var(--radius-md);
padding: var(--space-sm) var(--space-md);
min-width: 80px;
text-align: center;
backdrop-filter: blur(8px);
border: 1px solid rgba(255, 255, 255, 0.1);
}

.game-hud-label {
display: block;
color: rgba(255, 255, 255, 0.8);
font-size: 0.75rem;
text-transform: uppercase;
letter-spacing: 1px;
margin-bottom: 2px;
}

.game-hud-value {
display: block;
color: white;
font-size: 1.25rem;
font-weight: bold;
font-family: monospace;
text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

.streak-badge {
display: none;
background: var(--accent-gold);
color: var(--ink);
padding: 2px 8px;
border-radius: var(--radius-full);
font-size: 0.75rem;
font-weight: bold;
margin-top: 2px;
animation: pulse 1s infinite;
}

.streak-badge.visible {
display: inline-block;
}

@keyframes pulse {
0%, 100% { opacity: 1; }
50% { opacity: 0.7; }
}

/* Game Over Stats */
.game-over-stats {
margin: var(--space-xl) 0;
text-align: center;
}

.game-over-label {
color: var(--ink-soft);
font-size: 0.875rem;
text-transform: uppercase;
letter-spacing: 2px;
margin-bottom: var(--space-sm);
}

.game-over-score {
font-size: 3rem;
font-weight: bold;
color: var(--honey);
text-shadow: 2px 2px 0 var(--honey-dark);
margin-bottom: var(--space-sm);
}

.game-over-best {
color: var(--ink-soft);
font-size: 1rem;
}

/* Mobile Controls */
.mobile-controls {
position: absolute;
bottom: var(--space-lg);
left: 0;
width: 100%;
display: flex;
justify-content: space-between;
padding: 0 var(--space-lg);
z-index: 12;
opacity: 0;
transition: opacity var(--transition-base);
display: none;
}

.mobile-controls.visible {
opacity: 1;
display: flex;
}

.mobile-control-btn {
width: 64px;
height: 64px;
border-radius: 50%;
background: rgba(0, 0, 0, 0.6);
border: 2px solid rgba(255, 255, 255, 0.2);
color: white;
font-size: 1.5rem;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
backdrop-filter: blur(8px);
transition: all var(--transition-base);
touch-action: manipulation;
}

.mobile-control-btn:active {
transform: scale(0.95);
background: var(--honey);
}

.mobile-control-pause {
background: rgba(230, 46, 46, 0.6);
}

/* Game Critique */
.game-critique {
background: linear-gradient(135deg, var(--bg-soft), var(--card-bg));
border-radius: var(--radius-lg);
padding: var(--space-xl);
margin: var(--space-xl) 0;
border-left: 4px solid var(--honey);
box-shadow: var(--shadow);
}

.critique-header {
margin-bottom: var(--space-lg);
}

.critique-kicker {
display: inline-block;
background: var(--honey);
color: white;
padding: 4px 12px;
border-radius: var(--radius-full);
font-size: 0.75rem;
font-weight: 600;
text-transform: uppercase;
letter-spacing: 1px;
margin-bottom: var(--space-sm);
}

.critique-summary {
font-size: 1.125rem;
color: var(--ink);
font-weight: 600;
}

.critique-list {
list-style: none;
padding: 0;
}

.critique-list li {
padding-left: var(--space-lg);
position: relative;
margin-bottom: var(--space-sm);
color: var(--ink-soft);
}

.critique-list li::before {
content: 'üçØ';
position: absolute;
left: 0;
top: 2px;
}

/* Game Description & Tips */
.game-description {
background: var(--card-bg);
border-radius: var(--radius-lg);
padding: var(--space-xl);
margin: var(--space-xl) 0;
border: 2px solid var(--border);
}

.game-description h3 {
font-family: var(--font-heading);
color: var(--ink);
font-size: 1.5rem;
margin-bottom: var(--space-lg);
display: flex;
align-items: center;
gap: var(--space-sm);
}

.game-description h3::before {
content: 'üéÆ';
}

.game-tips {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: var(--space-lg);
margin-top: var(--space-xl);
}

.tip {
background: var(--bg-soft);
border-radius: var(--radius-md);
padding: var(--space-lg);
border: 1px solid var(--border);
transition: transform var(--transition-base);
}

.tip:hover {
transform: translateY(-4px);
border-color: var(--honey);
}

.tip-icon {
font-size: 2rem;
display: block;
margin-bottom: var(--space-sm);
}

.tip p {
color: var(--ink);
font-size: 0.875rem;
line-height: 1.5;
}

/* Chapter 3 - Gifts & Wishes */
.dialogue-bubble {
background: var(--bg-soft);
border-radius: var(--radius-lg);
padding: var(--space-lg);
margin: var(--space-xl) 0;
position: relative;
border: 2px solid var(--border);
box-shadow: var(--shadow);
}

.dialogue-piglet {
border-left-color: var(--accent-pink);
background: linear-gradient(135deg, rgba(244, 114, 182, 0.1), transparent);
}

.dialogue-pooh {
border-left-color: var(--honey);
background: linear-gradient(135deg, rgba(244, 185, 68, 0.1), transparent);
}

.bubble-arrow {
position: absolute;
top: -10px;
left: 30px;
width: 20px;
height: 20px;
background: var(--bg-soft);
transform: rotate(45deg);
border-left: 2px solid var(--border);
border-top: 2px solid var(--border);
}

.speaker {
display: block;
text-align: right;
font-style: italic;
color: var(--ink-soft);
margin-top: var(--space-sm);
font-size: 0.875rem;
}

/* Registry Container */
.registry-container {
background: linear-gradient(135deg, var(--bg-soft), var(--card-bg));
border-radius: var(--radius-xl);
padding: var(--space-2xl);
margin: var(--space-2xl) 0;
border: 3px solid var(--honey);
box-shadow: var(--shadow-lg);
}

.registry-section {
text-align: center;
}

.registry-header {
display: flex;
align-items: center;
justify-content: center;
gap: var(--space-lg);
margin-bottom: var(--space-2xl);
}

.registry-icon {
font-size: 3rem;
animation: bounce 2s infinite;
}

.registry-subtitle {
color: var(--ink-soft);
margin-top: var(--space-sm);
max-width: 600px;
margin-left: auto;
margin-right: auto;
}

.registry-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: var(--space-lg);
margin: var(--space-xl) 0;
}

.registry-card {
background: var(--card-bg);
border-radius: var(--radius-lg);
padding: var(--space-xl);
text-decoration: none;
color: inherit;
border: 2px solid var(--border);
transition: all var(--transition-bounce);
display: block;
}

.registry-card:hover {
transform: translateY(-8px);
border-color: var(--honey);
box-shadow: 0 12px 30px rgba(244, 185, 68, 0.3);
}

.gift-idea-card {
background: linear-gradient(135deg, rgba(157, 193, 131, 0.1), rgba(244, 185, 68, 0.1));
}

.card-icon {
font-size: 2.5rem;
margin-bottom: var(--space-md);
}

.registry-card h4 {
font-family: var(--font-heading);
color: var(--ink);
margin-bottom: var(--space-sm);
font-size: 1.25rem;
}

.registry-card p {
color: var(--ink-soft);
font-size: 0.875rem;
margin-bottom: var(--space-md);
}

.card-link {
color: var(--honey);
font-weight: 600;
font-size: 0.875rem;
display: inline-flex;
align-items: center;
gap: var(--space-xs);
transition: gap var(--transition-fast);
}

.registry-card:hover .card-link {
gap: var(--space-md);
}

.gift-ideas {
list-style: none;
padding: 0;
text-align: left;
}

.gift-ideas li {
padding: var(--space-xs) 0;
color: var(--ink-soft);
font-size: 0.875rem;
position: relative;
padding-left: var(--space-lg);
}

.gift-ideas li::before {
content: 'üêª';
position: absolute;
left: 0;
top: var(--space-xs);
}

/* Nursery Details */
.nursery-details {
background: linear-gradient(135deg, rgba(125, 211, 252, 0.1), rgba(244, 185, 68, 0.1));
border-radius: var(--radius-xl);
padding: var(--space-2xl);
margin: var(--space-2xl) 0;
}

.nursery-details h3 {
font-family: var(--font-heading);
color: var(--ink);
font-size: 1.5rem;
margin-bottom: var(--space-xl);
text-align: center;
display: flex;
align-items: center;
justify-content: center;
gap: var(--space-sm);
}

.details-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: var(--space-lg);
}

.detail-card {
background: var(--card-bg);
border-radius: var(--radius-lg);
padding: var(--space-lg);
text-align: center;
border: 1px solid var(--border);
transition: all var(--transition-base);
}

.detail-card:hover {
transform: translateY(-4px);
border-color: var(--honey);
box-shadow: 0 8px 20px rgba(244, 185, 68, 0.2);
}

.detail-icon {
font-size: 2rem;
margin-bottom: var(--space-sm);
}

.detail-card h4 {
font-family: var(--font-heading);
color: var(--ink);
font-size: 1rem;
margin-bottom: var(--space-xs);
}

.detail-card p {
color: var(--ink);
font-size: 0.875rem;
margin-bottom: var(--space-xs);
}

.detail-card small {
color: var(--ink-soft);
font-size: 0.75rem;
}

/* Wishes Section */
.wishes-section {
margin: var(--space-2xl) 0;
}

.wishes-header {
text-align: center;
margin-bottom: var(--space-2xl);
}

.wishes-header h3 {
font-family: var(--font-heading);
color: var(--ink);
font-size: 2rem;
margin-bottom: var(--space-sm);
}

.wishes-form-container {
background: var(--card-bg);
border-radius: var(--radius-xl);
padding: var(--space-2xl);
box-shadow: var(--shadow);
border: 2px solid var(--border);
margin-bottom: var(--space-2xl);
}

.enhanced-form {
max-width: 600px;
margin: 0 auto;
}

.form-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: var(--space-lg);
margin-bottom: var(--space-lg);
}

.form-field {
margin-bottom: var(--space-lg);
}

.form-field label {
display: block;
color: var(--ink);
font-weight: 600;
margin-bottom: var(--space-sm);
font-size: 0.875rem;
}

.form-field input,
.form-field select,
.form-field textarea {
width: 100%;
padding: var(--space-md);
border: 2px solid var(--border);
border-radius: var(--radius-md);
background: var(--bg-soft);
color: var(--ink);
font-family: var(--font-body);
font-size: 1rem;
transition: all var(--transition-fast);
}

.form-field input:focus,
.form-field select:focus,
.form-field textarea:focus {
outline: none;
border-color: var(--honey);
box-shadow: 0 0 0 3px var(--honey-glow);
}

.form-field textarea {
resize: vertical;
min-height: 120px;
}

.character-count {
text-align: right;
color: var(--ink-soft);
font-size: 0.75rem;
margin-top: var(--space-xs);
}

.form-actions {
text-align: center;
}

.submit-btn {
background: linear-gradient(135deg, var(--honey), var(--honey-dark));
color: white;
border: none;
border-radius: var(--radius-md);
padding: var(--space-lg) var(--space-2xl);
font-family: var(--font-body);
font-size: 1.125rem;
font-weight: 600;
cursor: pointer;
transition: all var(--transition-bounce);
display: inline-flex;
align-items: center;
gap: var(--space-sm);
}

.submit-btn:hover {
transform: translateY(-4px) scale(1.05);
box-shadow: 0 12px 30px rgba(244, 185, 68, 0.6);
}

.form-feedback {
margin-top: var(--space-lg);
padding: var(--space-md);
border-radius: var(--radius-md);
text-align: center;
font-weight: 600;
animation: slideIn var(--transition-fast);
}

@keyframes slideIn {
from {
opacity: 0;
transform: translateY(-10px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

/* Sample Wishes */
.sample-wishes {
background: linear-gradient(135deg, rgba(157, 193, 131, 0.1), transparent);
border-radius: var(--radius-xl);
padding: var(--space-xl);
margin-top: var(--space-xl);
}

.sample-wishes h4 {
font-family: var(--font-heading);
color: var(--ink);
font-size: 1.25rem;
margin-bottom: var(--space-lg);
text-align: center;
}

.wish-examples {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: var(--space-lg);
}

.wish-example {
background: var(--card-bg);
border-radius: var(--radius-lg);
padding: var(--space-lg);
border-left: 4px solid var(--honey);
font-style: italic;
color: var(--ink);
position: relative;
}

.wish-example::before {
content: '"';
position: absolute;
top: -10px;
left: 10px;
font-size: 4rem;
color: var(--honey-light);
opacity: 0.3;
font-family: var(--font-heading);
}

.wish-example cite {
display: block;
text-align: right;
color: var(--ink-soft);
font-style: normal;
font-size: 0.875rem;
margin-top: var(--space-sm);
}

/* Wishes Display */
.wishes-display {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: var(--space-lg);
margin: var(--space-2xl) 0;
}

/* Welcome Panel */
.welcome-panel {
background: linear-gradient(135deg, var(--honey-light), var(--accent-gold));
border-radius: var(--radius-xl);
padding: var(--space-2xl);
text-align: center;
color: white;
margin: var(--space-2xl) 0;
box-shadow: 0 20px 60px rgba(244, 185, 68, 0.4);
position: relative;
overflow: hidden;
}

.welcome-panel::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
height: 4px;
background: linear-gradient(90deg, transparent, white, transparent);
animation: shimmer 3s infinite;
}

@keyframes shimmer {
0% { transform: translateX(-100%); }
100% { transform: translateX(100%); }
}

.welcome-icon {
font-size: 3rem;
margin-bottom: var(--space-lg);
display: block;
animation: bounce 2s infinite;
}

.welcome-heading {
font-family: var(--font-heading);
font-size: 2rem;
margin-bottom: var(--space-sm);
text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.2);
}

.welcome-subtitle {
font-size: 1.125rem;
opacity: 0.95;
}

/* Countdown */
.countdown-section {
background: linear-gradient(135deg, rgba(77, 124, 15, 0.1), rgba(244, 185, 68, 0.1));
border-radius: var(--radius-xl);
padding: var(--space-2xl);
text-align: center;
margin: var(--space-2xl) 0;
}

.countdown-section h3 {
font-family: var(--font-heading);
color: var(--ink);
font-size: 1.5rem;
margin-bottom: var(--space-xl);
}

.countdown-display {
display: flex;
justify-content: center;
gap: var(--space-xl);
margin: var(--space-xl) 0;
}

.countdown-item {
background: var(--card-bg);
border-radius: var(--radius-lg);
padding: var(--space-lg);
min-width: 100px;
box-shadow: var(--shadow);
border: 2px solid var(--border);
}

.countdown-number {
display: block;
font-size: 2.5rem;
font-weight: bold;
color: var(--honey);
font-family: monospace;
margin-bottom: var(--space-xs);
text-shadow: 2px 2px 0 var(--honey-light);
}

.countdown-label {
display: block;
color: var(--ink-soft);
font-size: 0.875rem;
text-transform: uppercase;
letter-spacing: 2px;
}

.countdown-note {
color: var(--ink-soft);
font-size: 0.875rem;
margin-top: var(--space-lg);
}

/* Honey Jar Interactive */
.honey-jar-interactive {
background: linear-gradient(135deg, rgba(244, 185, 68, 0.1), rgba(184, 134, 11, 0.1));
border-radius: var(--radius-xl);
padding: var(--space-2xl);
text-align: center;
margin: var(--space-2xl) 0;
border: 2px dashed var(--honey);
}

.honey-jar-interactive div {
font-size: 3rem;
margin-bottom: var(--space-lg);
animation: floatGently 4s ease-in-out infinite;
}

.honey-jar-interactive h3 {
font-family: var(--font-heading);
color: var(--ink);
font-size: 1.5rem;
margin-bottom: var(--space-sm);
}

.honey-jar-interactive p {
color: var(--ink-soft);
margin-bottom: var(--space-xl);
max-width: 600px;
margin-left: auto;
margin-right: auto;
}

.btn {
background: var(--honey);
color: white;
border: none;
border-radius: var(--radius-md);
padding: var(--space-md) var(--space-xl);
font-family: var(--font-body);
font-size: 1rem;
font-weight: 600;
cursor: pointer;
transition: all var(--transition-base);
display: inline-flex;
align-items: center;
gap: var(--space-sm);
}

.btn:hover {
background: var(--honey-dark);
transform: translateY(-2px);
box-shadow: 0 8px 20px rgba(244, 185, 68, 0.4);
}

.btn.primary {
background: linear-gradient(135deg, var(--honey), var(--honey-dark));
}

/* Final Thought */
.final-thought {
background: var(--card-bg);
border-radius: var(--radius-xl);
padding: var(--space-2xl);
margin: var(--space-2xl) 0;
text-align: center;
border: 3px solid var(--honey);
position: relative;
overflow: hidden;
}

.final-thought::before {
content: '‚ùù';
position: absolute;
top: -10px;
left: 20px;
font-size: 8rem;
color: var(--honey-light);
opacity: 0.2;
font-family: var(--font-heading);
}

.final-thought blockquote {
font-family: var(--font-heading);
color: var(--ink);
font-size: 1.5rem;
line-height: 1.4;
margin-bottom: var(--space-lg);
font-style: italic;
}

.final-thought cite {
display: block;
color: var(--ink-soft);
font-size: 1rem;
margin-top: var(--space-sm);
font-style: normal;
}

.signature {
color: var(--honey-dark);
font-weight: 600;
font-size: 1.125rem;
margin-top: var(--space-xl);
padding-top: var(--space-lg);
border-top: 2px solid var(--border);
}

/* Chapter Navigation */
.chapter-nav {
display: flex;
justify-content: space-between;
align-items: center;
margin-top: var(--space-2xl);
padding: var(--space-xl);
background: var(--card-bg);
border-radius: var(--radius-xl);
box-shadow: var(--shadow);
border: 2px solid var(--border);
position: sticky;
bottom: var(--space-lg);
z-index: 100;
}

.chapter-nav-btn {
background: var(--bg-soft);
color: var(--ink);
border: 2px solid var(--border);
border-radius: var(--radius-md);
padding: var(--space-md) var(--space-lg);
font-family: var(--font-body);
font-size: 1rem;
font-weight: 600;
cursor: pointer;
transition: all var(--transition-base);
min-width: 120px;
display: flex;
align-items: center;
justify-content: center;
gap: var(--space-sm);
}

.chapter-nav-btn:hover {
background: var(--honey);
color: white;
border-color: var(--honey-dark);
transform: translateY(-2px);
}

.chapter-nav-btn.next {
flex-direction: row-reverse;
}

.chapter-indicator {
font-family: var(--font-heading);
color: var(--ink);
font-weight: 600;
font-size: 1.125rem;
}

/* Footer */
.site-footer {
text-align: center;
padding: var(--space-2xl) var(--content-padding);
margin-top: var(--space-3xl);
background: linear-gradient(180deg, transparent, var(--bg-soft));
border-top: 2px solid var(--border);
}

.site-footer p {
color: var(--ink-soft);
margin-bottom: var(--space-lg);
font-size: 1rem;
}

.footer-links {
display: flex;
justify-content: center;
gap: var(--space-lg);
flex-wrap: wrap;
}

.footer-link {
background: var(--bg-soft);
color: var(--ink);
border: 2px solid var(--border);
border-radius: var(--radius-md);
padding: var(--space-sm) var(--space-lg);
font-family: var(--font-body);
font-size: 0.875rem;
cursor: pointer;
transition: all var(--transition-base);
display: flex;
align-items: center;
gap: var(--space-sm);
}

.footer-link:hover {
background: var(--honey);
color: white;
border-color: var(--honey-dark);
transform: translateY(-2px);
}

/* Responsive Design */
@media (max-width: 768px) {
:root {
--content-padding: 1rem;
--space-xl: 1.5rem;
--space-2xl: 2rem;
--space-3xl: 3rem;
}

.masthead-hero {
padding-top: var(--space-xl);
}

.hero-banner {
margin-bottom: var(--space-xl);
}

.hero-image-container {
height: 300px;
}

.title-background {
padding: var(--space-lg);
transform: translateY(0);
}

@keyframes slideInUp {
from {
opacity: 0;
transform: translateY(20px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

.hero-actions {
flex-direction: column;
}

.hero-action-btn {
min-width: 100%;
}

.chapter-tracker {
padding: var(--space-lg);
position: static;
margin-bottom: var(--space-xl);
}

.tracker-row {
flex-direction: column;
gap: var(--space-md);
}

.chapter-pill-row {
flex-direction: column;
}

.chapter-pill {
min-width: 100%;
}

.game-hud {
flex-wrap: wrap;
justify-content: center;
}

.game-hud-item {
min-width: 70px;
}

.chapter-nav {
flex-direction: column;
gap: var(--space-md);
padding: var(--space-lg);
}

.chapter-nav-btn {
width: 100%;
}
}

@media (max-width: 480px) {
.settings-card {
padding: var(--space-lg);
}

.theme-options {
flex-direction: column;
}

.settings-actions {
flex-direction: column;
}

.hero-badge {
padding: var(--space-lg);
}

.badge-meta {
flex-direction: column;
align-items: center;
}

.chapter-illustrations {
grid-template-columns: 1fr;
}

.registry-grid {
grid-template-columns: 1fr;
}

.details-grid {
grid-template-columns: 1fr;
}

.wish-examples {
grid-template-columns: 1fr;
}

.countdown-display {
gap: var(--space-md);
}

.countdown-item {
min-width: 80px;
padding: var(--space-md);
}
}

/* Print Styles */
@media print {
.settings-panel,
.game-settings-button,
.mobile-controls,
.site-footer,
.orientation-hint,
.hero-bunting,
.hero-sheen,
.hero-sparkles,
.cloud-layer,
.enhanced-scene {
display: none !important;
}

body {
background: white !important;
color: black !important;
}

.page-content,
.chapter-header,
.registry-container,
.nursery-details,
.wishes-form-container,
.final-thought {
break-inside: avoid;
box-shadow: none !important;
border: 1px solid #ccc !important;
}

.hero-banner {
break-before: always;
}

.btn,
.hero-action-btn,
.chapter-nav-btn {
display: none !important;
}
}

/* Animation Control */
.no-animations * {
animation: none !important;
transition: none !important;
}

/* Hide Utility */
.hidden {
display: none !important;
}

/* Custom Scrollbar */
::-webkit-scrollbar {
width: 10px;
}

::-webkit-scrollbar-track {
background: var(--bg-soft);
}

::-webkit-scrollbar-thumb {
background: var(--honey);
border-radius: var(--radius-full);
}

::-webkit-scrollbar-thumb:hover {
background: var(--honey-dark);
}

</style>
</head>
<body>
<!-- Decorative Elements -->
<div aria-hidden="true" class="enhanced-scene" id="enhancedScene"></div>
<div aria-hidden="true" class="cloud-layer">
    <div class="cloud">‚òÅÔ∏è</div>
    <div class="cloud">‚òÅÔ∏è</div>
    <div class="cloud">‚òÅÔ∏è</div>
</div>

<!-- Settings Panel -->
<div class="settings-panel">
    <button class="settings-button" id="settingsButton" aria-label="Open settings">
        ‚öôÔ∏è
    </button>
</div>

<div class="settings-overlay" id="settingsOverlay">
    <div class="settings-card">
        <div class="settings-header">
            <h2>Game Settings</h2>
            <button class="close-settings" id="closeSettings" aria-label="Close settings">√ó</button>
        </div>

        <!-- Game Difficulty -->
        <section class="settings-section">
            <h3><span class="icon">üéÆ</span> Game Difficulty</h3>
            <div class="setting-option">
                <div class="setting-label">
                    <span>Difficulty Level</span>
                    <small>Adjusts jar speed, bee frequency, and time limit</small>
                </div>
                <select class="setting-select" id="difficultySelect">
                    <option value="easy">Easy</option>
                    <option value="medium" selected>Medium</option>
                    <option value="hard">Hard</option>
                    <option value="expert">Expert</option>
                </select>
            </div>
        </section>

        <!-- Sound & Music -->
        <section class="settings-section">
            <h3><span class="icon">üîä</span> Sound & Music</h3>
            <div class="setting-option">
                <div class="setting-label">
                    <span>Background Music</span>
                    <small>Play soothing Hundred Acre Wood music</small>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="musicToggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            <div class="setting-option">
                <div class="setting-label">
                    <span>Sound Effects</span>
                    <small>Honey catches, bee buzzes, and game sounds</small>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="sfxToggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            <div class="setting-option">
                <div class="setting-label">
                    <span>Volume Level</span>
                    <small>Adjust overall volume</small>
                </div>
                <div class="setting-range-row">
                    <input type="range" class="setting-range" id="volumeSlider" min="0" max="100" value="80">
                    <span class="setting-range-value" id="volumeValue">80%</span>
                </div>
            </div>
        </section>

        <!-- Visual Theme -->
        <section class="settings-section">
            <h3><span class="icon">üé®</span> Visual Theme</h3>
            <div class="theme-options">
                <div class="theme-option active" data-theme="light">
                    <span class="icon">‚òÄÔ∏è</span>
                    <span class="name">Light</span>
                </div>
                <div class="theme-option" data-theme="dark">
                    <span class="icon">üåô</span>
                    <span class="name">Dark</span>
                </div>
                <div class="theme-option" data-theme="auto">
                    <span class="icon">‚öôÔ∏è</span>
                    <span class="name">Auto</span>
                </div>
            </div>
        </section>

        <!-- Game Visuals -->
        <section class="settings-section">
            <h3><span class="icon">‚ú®</span> Visual Effects</h3>
            <div class="setting-option">
                <div class="setting-label">
                    <span>Particle Effects</span>
                    <small>Show honey sparkles and catch effects</small>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="particlesToggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            <div class="setting-option">
                <div class="setting-label">
                    <span>Animations</span>
                    <small>Page transitions and character animations</small>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="animationsToggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
            <div class="setting-option">
                <div class="setting-label">
                    <span>Control Sensitivity</span>
                    <small>Adjust bear movement speed</small>
                </div>
                <div class="setting-range-row">
                    <input type="range" class="setting-range" id="sensitivitySlider" min="50" max="400" value="260" step="10">
                    <span class="setting-range-value" id="sensitivityValue">260</span>
                </div>
            </div>
        </section>

        <!-- Game Controls -->
        <section class="settings-section">
            <h3><span class="icon">üéØ</span> Game Controls</h3>
            <div class="setting-option">
                <div class="setting-label">
                    <span>Vibration (Mobile)</span>
                    <small>Haptic feedback on mobile devices</small>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="vibrationToggle">
                    <span class="toggle-slider"></span>
                </label>
            </div>
            <div class="setting-option">
                <div class="setting-label">
                    <span>Show Mobile Controls</span>
                    <small>Display touch controls on mobile</small>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" id="mobileControlsToggle" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </section>

        <!-- Actions -->
        <div class="settings-actions">
            <button class="settings-btn secondary" id="resetSettingsBtn">
                <span>üîÅ</span> Reset to Defaults
            </button>
            <button class="settings-btn primary" id="applySettingsBtn">
                <span>üíæ</span> Apply Settings
            </button>
        </div>
    </div>
</div>

<!-- Hero Header -->
<header class="masthead-hero hero-enhancements">
    <!-- Hero Banner with Image and Title Overlay -->
    <div class="hero-banner">
        <div class="hero-image-container">
            <picture>
                <source sizes="80vw"
                        srcset="Images/Characters/Gunnar.png 800w, Images/Characters/Gunnar.png 1200w, Images/Characters/Gunnar.png 1600w">
                <img alt="Baby Gunnar with Hundred Acre Wood friends in the Hundred Acre Wood" class="hero-banner__img" height="900" loading="eager"
                     src="Images/Characters/Gunnar.png" width="800">
            </picture>
            <!-- Decorative corner elements -->
            <div aria-hidden="true" class="hero-corner-decoration top-left">üåø</div>
            <div aria-hidden="true" class="hero-corner-decoration top-right">üçØ</div>
            <div aria-hidden="true" class="hero-corner-decoration bottom-left">üíõ</div>
            <div aria-hidden="true" class="hero-corner-decoration bottom-right">üêù</div>
        </div>
        <!-- Title Container with Background -->
        <div class="hero-title-container">
            <div class="title-background">
                <h1 class="masthead-title">
                    <span class="title-line title-line--primary">Baby Gunnar's</span>
                    <span class="title-line title-line--secondary">Hundred Acre Wood Shower</span>
                </h1>
                <div aria-hidden="true" class="title-underline">
                    <span class="underline-dot">‚Ä¢</span>
                    <span class="underline-dot">‚Ä¢</span>
                    <span class="underline-dot">‚Ä¢</span>
                </div>
                <p class="hero-subtitle">A storybook celebration with Pooh & friends</p>
            </div>
        </div>
    </div>
    <!-- Decorative Elements -->
    <div aria-hidden="true" class="hero-sparkles" id="heroSparkles"></div>
    <div aria-hidden="true" class="hero-bunting">
        <span>‚ú®</span><span>üéà</span><span>üçØ</span><span>üíù</span><span>üß∏</span><span>üìñ</span><span>‚ú®</span>
    </div>
    <div aria-hidden="true" class="hero-sheen"></div>
    <!-- Hero Info Panel -->
    <div class="masthead-hero-inner">
        <section class="hero-panel">
            <!-- Event Badge -->
            <div class="hero-badge">
                <div aria-hidden="true" class="badge-icon">
                    <div class="badge-icon-inner">üéâ</div>
                </div>
                <div class="badge-copy">
                    <p class="badge-eyebrow">A Very Special</p>
                    <p class="badge-label">Hundred Acre Gathering</p>
                    <p class="badge-title">Virtual Baby Shower Celebration</p>
                </div>
                <div class="badge-meta">
                    <time class="badge-pill date" datetime="2025-06-15">
                        <span aria-hidden="true" class="pill-icon">üìÖ</span>
                        <span class="pill-text">June 15, 2025</span>
                    </time>
                    <div class="badge-pill location">
                        <span aria-hidden="true" class="pill-icon">üìç</span>
                        <span class="pill-text">Online Celebration</span>
                    </div>
                </div>
            </div>
            <!-- Hero Details Grid -->
            <div class="hero-details-grid">
                <div class="hero-detail">
                    <div aria-hidden="true" class="detail-icon">üìö</div>
                    <div class="detail-content">
                        <h4 class="detail-title">Interactive Storybook</h4>
                        <p class="detail-text">Read through four charming chapters</p>
                    </div>
                </div>
                <div class="hero-detail">
                    <div aria-hidden="true" class="detail-icon">üéÆ</div>
                    <div class="detail-content">
                        <h4 class="detail-title">Honey Game</h4>
                        <p class="detail-text">Help Pooh catch honey pots</p>
                    </div>
                </div>
                <div class="hero-detail">
                    <div aria-hidden="true" class="detail-icon">üéÅ</div>
                    <div class="detail-content">
                        <h4 class="detail-title">Gift Registry</h4>
                        <p class="detail-text">Share your wishes & blessings</p>
                    </div>
                </div>
            </div>
            <!-- Quick Actions -->
            <div class="hero-actions">
                <button class="hero-action-btn primary" onclick="scrollToChapter(1)">
                    <span aria-hidden="true" class="btn-icon">üìñ</span>
                    <span class="btn-text">Begin the Story</span>
                </button>
                <button class="hero-action-btn secondary" onclick="scrollToChapter(2)">
                    <span aria-hidden="true" class="btn-icon">üçØ</span>
                    <span class="btn-text">Play Honey Game</span>
                </button>
                <button class="hero-action-btn ghost" onclick="scrollToChapter(3)">
                    <span aria-hidden="true" class="btn-icon">üíù</span>
                    <span class="btn-text">View Registry</span>
                </button>
            </div>
            <!-- Orientation Hint -->
            <div class="orientation-hint">
                <div aria-hidden="true" class="hint-icon">üì±</div>
                <p class="hint-text">For the best experience: Rotate for wider game view, or stay in portrait for lovely
                    story reading.</p>
            </div>
        </section>
    </div>
</header>
<!-- Main Content -->
<main class="book-container" id="storybook">
    <!-- Chapter Navigation -->
    <nav aria-label="Story chapters" class="chapter-tracker">
        <h2 class="sr-only">Chapter navigation</h2>
        <div class="tracker-row">
            <div class="tracker-label">Story path</div>
            <div aria-valuemax="100" aria-valuemin="0" aria-valuenow="0" class="book-progress" role="progressbar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>
        <div class="chapter-pill-row">
            <button aria-current="page" class="chapter-pill sparkle active" data-chapter-target="1">
                <span class="pill-number">1</span>
                <span class="pill-text">
               <span class="pill-title">Welcome</span>
               <span class="pill-detail">Invitation arrives</span>
               </span>
            </button>
            <button class="chapter-pill sparkle" data-chapter-target="2">
                <span class="pill-number">2</span>
                <span class="pill-text">
               <span class="pill-title">Honey Hunt</span>
               <span class="pill-detail">Play the game</span>
               </span>
            </button>
            <button class="chapter-pill sparkle" data-chapter-target="3">
                <span class="pill-number">3</span>
                <span class="pill-text">
               <span class="pill-title">Gifts & Wishes</span>
               <span class="pill-detail">Registry & guestbook</span>
               </span>
            </button>
            <button class="chapter-pill sparkle" data-chapter-target="4">
                <span class="pill-number">4</span>
                <span class="pill-text">
               <span class="pill-title">Celebration</span>
               <span class="pill-detail">Welcome Gunnar</span>
               </span>
            </button>
        </div>
    </nav>
    <!-- Story Pages -->
    <div class="book">
        <div class="pages-wrapper">
            <!-- Chapter 1 -->
            <article class="page active" data-chapter="1">
                <header class="chapter-header">
                    <p class="chapter-number">Chapter One</p>
                    <h2 class="chapter-title">A Special Day in the Hundred Acre Wood</h2>
                    <p class="chapter-subtitle">An Invitation to Celebrate</p>
                    <span aria-hidden="true" class="honey-drip"></span>
                </header>
                <div class="page-content">
                    <p class="story-text">One fine spring day, in a corner of the Hundred Acre Wood where the sun shines
                        warmly through the trees and the flowers bloom in cheerful colors, something wonderful was
                        happening. All the forest friends were gathering, for there was to be a celebration unlike any
                        other.</p>
                    <p class="story-text">"What sort of celebration?" you might ask. Well, it was the very best sort‚Äîthe
                        kind that welcomes a new little friend to the world. A baby boy named Gunnar James was soon to
                        arrive, and everyone in the Hundred Acre Wood wanted to share in the joy.</p>
                    <div class="chapter-illustrations">
                        <figure class="storybook-figure figure-theme-honey clickable-character" data-character="pooh">
                            <img alt="Winnie the Pooh holding a honey pot" height="96"
                                 loading="eager" src="Images/Characters/honey-bear.png" width="96">
                            <figcaption class="figure-copy">
                                <div class="figure-name">Pooh brings the first pot</div>
                                <p class="figure-note">"A baby celebration needs extra honey," he whispered as he dusted
                                    off the lid.</p>
                            </figcaption>
                            <div aria-live="polite" class="character-message"></div>
                        </figure>
                        <figure class="storybook-figure figure-theme-sky clickable-character" data-character="piglet">
                            <img alt="Piglet carrying a welcome banner" height="96" loading="eager"
                                 src="Images/Characters/piglet.png" width="96">
                            <figcaption class="figure-copy">
                                <div class="figure-name">Piglet pins up the banner</div>
                                <p class="figure-note">He fluttered through the clearing making sure every friend felt
                                    warmly invited.</p>
                            </figcaption>
                            <div aria-live="polite" class="character-message"></div>
                        </figure>
                    </div>
                    <p class="story-text">Winnie the Pooh, being a Bear of Very Little Brain but a Very Big Heart, knew
                        that the most important thing for any celebration was honey. And not just a little honey, but
                        lots and lots of it. After all, welcoming Baby Gunnar was a Very Important Matter.</p>
                    <p class="story-text">"But first," thought Pooh, looking up at his honey pots on the high shelf,
                        "we'll need to gather more honey. Won't you help?"</p>
                    <div aria-hidden="true" class="divider">üå≥ ‚úø üêù ‚úø üå≥</div>
                </div>
            </article>
            <!-- Chapter 2: Game -->
            <!-- Chapter 2: Game -->
            <article class="page" data-chapter="2" id="honey-game">
                <header class="chapter-header">
                    <p class="chapter-number">Chapter Two</p>
                    <h2 class="chapter-title">Pooh's Honey Gathering Adventure</h2>
                    <p class="chapter-subtitle">A Game of Skill and Sweetness</p>
                    <span aria-hidden="true" class="honey-drip"></span>
                </header>
                <div class="chapter-illustrations">
                    <figure class="storybook-figure figure-theme-forest clickable-character" data-character="tigger">
                        <img alt="Tigger bouncing" height="96" loading="lazy" src="Images/Characters/tigger.png"
                             width="96">
                        <figcaption class="figure-copy">
                            <div class="figure-name">Tigger stakes out the course</div>
                            <p class="figure-note">He marked the path with springy footprints so every honey pot feels
                                like an adventure to catch.</p>
                        </figcaption>
                        <div aria-live="polite" class="character-message"></div>
                    </figure>
                    <figure class="storybook-figure figure-theme-honey clickable-character" data-character="roo">
                        <img alt="Roo cheering" height="96" loading="lazy" src="Images/Characters/roo.png" width="96">
                        <figcaption class="figure-copy">
                            <div class="figure-name">Roo cheers from the sidelines</div>
                            <p class="figure-note">"Mind the bees!" he giggled, handing out cozy scarves.</p>
                        </figcaption>
                        <div aria-live="polite" class="character-message"></div>
                    </figure>
                </div>

                <!-- Game Container -->
                <div class="game-inline-container" id="gameInlineContainer">
                    <!-- Game Settings Button -->
                    <div class="game-settings-button">
                        <button class="settings-button" id="gameSettingsButton" aria-label="Open game settings">
                            ‚öôÔ∏è
                        </button>
                    </div>

                    <!-- Game Background -->
                    <div class="game-bg-horizon"></div>
                    <div class="game-bg-ground"></div>

                    <!-- Game Start Overlay -->
                    <div class="game-start-overlay" id="gameStartOverlay">
                        <div class="game-start-card">
                            <h2 class="game-start-title">Ready to Hunt Honey?</h2>
                            <p class="game-start-subtitle">Help Pooh catch honey jars while avoiding bees!</p>
                            <button class="btn primary" id="gameStartButton">
                                <i aria-hidden="true" class="fas fa-play"></i>
                                <span>Start Game</span>
                            </button>
                            <div class="game-controls-hint">
                                <p><strong>Controls:</strong></p>
                                <p>‚Üê ‚Üí Arrow Keys or A/D to move</p>
                                <p>Space to pause</p>
                            </div>
                        </div>
                    </div>

                    <!-- Game HUD -->
                    <div aria-live="polite" class="game-hud" id="gameHUD">
                        <div class="game-hud-item">
                            <span class="game-hud-label">Score</span>
                            <span class="game-hud-value" id="gameScoreValue">0</span>
                        </div>
                        <div class="game-hud-item">
                            <span class="game-hud-label">Best</span>
                            <span class="game-hud-value" id="gameBestValue">0</span>
                        </div>
                        <div class="game-hud-item">
                            <span class="game-hud-label">Time</span>
                            <span class="game-hud-value" id="gameTimeValue">60</span>
                        </div>
                        <div class="game-hud-item">
                            <span class="game-hud-label">Lives</span>
                            <span class="game-hud-value" id="gameLivesValue">‚ô•‚ô•‚ô•</span>
                        </div>
                        <div class="game-hud-item">
                            <span class="game-hud-label">Streak</span>
                            <span class="game-hud-value" id="gameStreakValue">0</span>
                            <span class="streak-badge" id="gameStreakBadge">Combo!</span>
                        </div>
                    </div>

                    <!-- Game Canvas -->
                    <canvas aria-label="Honey Hunt playfield" id="gameCanvas" role="img"></canvas>

                    <!-- Game Pause Overlay -->
                    <div class="game-overlay" id="gamePauseOverlay">
                        <div class="game-overlay-card">
                            <h2 class="game-start-title">Game Paused</h2>
                            <p class="game-start-subtitle">The bees are waiting...</p>
                            <button class="btn primary" id="gameResumeButton">
                                <i aria-hidden="true" class="fas fa-play"></i>
                                <span>Resume</span>
                            </button>
                        </div>
                    </div>

                    <!-- Game Over Overlay -->
                    <div class="game-overlay" id="gameOverOverlay">
                        <div class="game-overlay-card">
                            <h2 class="game-start-title">Game Over!</h2>
                            <div class="game-over-stats">
                                <div class="game-over-label">Final Score</div>
                                <div class="game-over-score" id="finalGameScore">0</div>
                                <div class="game-over-best">
                                    Best: <span id="finalGameBest">0</span>
                                </div>
                            </div>
                            <button class="btn primary" id="gameRestartButton">
                                <i aria-hidden="true" class="fas fa-redo"></i>
                                <span>Play Again</span>
                            </button>
                        </div>
                    </div>

                    <!-- Mobile Controls -->
                    <div class="mobile-controls" id="mobileControls">
                        <button class="mobile-control-btn" id="mobileLeftBtn">
                            <i aria-hidden="true" class="fas fa-arrow-left"></i>
                        </button>
                        <button class="mobile-control-btn mobile-control-pause" id="mobilePauseBtn">
                            <i aria-hidden="true" class="fas fa-pause"></i>
                        </button>
                        <button class="mobile-control-btn" id="mobileRightBtn">
                            <i aria-hidden="true" class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
                <div class="game-critique" aria-live="polite">
                    <div class="critique-header">
                        <div class="critique-kicker">Run critique</div>
                        <p class="critique-summary" id="critiqueSummary">Finish a run to unlock tips</p>
                    </div>
                    <ul class="critique-list" id="critiqueList">
                        <li>Collect honey and avoid bees to see how you did.</li>
                    </ul>
                </div>

                <div class="game-description">
                    <h3>How to Play</h3>
                    <p>Help Winnie the Pooh collect honey pots while avoiding bees! Move left and right with arrow keys
                        or on-screen controls. Chain catches to build combos for higher scores. Watch for special jars
                        that grant shields and power-ups!</p>
                    <div class="game-tips">
                        <div class="tip">
                            <span class="tip-icon">üéØ</span>
                            <p><strong>Goal:</strong> Score as many points as you can in 60 seconds!</p>
                        </div>
                        <div class="tip">
                            <span class="tip-icon">üõ°Ô∏è</span>
                            <p><strong>Blue Jars:</strong> Give temporary shield protection</p>
                        </div>
                        <div class="tip">
                            <span class="tip-icon">‚ú®</span>
                            <p><strong>Power-ups:</strong> Special jars give amazing abilities</p>
                        </div>
                    </div>
                </div>
            </article>
            <!-- Chapter 3: Gifts & Wishes -->
            <article class="page" data-chapter="3">
                <header class="chapter-header">
                    <p class="chapter-number">Chapter Three</p>
                    <h2 class="chapter-title">Gifts from the Heart</h2>
                    <p class="chapter-subtitle">Preparing for Baby Gunnar's Arrival</p>
                    <span aria-hidden="true" class="honey-drip"></span>
                </header>
                <div class="page-content">
                    <section class="story-section">
                        <p class="story-text">Back in the Hundred Acre Wood, Pooh sat thoughtfully by his honey pots.
                            "Honey is wonderful," he mused, "but I wonder what else a growing bear‚Äîoh, I mean baby‚Äîmight
                            need?"</p>
                        <p class="story-text">Just then, Piglet came scurrying up, holding something soft. "I was
                            thinking, Pooh," he said in his small voice, "perhaps something cozy for chilly
                            evenings?"</p>
                        <div class="dialogue-bubble dialogue-piglet">
                            <div class="bubble-arrow"></div>
                            <p>"Something soft and warm, for when the wind howls!"</p>
                            <span class="speaker">‚Äî Piglet</span>
                        </div>
                    </section>
                    <div class="chapter-illustrations">
                        <figure class="storybook-figure figure-theme-forest clickable-character"
                                data-character="piglet">
                            <img alt="Piglet with blanket" height="96" loading="lazy" src="Images/Characters/piglet.png"
                                 width="96">
                            <figcaption class="figure-copy">
                                <div class="figure-name">Piglet's Cozy Corner</div>
                                <p class="figure-note">Found the snuggliest blanket in all the Wood.</p>
                            </figcaption>
                            <div aria-live="polite" class="character-message"></div>
                        </figure>
                        <figure class="storybook-figure figure-theme-honey clickable-character" data-character="pooh">
                            <img alt="Pooh thinking" height="96" loading="lazy" src="Images/Characters/honey-bear.png"
                                 width="96">
                            <figcaption class="figure-copy">
                                <div class="figure-name">Pooh's Pondering</div>
                                <p class="figure-note">Thinking of practical things (between honey snacks).</p>
                            </figcaption>
                            <div aria-live="polite" class="character-message"></div>
                        </figure>
                        <figure class="storybook-figure figure-theme-sky clickable-character" data-character="tigger">
                            <img alt="Tigger bouncing" height="96" loading="lazy" src="Images/Characters/tigger.png"
                                 width="96">
                            <figcaption class="figure-copy">
                                <div class="figure-name">Tigger's Toys</div>
                                <p class="figure-note">Bounced in with the bounciest ideas!</p>
                            </figcaption>
                            <div aria-live="polite" class="character-message"></div>
                        </figure>
                    </div>
                    <section class="story-section">
                        <p class="story-text">Soon, all the friends had gathered with their ideas. Tigger bounced about
                            toys that bounce, Eeyore suggested "something useful that won't blow away," and Rabbit began
                            making a very organized list.</p>
                        <div class="dialogue-bubble dialogue-pooh">
                            <div class="bubble-arrow"></div>
                            <p>"The most important thing," said Pooh wisely, "is that Baby Gunnar knows he is surrounded
                                by love. But if you'd like to bring something special, his parents have shared a few
                                ideas that would be helpful."</p>
                            <span class="speaker">‚Äî Pooh Bear</span>
                        </div>
                    </section>
                    <div class="registry-container">
                        <aside class="registry-section">
                            <div class="registry-header">
                                <div aria-hidden="true" class="registry-icon">üéÅ</div>
                                <div>
                                    <h3>Baby Gunnar's Registry</h3>
                                    <p class="registry-subtitle">Your presence is the greatest present, but if you'd
                                        like to contribute to his woodland adventures:</p>
                                </div>
                            </div>
                            <div class="registry-grid">
                                <a class="registry-card" href="https://my.babylist.com/lea-hardesty" rel="noopener"
                                   target="_blank">
                                    <div class="card-icon">üéØ</div>
                                    <div class="card-content">
                                        <h4>babylist Registry</h4>
                                        <p>For everyday essentials and nursery items</p>
                                        <span class="card-link">Browse registry ‚Üí</span>
                                    </div>
                                </a>
                                <div class="registry-card gift-idea-card">
                                    <div class="card-icon">üíù</div>
                                    <div class="card-content">
                                        <h4>Gift Ideas</h4>
                                        <ul class="gift-ideas">
                                            <li>Board books & stories</li>
                                            <li>Woodland-themed clothing</li>
                                            <li>Soft blankets & swaddles</li>
                                            <li>Diapers & essentials</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </aside>
                    </div>
                    <section class="nursery-details">
                        <h3><span aria-hidden="true">üß∏</span> Nursery Details</h3>
                        <div class="details-grid">
                            <div class="detail-card">
                                <div class="detail-icon">üé®</div>
                                <div class="detail-content">
                                    <h4>Theme</h4>
                                    <p>Hundred Acre Wood Adventures</p>
                                    <small>Featuring Winnie the Pooh & friends</small>
                                </div>
                            </div>
                            <div class="detail-card">
                                <div class="detail-icon">üåà</div>
                                <div class="detail-content">
                                    <h4>Colors</h4>
                                    <p>Honey gold, Pooh red, sage green, cream</p>
                                    <small>Soft & soothing woodland palette</small>
                                </div>
                            </div>
                            <div class="detail-card">
                                <div class="detail-icon">üìö</div>
                                <div class="detail-content">
                                    <h4>Favorite Items</h4>
                                    <p>Swaddles, sleepers, board books, cozy blankets</p>
                                </div>
                            </div>
                            <div class="detail-card">
                                <div class="detail-icon">üìç</div>
                                <div class="detail-content">
                                    <h4>Location</h4>
                                    <p>Arizona</p>
                                    <small>Where adventures begin</small>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section class="wishes-section">
                        <div class="wishes-header">
                            <h3>Share Your Wishes <span aria-hidden="true">‚ú®</span></h3>
                            <p>Leave wisdom, well-wishes, or favorite childhood memories for Gunnar's storybook</p>
                        </div>
                        <div class="wishes-form-container">
                            <form class="enhanced-form" id="wishesForm">
                                <div class="form-grid">
                                    <div class="form-field">
                                        <label for="guestName">Your Name</label>
                                        <input id="guestName" placeholder="How should we call you?" required
                                               type="text">
                                    </div>
                                    <div class="form-field">
                                        <label for="guestRelation">Your Relation</label>
                                        <select id="guestRelation">
                                            <option value="">Choose one...</option>
                                            <option value="family">Family</option>
                                            <option value="friend">Friend</option>
                                            <option value="colleague">Colleague</option>
                                            <option value="woodland-friend">Woodland Friend</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-field">
                                    <label for="wishMessage">Your Message</label>
                                    <textarea id="wishMessage" placeholder="What wisdom or wishes would you like to share with Baby Gunnar?..."
                                              required
                                              rows="4"></textarea>
                                    <div class="character-count">0/500 characters</div>
                                </div>
                                <div class="form-actions">
                                    <button class="submit-btn" type="submit">
                                        <span aria-hidden="true">üìù</span> Add to Gunnar's Storybook
                                    </button>
                                    <div aria-live="polite" class="form-feedback" id="wishFeedback" role="status"></div>
                                </div>
                            </form>
                        </div>
                        <div class="sample-wishes">
                            <h4>Wishes from the Wood:</h4>
                            <div class="wish-examples">
                                <blockquote class="wish-example">
                                    <p>"May your days be filled with wonder and your nights with sweet dreams."</p>
                                    <cite>‚Äî Owl</cite>
                                </blockquote>
                                <blockquote class="wish-example">
                                    <p>"Remember: even the smallest creatures can have the biggest hearts."</p>
                                    <cite>‚Äî Piglet</cite>
                                </blockquote>
                            </div>
                        </div>
                    </section>
                    <div class="wishes-display" id="wishesDisplay">
                        <!-- Dynamic wishes will appear here -->
                    </div>
                </div>
            </article>
            <!-- Chapter 4: Celebration -->
            <article class="page" data-chapter="4">
                <header class="chapter-header">
                    <p class="chapter-number">Chapter Four</p>
                    <h2 class="chapter-title">The Gathering</h2>
                    <p class="chapter-subtitle">Celebrating What's to Come</p>
                    <span aria-hidden="true" class="honey-drip"></span>
                </header>
                <div class="page-content">
                    <p class="story-text">As the sun began to set over the Hundred Acre Wood, casting long golden
                        shadows through the trees, Pooh and his friends gathered to celebrate the coming arrival of Baby
                        Gunnar.</p>
                    <div class="chapter-illustrations">
                        <figure class="storybook-figure figure-theme-honey clickable-character" data-character="pooh">
                            <img alt="Pooh with honey pot" height="96" loading="lazy" src="Images/Characters/honey-bear.png"
                                 width="96">
                            <figcaption class="figure-copy">
                                <div class="figure-name">Pooh's special pot</div>
                                <p class="figure-note">He saved one golden pot for Gunnar's first visit.</p>
                            </figcaption>
                            <div aria-live="polite" class="character-message"></div>
                        </figure>
                        <figure class="storybook-figure figure-theme-sky clickable-character" data-character="gunnar">
                            <img alt="Baby Gunnar" height="96" loading="lazy" src="Images/Characters/Gunnar.png"
                                 width="96">
                            <figcaption class="figure-copy">
                                <div class="figure-name">Coming Soon</div>
                                <p class="figure-note">The Hundred Acre Wood awaits its newest friend.</p>
                            </figcaption>
                            <div aria-live="polite" class="character-message"></div>
                        </figure>
                    </div>
                    <p class="story-text">With honey gathered, gifts prepared, and wishes shared, everyone in the
                        Hundred Acre Wood looked forward to the day they would meet Baby Gunnar. For as Pooh always
                        said, "How lucky I am to have something to look forward to."</p>
                    <div class="welcome-panel">
                        <div aria-hidden="true" class="welcome-icon">üåü</div>
                        <h3 class="welcome-heading">We Can't Wait to Meet You!</h3>
                        <p class="welcome-subtitle">Baby Gunnar, your adventure in the Hundred Acre Wood is about to
                            begin</p>
                    </div>
                    <section class="countdown-section">
                        <h3>Until We Meet üêª</h3>
                        <div class="countdown-display">
                            <div class="countdown-item">
                                <span class="countdown-number" id="days">--</span>
                                <span class="countdown-label">Days</span>
                            </div>
                            <div class="countdown-item">
                                <span class="countdown-number" id="hours">--</span>
                                <span class="countdown-label">Hours</span>
                            </div>
                        </div>
                        <p class="countdown-note">Expected arrival:
                            <time datetime="2025-08">Late August 2025</time>
                        </p>
                    </section>
                    <div class="honey-jar-interactive">
                        <div aria-hidden="true">üçØ</div>
                        <h3>Gunnar's Honey Jar of Hopes</h3>
                        <p>Share your hopes and dreams for Baby Gunnar's future adventures.</p>
                        <button class="btn primary" id="addHopeBtn">‚ûï Add Your Hope</button>
                    </div>
                    <aside class="final-thought">
                        <blockquote>
                            <p>"Sometimes the smallest things take up the most room in your heart."<br>
                                <cite>‚Äî Winnie the Pooh</cite>
                            </p>
                        </blockquote>
                        <p class="signature">With love from all your friends in the Hundred Acre Wood</p>
                    </aside>
                </div>
            </article>
        </div>
        <!-- Navigation -->
        <nav aria-label="Page navigation" class="chapter-nav">
            <button class="chapter-nav-btn" id="prevBtn">‚Üê Previous</button>
            <div class="chapter-indicator" id="pageIndicator">Chapter 1 of 4</div>
            <button class="chapter-nav-btn next" id="nextBtn">Next ‚Üí</button>
        </nav>
    </div>
</main>
<!-- Footer -->
<footer class="site-footer">
    <p>Made with üíô and üçØ for Baby Gunnar's special day</p>
    <div class="footer-links">
        <button class="footer-link" id="printPageBtn">üñ® Print</button>
        <button class="footer-link" id="sharePageBtn">üì§ Share</button>
        <button class="footer-link" id="toggleAnimationsBtn">üé≠ Animations</button>
    </div>
</footer>

<!-- Game Script -->
<script>
    // Honey Hunt Game - Simplified Version
    (function() {
        "use strict";

        // Game variables
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const gameContainer = document.getElementById('gameInlineContainer');
        const gameStartOverlay = document.getElementById('gameStartOverlay');
        const gameStartButton = document.getElementById('gameStartButton');
        const gameHUD = document.getElementById('gameHUD');
        const gamePauseOverlay = document.getElementById('gamePauseOverlay');
        const gameOverOverlay = document.getElementById('gameOverOverlay');
        const gameResumeButton = document.getElementById('gameResumeButton');
        const gameRestartButton = document.getElementById('gameRestartButton');
        const mobileControls = document.getElementById('mobileControls');
        const mobileLeftBtn = document.getElementById('mobileLeftBtn');
        const mobileRightBtn = document.getElementById('mobileRightBtn');
        const mobilePauseBtn = document.getElementById('mobilePauseBtn');
        const critiqueSummary = document.getElementById('critiqueSummary');
        const critiqueList = document.getElementById('critiqueList');

        // Game state
        let gameState = {
            running: false,
            paused: false,
            timeLeft: 60,
            score: 0,
            best: localStorage.getItem('honeyHuntBest') || 0,
            streak: 0,
            lives: 3,
            shieldTime: 0
        };

        const defaultCritique = {
            summary: 'Finish a run to unlock tips',
            bullets: ['Collect honey and avoid bees to see how you did.']
        };

        const runStats = {
            jarsCaught: 0,
            goldCaught: 0,
            shieldsCaught: 0,
            beesBumped: 0,
            maxStreak: 0
        };

        function resetRunStats() {
            runStats.jarsCaught = 0;
            runStats.goldCaught = 0;
            runStats.shieldsCaught = 0;
            runStats.beesBumped = 0;
            runStats.maxStreak = 0;
            renderCritique(defaultCritique.summary, defaultCritique.bullets);
        }

        function renderCritique(summary, bulletPoints) {
            if (critiqueSummary) {
                critiqueSummary.textContent = summary;
            }

            if (critiqueList) {
                critiqueList.innerHTML = '';
                bulletPoints.forEach((point) => {
                    const li = document.createElement('li');
                    li.textContent = point;
                    critiqueList.appendChild(li);
                });
            }
        }

        function buildRunCritique() {
            const bullets = [];

            const summary = gameState.score >= 240
                ? 'Sweet scoring spree!'
                : gameState.score >= 160
                    ? 'Solid honey haul!'
                    : 'Warm-up jog complete ‚Äî more honey awaits.';

            const safetyNote = runStats.beesBumped === 0
                ? 'Stayed sting-free‚Äînimble dodging!'
                : `Bee bumps: ${runStats.beesBumped}. Weaving and shields keep Pooh cozy.`;
            bullets.push(safetyNote);

            const streakNote = runStats.maxStreak >= 6
                ? `Built a cozy combo of x${runStats.maxStreak}‚Äîkeep chaining catches.`
                : runStats.maxStreak >= 3
                    ? `Nice combo rhythm at x${runStats.maxStreak}; keep jars flowing for bigger boosts.`
                    : 'Try catching back-to-back honey to build a combo bonus.';
            bullets.push(streakNote);

            const haulNote = gameState.score >= 200
                ? 'Honey haul was plentiful‚Äîsweet pace!'
                : gameState.score >= 110
                    ? 'Solid honey haul; chase a few more pots next run.'
                    : 'Slide under falling honey more often to grow your haul.';
            bullets.push(haulNote);

            const shieldNote = runStats.shieldsCaught > 0
                ? `Shields collected: ${runStats.shieldsCaught}. Great for shrugging off bees!`
                : 'Snag blue jars for a shield when bees get busy.';
            bullets.push(shieldNote);

            return { summary, bullets };
        }

        // Game objects
        const bear = {
            x: 0,
            y: 0,
            width: 40,
            height: 60,
            speed: 260,
            vx: 0
        };

        const jars = [];
        const bees = [];
        const particles = [];

        // Control keys
        const keys = {
            left: false,
            right: false
        };

        // Initialize game
        function initGame() {
            // Set canvas size
            resizeCanvas();

            // Initialize bear position
            bear.x = canvas.width / 2;
            bear.y = canvas.height * 0.85;

            // Apply sensitivity from settings
            if (window.getGameSettings) {
                const settings = window.getGameSettings();
                bear.speed = settings.sensitivity || 260;
            }

            // Clear arrays
            jars.length = 0;
            bees.length = 0;
            particles.length = 0;

            // Reset game state with difficulty settings
            const difficulty = window.gameDifficulty || {
                timeLimit: 60,
                lives: 3
            };

            gameState.timeLeft = difficulty.timeLimit || 60;
            gameState.score = 0;
            gameState.streak = 0;
            gameState.lives = difficulty.lives || 3;
            gameState.shieldTime = 0;

            resetRunStats();

            // Update HUD
            updateHUD();

            // Show start overlay
            gameStartOverlay.classList.remove('hidden');
            gameHUD.classList.remove('visible');
            mobileControls.classList.remove('visible');
            gamePauseOverlay.classList.remove('visible');
            gameOverOverlay.classList.remove('visible');

            // Show mobile controls based on settings
            if (window.getGameSettings) {
                const settings = window.getGameSettings();
                if (settings.mobileControls && ('ontouchstart' in window || navigator.maxTouchPoints > 0)) {
                    mobileControls.classList.add('visible');
                }
            }
        }

        // Start game
        function startGame() {
            gameState.running = true;
            gameState.paused = false;
            gameStartOverlay.classList.add('hidden');
            gameHUD.classList.add('visible');
            gamePauseOverlay.classList.remove('visible');
            gameOverOverlay.classList.remove('visible');

            // Start game loop
            lastTimestamp = performance.now();
            requestAnimationFrame(gameLoop);
        }

        // Pause game
        function pauseGame() {
            if (!gameState.running) return;
            gameState.paused = true;
            gamePauseOverlay.classList.add('visible');
        }

        // Resume game
        function resumeGame() {
            if (!gameState.running) return;
            gameState.paused = false;
            gamePauseOverlay.classList.remove('visible');
            lastTimestamp = performance.now();
            requestAnimationFrame(gameLoop);
        }

        // End game
        function endGame() {
            gameState.running = false;

            // Update best score
            if (gameState.score > gameState.best) {
                gameState.best = gameState.score;
                localStorage.setItem('honeyHuntBest', gameState.best);
            }

            // Update final score display
            document.getElementById('finalGameScore').textContent = gameState.score;
            document.getElementById('finalGameBest').textContent = gameState.best;

            // Show game over overlay
            gameOverOverlay.classList.add('visible');
            gameHUD.classList.remove('visible');

            const critique = buildRunCritique();
            renderCritique(critique.summary, critique.bullets);
        }

        // Resize canvas
        function resizeCanvas() {
            const rect = gameContainer.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;
        }

        // Update HUD
        function updateHUD() {
            document.getElementById('gameScoreValue').textContent = gameState.score;
            document.getElementById('gameBestValue').textContent = gameState.best;
            document.getElementById('gameTimeValue').textContent = Math.max(0, Math.floor(gameState.timeLeft));
            document.getElementById('gameStreakValue').textContent = gameState.streak;

            // Update lives display
            const livesValue = document.getElementById('gameLivesValue');
            const full = "‚ô•".repeat(gameState.lives);
            const empty = "‚ô°".repeat(3 - gameState.lives);
            livesValue.textContent = full + empty;

            // Update streak badge
            const streakBadge = document.getElementById('gameStreakBadge');
            if (gameState.streak >= 5) {
                streakBadge.classList.add('visible');
            } else {
                streakBadge.classList.remove('visible');
            }
        }

        // Draw functions
        function drawBear() {
            ctx.save();
            ctx.translate(bear.x, bear.y);

            // Draw bear body
            ctx.fillStyle = '#fbbf24';
            ctx.beginPath();
            ctx.ellipse(0, -10, 25, 35, 0, 0, Math.PI * 2);
            ctx.fill();

            // Draw head
            ctx.fillStyle = '#fbbf24';
            ctx.beginPath();
            ctx.arc(0, -48, 20, 0, Math.PI * 2);
            ctx.fill();

            // Draw ears
            ctx.fillStyle = '#f59e0b';
            ctx.beginPath();
            ctx.arc(-12, -60, 8, 0, Math.PI * 2);
            ctx.arc(12, -60, 8, 0, Math.PI * 2);
            ctx.fill();

            // Draw face
            ctx.fillStyle = '#1f2937';
            ctx.beginPath();
            ctx.arc(-8, -52, 3, 0, Math.PI * 2);
            ctx.arc(8, -52, 3, 0, Math.PI * 2);
            ctx.fill();

            // Draw mouth (smile)
            ctx.strokeStyle = '#1f2937';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(0, -45, 6, 0.2, Math.PI - 0.2);
            ctx.stroke();

            // Draw honey jar
            ctx.fillStyle = '#b45309';
            ctx.fillRect(-20, 0, 40, 30);

            ctx.fillStyle = '#f59e0b';
            ctx.fillRect(-18, 2, 36, 26);

            ctx.restore();

            // Draw shield if active
            if (gameState.shieldTime > 0) {
                ctx.save();
                ctx.translate(bear.x, bear.y - 10);

                ctx.strokeStyle = '#38bdf8';
                ctx.lineWidth = 3;
                ctx.globalAlpha = 0.6;
                ctx.beginPath();
                ctx.arc(0, 0, 35, 0, Math.PI * 2);
                ctx.stroke();

                ctx.restore();
            }
        }

        function drawJar(x, y, type = 'normal') {
            ctx.save();
            ctx.translate(x, y);

            let color = '#fbbf24';
            if (type === 'gold') color = '#f59e0b';
            if (type === 'shield') color = '#38bdf8';

            // Jar body
            ctx.fillStyle = color;
            ctx.fillRect(-10, -20, 20, 40);

            // Jar lid
            ctx.fillStyle = '#92400e';
            ctx.fillRect(-12, -25, 24, 5);

            // Honey inside
            ctx.fillStyle = '#d97706';
            ctx.fillRect(-8, 0, 16, 15);

            ctx.restore();
        }

        function drawBee(x, y) {
            ctx.save();
            ctx.translate(x, y);

            // Bee body
            ctx.fillStyle = '#fbbf24';
            ctx.beginPath();
            ctx.ellipse(0, 0, 12, 8, 0, 0, Math.PI * 2);
            ctx.fill();

            // Bee stripes
            ctx.fillStyle = '#1f2937';
            ctx.fillRect(-10, -2, 20, 4);

            // Bee wings
            ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
            ctx.beginPath();
            ctx.ellipse(-6, -10, 8, 5, Math.PI/4, 0, Math.PI * 2);
            ctx.ellipse(6, -10, 8, 5, -Math.PI/4, 0, Math.PI * 2);
            ctx.fill();

            ctx.restore();
        }

        // Game loop
        let lastTimestamp = 0;

        function gameLoop(timestamp) {
            if (!gameState.running || gameState.paused) return;

            const dt = (timestamp - lastTimestamp) / 1000;
            lastTimestamp = timestamp;

            // Update game state
            updateGame(dt);

            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw game objects
            drawBear();

            // Draw jars
            for (const jar of jars) {
                drawJar(jar.x, jar.y, jar.type);
            }

            // Draw bees
            for (const bee of bees) {
                drawBee(bee.x, bee.y);
            }

            // Draw particles if enabled
            if (window.getGameSettings && window.getGameSettings().particles !== false) {
                for (const p of particles) {
                    ctx.save();
                    ctx.translate(p.x, p.y);
                    ctx.fillStyle = p.color;
                    ctx.globalAlpha = p.life;
                    ctx.fillRect(-2, -2, 4, 4);
                    ctx.restore();
                }
            }

            // Continue game loop
            if (gameState.running && !gameState.paused) {
                requestAnimationFrame(gameLoop);
            }
        }

        function updateGame(dt) {
            // Update time
            gameState.timeLeft -= dt;
            if (gameState.timeLeft <= 0) {
                gameState.timeLeft = 0;
                endGame();
                return;
            }

            // Update shield
            if (gameState.shieldTime > 0) {
                gameState.shieldTime -= dt;
            }

            // Use difficulty settings if available
            const difficulty = window.gameDifficulty || {
                jarSpawnRate: 0.02,
                jarSpeed: { min: 150, max: 200 },
                beeSpawnRate: 0.01,
                beeSpeed: { min: 100, max: 150 },
                timeLimit: 60,
                lives: 3
            };

            // Spawn jars with difficulty settings
            if (Math.random() < difficulty.jarSpawnRate) {
                const type = Math.random() < 0.1 ? 'gold' : Math.random() < 0.15 ? 'shield' : 'normal';
                jars.push({
                    x: Math.random() * (canvas.width - 40) + 20,
                    y: -20,
                    vy: difficulty.jarSpeed.min + Math.random() * (difficulty.jarSpeed.max - difficulty.jarSpeed.min),
                    type: type
                });
            }

            // Spawn bees with difficulty settings
            if (Math.random() < difficulty.beeSpawnRate) {
                bees.push({
                    x: Math.random() < 0.5 ? -20 : canvas.width + 20,
                    y: Math.random() * canvas.height * 0.6 + 50,
                    vx: (Math.random() < 0.5 ? -1 : 1) * (difficulty.beeSpeed.min + Math.random() * (difficulty.beeSpeed.max - difficulty.beeSpeed.min)),
                    vy: 0
                });
            }

            // Update bear position
            if (keys.left) bear.vx = -bear.speed;
            else if (keys.right) bear.vx = bear.speed;
            else bear.vx = 0;

            bear.x += bear.vx * dt;
            bear.x = Math.max(20, Math.min(canvas.width - 20, bear.x));

            // Update jars
            for (let i = jars.length - 1; i >= 0; i--) {
                const jar = jars[i];
                jar.y += jar.vy * dt;

                // Check collision with bear
                const dx = jar.x - bear.x;
                const dy = jar.y - (bear.y - 20);
                const distance = Math.sqrt(dx * dx + dy * dy);

                if (distance < 30) {
                    // Jar caught!
                    jars.splice(i, 1);
                    gameState.score += jar.type === 'gold' ? 30 : jar.type === 'shield' ? 15 : 10;
                    gameState.streak++;
                    runStats.jarsCaught++;
                    if (jar.type === 'gold') {
                        runStats.goldCaught++;
                    }

                    if (jar.type === 'shield') {
                        runStats.shieldsCaught++;
                        gameState.shieldTime = 5;
                    }

                    runStats.maxStreak = Math.max(runStats.maxStreak, gameState.streak);

                    // Create particles if enabled
                    if (window.getGameSettings && window.getGameSettings().particles !== false) {
                        for (let j = 0; j < 10; j++) {
                            particles.push({
                                x: jar.x,
                                y: jar.y,
                                vx: (Math.random() - 0.5) * 200,
                                vy: -100 - Math.random() * 100,
                                color: jar.type === 'gold' ? '#f59e0b' : jar.type === 'shield' ? '#38bdf8' : '#fbbf24',
                                life: 1
                            });
                        }
                    }

                    // Play sound if enabled
                    if (window.getGameSettings && window.getGameSettings().sfx !== false) {
                        const honeySound = document.getElementById('honeySound');
                        if (honeySound) {
                            honeySound.currentTime = 0;
                            honeySound.play().catch(e => console.log('Sound play failed:', e));
                        }
                    }
                }

                // Remove off-screen jars
                if (jar.y > canvas.height + 50) {
                    jars.splice(i, 1);
                    gameState.streak = 0;
                }
            }

            // Update bees
            for (let i = bees.length - 1; i >= 0; i--) {
                const bee = bees[i];
                bee.x += bee.vx * dt;

                // Check collision with bear
                const dx = bee.x - bear.x;
                const dy = bee.y - bear.y;
                const distance = Math.sqrt(dx * dx + dy * dy);

                if (distance < 25) {
                    // Bee hit!
                    bees.splice(i, 1);

                    if (gameState.shieldTime > 0) {
                        gameState.shieldTime = 0;
                    } else {
                        runStats.beesBumped++;
                        gameState.lives--;
                        gameState.streak = 0;

                        if (gameState.lives <= 0) {
                            endGame();
                            return;
                        }
                    }
                }

                // Remove off-screen bees
                if (bee.x < -50 || bee.x > canvas.width + 50) {
                    bees.splice(i, 1);
                }
            }

            // Update particles
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.x += p.vx * dt;
                p.y += p.vy * dt;
                p.vy += 200 * dt;
                p.life -= dt;

                if (p.life <= 0) {
                    particles.splice(i, 1);
                }
            }

            // Update HUD
            updateHUD();
        }

        // Event listeners
        gameStartButton.addEventListener('click', startGame);
        gameResumeButton.addEventListener('click', resumeGame);
        gameRestartButton.addEventListener('click', () => {
            initGame();
            startGame();
        });        // Keyboard controls - FOR THE GAME
        document.addEventListener('keydown', (e) => {
            // Only handle game controls if we're in Chapter 2 AND game is running
            const gamePage = document.querySelector('.page[data-chapter="2"]');
            const isInGame = gamePage && gamePage.classList.contains('active');

            if (isInGame && gameState.running && !gameState.paused) {
                if (e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') {
                    e.preventDefault(); // Prevent chapter navigation
                    keys.left = true;
                } else if (e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') {
                    e.preventDefault(); // Prevent chapter navigation
                    keys.right = true;
                } else if (e.key === ' ' || e.key === 'Spacebar') {
                    e.preventDefault();
                    pauseGame();
                }
            }
        });

        document.addEventListener('keyup', (e) => {
            const gamePage = document.querySelector('.page[data-chapter="2"]');
            const isInGame = gamePage && gamePage.classList.contains('active');

            if (isInGame) {
                if (e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') {
                    e.preventDefault();
                    keys.left = false;
                } else if (e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') {
                    e.preventDefault();
                    keys.right = false;
                }
            }
        });

        // Mobile controls
        mobileLeftBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            keys.left = true;
        });

        mobileLeftBtn.addEventListener('touchend', (e) => {
            e.preventDefault();
            keys.left = false;
        });

        mobileRightBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            keys.right = true;
        });

        mobileRightBtn.addEventListener('touchend', (e) => {
            e.preventDefault();
            keys.right = false;
        });

        mobilePauseBtn.addEventListener('click', pauseGame);

        // Initialize game when page loads
        window.addEventListener('load', initGame);
        window.addEventListener('resize', resizeCanvas);

        // Make game functions available to chapter navigation
        window.initHoneyGame = initGame;
        window.pauseHoneyGame = pauseGame;
    })();

    // Storybook chapter navigation
    document.addEventListener("DOMContentLoaded", () => {
        const pages = [...document.querySelectorAll(".page")];
        const nextBtn = document.getElementById("nextBtn");
        const prevBtn = document.getElementById("prevBtn");
        const indicator = document.getElementById("pageIndicator");
        const progress = document.getElementById("progressFill");
        const pageTurnSound = document.getElementById("pageSound");
        const total = pages.length;
        let current = 0;

        function playPageTurn() {
            const settings = typeof window.getGameSettings === 'function'
                ? window.getGameSettings()
                : null;

            const allowSfx = settings ? settings.sfx !== false : true;

            if (!allowSfx || !pageTurnSound) return;

            pageTurnSound.currentTime = 0;
            pageTurnSound.play().catch(() => {});
        }

        function scrollToChapter(chapter) {
            const target = chapter - 1;
            if (!isNaN(target) && target >= 0 && target < total) {
                current = target;
                playPageTurn();
                updateUI();
            }
        }

        function updateUI() {
            pages.forEach((page, i) => {
                const wasActive = page.classList.contains("active");
                page.classList.toggle("active", i === current);

                // Initialize game when Chapter 2 becomes active
                if (i === 1 && i === current && !wasActive) {
                    setTimeout(() => {
                        if (typeof initHoneyGame === 'function') {
                            initHoneyGame();
                        }
                    }, 300);
                }

                // Pause game when leaving Chapter 2
                if (i === 1 && wasActive && i !== current) {
                    if (typeof pauseHoneyGame === 'function') {
                        pauseHoneyGame();
                    }
                }
            });

            indicator.textContent = `Chapter ${current + 1} of ${total}`;
            progress.style.width = `${((current + 1) / total) * 100}%`;
            document
                .querySelectorAll("[data-chapter-target]")
                .forEach((btn) =>
                    btn.classList.toggle(
                        "active",
                        parseInt(btn.dataset.chapterTarget, 10) === current + 1
                    )
                );

            // Smooth scroll to page
            pages[current].scrollIntoView({ behavior: "smooth", block: "start" });
        }

        nextBtn?.addEventListener("click", () => {
            if (current < total - 1) {
                current++;
                playPageTurn();
                updateUI();
            }
        });

        prevBtn?.addEventListener("click", () => {
            if (current > 0) {
                current--;
                playPageTurn();
                updateUI();
            }
        });

        // Allow clicking chapter pills directly
        document.querySelectorAll("[data-chapter-target]").forEach((btn) => {
            btn.addEventListener("click", () => {
                const target = parseInt(btn.dataset.chapterTarget, 10) - 1;
                if (!isNaN(target) && target >= 0 && target < total) {
                    current = target;
                    playPageTurn();
                    updateUI();
                }
            });
        });

        // Optional keyboard navigation - only works when NOT in Chapter 2
        document.addEventListener("keydown", (e) => {
            // Check if we're in the game chapter
            const gamePage = document.querySelector('.page[data-chapter="2"]');
            const isInGame = gamePage && gamePage.classList.contains('active');

            // Don't navigate chapters if we're in the game
            if (isInGame) return;

            if (e.key === "ArrowRight") nextBtn?.click();
            if (e.key === "ArrowLeft") prevBtn?.click();
        });

        // Make scrollToChapter globally accessible
        window.scrollToChapter = scrollToChapter;

        // Initialize
        updateUI();
    });

    // Settings Panel Functionality
    (function() {
        "use strict";

        const settingsButton = document.getElementById('settingsButton');
        const settingsOverlay = document.getElementById('settingsOverlay');
        const closeSettings = document.getElementById('closeSettings');
        const applySettingsBtn = document.getElementById('applySettingsBtn');
        const resetSettingsBtn = document.getElementById('resetSettingsBtn');

        // Settings elements
        const difficultySelect = document.getElementById('difficultySelect');
        const musicToggle = document.getElementById('musicToggle');
        const sfxToggle = document.getElementById('sfxToggle');
        const volumeSlider = document.getElementById('volumeSlider');
        const volumeValue = document.getElementById('volumeValue');
        const particlesToggle = document.getElementById('particlesToggle');
        const animationsToggle = document.getElementById('animationsToggle');
        const sensitivitySlider = document.getElementById('sensitivitySlider');
        const sensitivityValue = document.getElementById('sensitivityValue');
        const vibrationToggle = document.getElementById('vibrationToggle');
        const mobileControlsToggle = document.getElementById('mobileControlsToggle');
        const themeOptions = document.querySelectorAll('.theme-option');

        // Audio elements
        const bgMusic = document.getElementById('bgMusic');
        const ambientForest = document.getElementById('ambientForest');
        const honeySound = document.getElementById('honeySound');
        const pageSound = document.getElementById('pageSound');

        // Default settings
        const defaultSettings = {
            difficulty: 'medium',
            music: true,
            sfx: true,
            volume: 80,
            particles: true,
            animations: true,
            sensitivity: 260,
            vibration: false,
            mobileControls: true,
            theme: 'light'
        };

        // Current settings
        let currentSettings = { ...defaultSettings };
        let audioPrimed = false;

        const primeAudio = () => {
            audioPrimed = true;
            applySettingsToGame();
        };

        // Ensure browsers allow playback after the first interaction
        document.addEventListener('pointerdown', primeAudio, { once: true });
        document.addEventListener('keydown', primeAudio, { once: true });

        // Load saved settings from localStorage
        function loadSettings() {
            const saved = localStorage.getItem('honeyGameSettings');
            if (saved) {
                try {
                    currentSettings = { ...defaultSettings, ...JSON.parse(saved) };
                    applySettingsToUI();
                } catch (e) {
                    console.error('Error loading settings:', e);
                }
            }
            applySettingsToGame();
        }

        // Save settings to localStorage
        function saveSettings() {
            localStorage.setItem('honeyGameSettings', JSON.stringify(currentSettings));
        }

        // Apply settings to UI controls
        function applySettingsToUI() {
            difficultySelect.value = currentSettings.difficulty;
            musicToggle.checked = currentSettings.music;
            sfxToggle.checked = currentSettings.sfx;
            volumeSlider.value = currentSettings.volume;
            volumeValue.textContent = `${currentSettings.volume}%`;
            particlesToggle.checked = currentSettings.particles;
            animationsToggle.checked = currentSettings.animations;
            sensitivitySlider.value = currentSettings.sensitivity;
            sensitivityValue.textContent = currentSettings.sensitivity;
            vibrationToggle.checked = currentSettings.vibration;
            mobileControlsToggle.checked = currentSettings.mobileControls;

            // Set active theme
            themeOptions.forEach(option => {
                option.classList.remove('active');
                if (option.dataset.theme === currentSettings.theme) {
                    option.classList.add('active');
                }
            });

            // Apply theme to document
            applyTheme(currentSettings.theme);
        }

        // Apply settings to game
        function applySettingsToGame() {
            // Apply difficulty
            switch(currentSettings.difficulty) {
                case 'easy':
                    window.gameDifficulty = {
                        jarSpawnRate: 0.015,
                        jarSpeed: { min: 100, max: 180 },
                        beeSpawnRate: 0.008,
                        beeSpeed: { min: 80, max: 120 },
                        timeLimit: 90,
                        lives: 4
                    };
                    break;
                case 'medium':
                    window.gameDifficulty = {
                        jarSpawnRate: 0.02,
                        jarSpeed: { min: 150, max: 200 },
                        beeSpawnRate: 0.01,
                        beeSpeed: { min: 100, max: 150 },
                        timeLimit: 60,
                        lives: 3
                    };
                    break;
                case 'hard':
                    window.gameDifficulty = {
                        jarSpawnRate: 0.025,
                        jarSpeed: { min: 180, max: 250 },
                        beeSpawnRate: 0.015,
                        beeSpeed: { min: 120, max: 180 },
                        timeLimit: 45,
                        lives: 2
                    };
                    break;
                case 'expert':
                    window.gameDifficulty = {
                        jarSpawnRate: 0.03,
                        jarSpeed: { min: 200, max: 300 },
                        beeSpawnRate: 0.02,
                        beeSpeed: { min: 150, max: 220 },
                        timeLimit: 30,
                        lives: 1
                    };
                    break;
            }

            // Apply sensitivity to bear
            if (window.bear) {
                window.bear.speed = currentSettings.sensitivity;
            }

            // Apply volume to audio elements
            const volume = currentSettings.volume / 100;
            const audioElements = document.querySelectorAll('audio');
            audioElements.forEach(audio => {
                audio.volume = volume;
            });

            if (honeySound) honeySound.muted = !currentSettings.sfx;
            if (pageSound) pageSound.muted = !currentSettings.sfx;

            // Apply theme
            applyTheme(currentSettings.theme);

            // Apply animations
            document.body.classList.toggle('no-animations', !currentSettings.animations);

            // Apply mobile controls
            const mobileControls = document.getElementById('mobileControls');
            if (mobileControls) {
                if (currentSettings.mobileControls && ('ontouchstart' in window || navigator.maxTouchPoints > 0)) {
                    mobileControls.classList.add('visible');
                } else {
                    mobileControls.classList.remove('visible');
                }
            }

            // Toggle music
            if (bgMusic) {
                bgMusic.muted = !currentSettings.music;
                if (currentSettings.music && audioPrimed) {
                    bgMusic.play().catch(e => console.log('Audio play failed:', e));
                } else {
                    bgMusic.pause();
                }
            }

            if (ambientForest) {
                ambientForest.muted = !currentSettings.music;
                if (currentSettings.music && audioPrimed) {
                    ambientForest.play().catch(e => console.log('Audio play failed:', e));
                } else {
                    ambientForest.pause();
                }
            }
        }

        // Apply theme to document
        function applyTheme(theme) {
            // Remove existing theme classes
            document.documentElement.classList.remove('theme-light', 'theme-dark');

            // Determine actual theme (auto checks system preference)
            let actualTheme = theme;
            if (theme === 'auto') {
                actualTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
            }

            // Apply theme class
            document.documentElement.classList.add(`theme-${actualTheme}`);

            // Update theme colors
            if (actualTheme === 'dark') {
                document.documentElement.style.setProperty('--bg', '#1a1a1a');
                document.documentElement.style.setProperty('--bg-soft', '#2a2a2a');
                document.documentElement.style.setProperty('--ink', '#f0f0f0');
                document.documentElement.style.setProperty('--ink-soft', '#cccccc');
                document.documentElement.style.setProperty('--card-bg', '#2a2a2a');
                document.documentElement.style.setProperty('--border-soft', 'rgba(255, 255, 255, 0.1)');
            } else {
                // Reset to light theme
                document.documentElement.style.setProperty('--bg', '#fff9ec');
                document.documentElement.style.setProperty('--bg-soft', '#fff4dd');
                document.documentElement.style.setProperty('--ink', '#3b2604');
                document.documentElement.style.setProperty('--ink-soft', '#5a4330');
                document.documentElement.style.setProperty('--card-bg', '#ffffff');
                document.documentElement.style.setProperty('--border-soft', 'rgba(0, 0, 0, 0.06)');
            }
        }

        // Collect settings from UI
        function collectSettingsFromUI() {
            return {
                difficulty: difficultySelect.value,
                music: musicToggle.checked,
                sfx: sfxToggle.checked,
                volume: parseInt(volumeSlider.value),
                particles: particlesToggle.checked,
                animations: animationsToggle.checked,
                sensitivity: parseInt(sensitivitySlider.value),
                vibration: vibrationToggle.checked,
                mobileControls: mobileControlsToggle.checked,
                theme: document.querySelector('.theme-option.active').dataset.theme
            };
        }

        // Update game with new settings
        function updateGameSettings() {
            currentSettings = collectSettingsFromUI();
            saveSettings();
            applySettingsToGame();

            // Show confirmation
            showNotification('Settings applied!');
        }

        // Reset to defaults
        function resetToDefaults() {
            if (confirm('Reset all settings to defaults?')) {
                currentSettings = { ...defaultSettings };
                saveSettings();
                applySettingsToUI();
                applySettingsToGame();
                showNotification('Settings reset to defaults');
            }
        }

        // Show notification
        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(135deg, #f4b944, #f59e0b);
                color: #3b2604;
                padding: 12px 24px;
                border-radius: 999px;
                font-weight: 600;
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
                z-index: 1001;
                animation: slideDown 0.3s ease, slideUp 0.3s ease 2s forwards;
            `;

            document.body.appendChild(notification);

            // Remove after animation
            setTimeout(() => {
                notification.remove();
            }, 2300);
        }

        // Event Listeners
        settingsButton.addEventListener('click', () => {
            settingsOverlay.classList.add('visible');
            document.body.style.overflow = 'hidden';
        });

        closeSettings.addEventListener('click', () => {
            settingsOverlay.classList.remove('visible');
            document.body.style.overflow = '';
        });

        settingsOverlay.addEventListener('click', (e) => {
            if (e.target === settingsOverlay) {
                settingsOverlay.classList.remove('visible');
                document.body.style.overflow = '';
            }
        });

        applySettingsBtn.addEventListener('click', updateGameSettings);
        resetSettingsBtn.addEventListener('click', resetToDefaults);

        // Live updates for sliders
        volumeSlider.addEventListener('input', (e) => {
            volumeValue.textContent = `${e.target.value}%`;
        });

        sensitivitySlider.addEventListener('input', (e) => {
            sensitivityValue.textContent = e.target.value;
        });

        // Theme selection
        themeOptions.forEach(option => {
            option.addEventListener('click', () => {
                themeOptions.forEach(opt => opt.classList.remove('active'));
                option.classList.add('active');
            });
        });

        // Listen for system theme changes (for auto theme)
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (currentSettings.theme === 'auto') {
                applyTheme('auto');
            }
        });

        // Close with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && settingsOverlay.classList.contains('visible')) {
                settingsOverlay.classList.remove('visible');
                document.body.style.overflow = '';
            }
        });

        // Initialize settings
        window.addEventListener('load', loadSettings);

        // Make functions available globally
        window.applyGameSettings = applySettingsToGame;
        window.getGameSettings = () => currentSettings;
        window.showSettings = () => settingsButton.click();

    })();

</script>

<!-- Audio Elements -->
<audio id="bgMusic" loop preload="auto" src="media/hundred-acre-lullaby.mp3"></audio>
<audio id="honeySound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3">
</audio>
<audio id="pageSound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-page-turn-single-1100.mp3">
</audio>
<audio id="pageRustle1" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-page-turn-single-1100.mp3">
</audio>
<audio id="pageRustle2" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-page-turn-medium-1103.mp3">
</audio>
<audio id="paperThump" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-soft-ui-click-2577.mp3">
</audio>
<audio id="ambientForest" loop preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-forest-birds-ambience-121.mp3">
</audio>

</body>
</html>
