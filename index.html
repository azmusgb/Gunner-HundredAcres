<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0, viewport-fit=cover" name="viewport">
    <title>Baby Gunnar's Hundred Acre Wood Adventure</title>
    <meta content="A storybook-style Hundred Acre Wood adventure with a honey-catching game to celebrate Baby Gunnar." name="description">
    <meta content="#f4a944" name="theme-color">
    <meta content="light dark" name="color-scheme">
    <meta content="Baby Gunnar's Hundred Acre Wood Shower" property="og:title">
    <meta content="A sweet storybook and honey-catching game—read, play, and leave your wishes." property="og:description">
    <meta content="icons/icon.svg" property="og:image">
    <meta content="website" property="og:type">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link as="image" href="Images/Characters/Gunnar.png" rel="preload">

    <style>
        /* =========================================
           1. ROOT + GLOBAL LAYOUT
           ========================================= */
        :root {
            --bg: #fff9ec;
            --bg-soft: #fff4dd;
            --ink: #3b2604;
            --ink-soft: #5a4330;
            --accent: #f4b944;
            --accent-soft: #ffe4a8;
            --accent-strong: #f59e0b;
            --border-soft: rgba(0, 0, 0, 0.06);
            --card-bg: #ffffff;
            --card-radius: 24px;
            --shadow-soft: 0 18px 40px rgba(0, 0, 0, 0.16);
            --shadow-subtle: 0 8px 20px rgba(0, 0, 0, 0.08);
            --shadow-tiny: 0 2px 6px rgba(0, 0, 0, 0.08);
            --transition-fast: 0.18s ease-out;
            --transition-med: 0.28s ease;
            --page-max-width: 1120px;
            --page-padding-x: 1.5rem;
            --page-padding-y: 1.5rem;
            --font-body: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            --font-title: "Playfair Display", "Georgia", serif;
            --space-sm: 0.75rem;
            --space-md: 1.25rem;
            --touch-min: 44px;
            --touch-padding: 0.75rem;
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }

        html,
        body {
            margin: 0;
            padding: 0;
        }

        body {
            min-height: 100vh;
            font-family: var(--font-body);
            color: var(--ink);
            background: radial-gradient(circle at top, #fff4d4 0, #ffe5b0 28%, #ffe7c4 48%, #fff9ec 100%);
            -webkit-font-smoothing: antialiased;
            padding-left: env(safe-area-inset-left, 1rem);
            padding-right: env(safe-area-inset-right, 1rem);
            padding-top: env(safe-area-inset-top, 0);
            padding-bottom: env(safe-area-inset-bottom, 0);
        }

        /* Global touch targets */
        .hero-action-btn,
        .chapter-nav-btn,
        .footer-link,
        .submit-btn,
        .chapter-pill,
        .registry-card,
        .clickable-character,
        .btn {
            position: relative;
            min-height: var(--touch-min);
            min-width: var(--touch-min);
        }

        .footer-link,
        .chapter-nav-btn {
            padding: var(--touch-padding) calc(var(--touch-padding) * 1.5);
        }

        .hero-action-btn,
        .submit-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-icon,
        .pill-icon {
            padding: 0.25rem;
        }

        /* A11y helper */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }

        /* Simple text utilities */
        .divider {
            text-align: center;
            margin: 2rem 0;
            font-size: 0.95rem;
            opacity: 0.8;
        }

        /* =========================================
           2. DECORATIVE SCENE + CLOUDS
           ========================================= */
        .enhanced-scene {
            position: fixed;
            inset: 0;
            pointer-events: none;
            background:
                radial-gradient(circle at top left, rgba(255, 255, 255, 0.8), transparent 55%),
                radial-gradient(circle at top right, rgba(255, 243, 205, 0.8), transparent 50%),
                radial-gradient(circle at bottom, rgba(255, 220, 185, 0.9), transparent 60%);
            opacity: 0.6;
            z-index: -2;
        }

        .cloud-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            pointer-events: none;
            display: flex;
            justify-content: space-around;
            padding-top: 0.5rem;
            font-size: 1.8rem;
            opacity: 0.45;
            z-index: -1;
        }

        .cloud {
            animation: floatClouds 24s linear infinite;
        }

        .cloud:nth-child(2) {
            animation-delay: -8s;
        }

        .cloud:nth-child(3) {
            animation-delay: -16s;
        }

        @keyframes floatClouds {
            0% {
                transform: translate3d(-10px, 0, 0);
            }
            50% {
                transform: translate3d(10px, 4px, 0);
            }
            100% {
                transform: translate3d(-10px, 0, 0);
            }
        }

        /* =========================================
           3. HERO / MASTHEAD
           ========================================= */
        .masthead-hero {
            position: relative;
            padding-bottom: 2rem;
            color: var(--ink);
        }

        .hero-banner {
            position: relative;
            isolation: isolate;
            max-width: 1200px;
            margin: 0 auto 1.5rem;
            border-radius: 32px;
            overflow: hidden;
            box-shadow: var(--shadow-soft);
            background: linear-gradient(135deg, #ffe5b0, #ffd1a3);
            padding-top: env(safe-area-inset-top, 0);
        }

        .hero-image-container {
            position: relative;
            width: 100%;
            height: min(60vh, 520px);
            overflow: hidden;
        }

        .hero-banner__img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: saturate(1.05) contrast(1.03);
            transform: scale(1.02);
            transform-origin: center;
        }

        /* Corner emojis */
        .hero-corner-decoration {
            position: absolute;
            font-size: 1.8rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.16));
        }

        .hero-corner-decoration.top-left {
            top: 10px;
            left: 14px;
        }

        .hero-corner-decoration.top-right {
            top: 10px;
            right: 14px;
        }

        .hero-corner-decoration.bottom-left {
            bottom: 10px;
            left: 14px;
        }

        .hero-corner-decoration.bottom-right {
            bottom: 10px;
            right: 14px;
        }

        /* Title overlay */
        .hero-title-container {
            position: absolute;
            inset: auto 0 0;
            display: flex;
            justify-content: center;
            padding: 1.25rem 1.5rem 1.6rem;
            pointer-events: none;
        }

        .title-background {
            pointer-events: auto;
            max-width: 720px;
            width: 100%;
            padding: 1.25rem 1.5rem 1.5rem;
            border-radius: 24px 24px 0 0;
            background: linear-gradient(
                135deg,
                rgba(255, 255, 255, 0.99),
                rgba(255, 248, 225, 0.9)
            );
            box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.18);
            border: 1px solid rgba(255, 255, 255, 0.9);
            border-bottom: none;
        }

        .masthead-title {
            margin: 0 0 0.5rem;
            font-family: var(--font-title);
            letter-spacing: 0.04em;
            text-align: center;
        }

        .title-line {
            display: block;
        }

        .title-line--primary {
            font-size: clamp(1.3rem, 2vw + 1rem, 1.6rem);
            text-transform: uppercase;
            letter-spacing: 0.25em;
            opacity: 0.9;
        }

        .title-line--secondary {
            font-size: clamp(1.9rem, 3vw + 1.2rem, 2.4rem);
            font-weight: 700;
        }

        .title-underline {
            display: flex;
            justify-content: center;
            gap: 0.25rem;
            margin-bottom: 0.35rem;
        }

        .underline-dot {
            font-size: 0.95rem;
            color: var(--accent-strong);
        }

        .hero-subtitle {
            margin: 0;
            text-align: center;
            font-size: 0.95rem;
            color: var(--ink-soft);
        }

        /* Sparkles / bunting / sheen */
        .hero-sparkles {
            position: absolute;
            inset: 0;
            pointer-events: none;
            background:
                radial-gradient(circle at 10% 10%, rgba(255, 255, 255, 0.7), transparent 60%),
                radial-gradient(circle at 90% 30%, rgba(255, 225, 173, 0.7), transparent 55%);
            mix-blend-mode: screen;
            opacity: 0.6;
            z-index: -1;
        }

        .hero-bunting {
            max-width: 1200px;
            margin: 0.25rem auto 0;
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            font-size: 1.4rem;
        }

        .hero-sheen {
            position: absolute;
            inset: 0;
            pointer-events: none;
            background: linear-gradient(
                135deg,
                rgba(255, 255, 255, 0.16),
                transparent 60%
            );
            mix-blend-mode: screen;
            opacity: 0.8;
        }

        /* Hero inner panel */
        .masthead-hero-inner {
            max-width: var(--page-max-width);
            margin: 0.5rem auto 0;
            padding: 0 1.25rem;
            padding-left: max(var(--page-padding-x), env(safe-area-inset-left, 1rem));
            padding-right: max(var(--page-padding-x), env(safe-area-inset-right, 1rem));
        }

        .hero-panel {
            margin-top: 1.5rem;
            padding: 1.75rem 1.5rem;
            border-radius: var(--card-radius);
            background: rgba(255, 255, 255, 0.96);
            box-shadow: var(--shadow-subtle);
            border: 1px solid rgba(255, 255, 255, 0.8);
        }

        /* =========================================
           4. HERO BADGE + DETAIL GRID + CTA
           ========================================= */
        .hero-badge {
            display: grid;
            grid-template-columns: auto minmax(0, 1.5fr);
            gap: 1rem;
            padding: 1rem 1.25rem;
            border-radius: 999px;
            background: linear-gradient(135deg, #fffaf0, #ffe8bb);
            align-items: center;
            border: 1px solid rgba(244, 185, 68, 0.3);
            margin-bottom: 1.5rem;
        }

        .badge-icon {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .badge-icon-inner {
            width: 48px;
            height: 48px;
            border-radius: 999px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle at 30% 20%, #fff9e8, #f4b944);
            box-shadow: var(--shadow-tiny);
            font-size: 1.6rem;
        }

        .badge-copy {
            min-width: 0;
        }

        .badge-eyebrow {
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 0.16em;
            font-size: 0.7rem;
            opacity: 0.7;
        }

        .badge-label {
            margin: 0.15rem 0 0;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .badge-title {
            margin: 0.15rem 0 0;
            font-size: 1rem;
            font-weight: 700;
        }

        .badge-meta {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            justify-content: flex-end;
            align-items: center;
            font-size: 0.8rem;
        }

        .badge-pill {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            border-radius: 999px;
            padding: 0.3rem 0.7rem;
            background: rgba(255, 255, 255, 0.92);
            border: 1px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 2px 6px rgba(244, 185, 68, 0.25);
        }

        .pill-icon {
            font-size: 1rem;
        }

        .pill-text {
            white-space: nowrap;
        }

        /* Detail grid */
        .hero-details-grid {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .hero-detail {
            display: flex;
            gap: 0.75rem;
            padding: 0.85rem 1rem;
            border-radius: 16px;
            background: #fffdfa;
            box-shadow: 0 4px 12px rgba(244, 185, 68, 0.12);
        }

        .detail-icon {
            font-size: 1.5rem;
        }

        .detail-title {
            margin: 0;
            font-size: 0.95rem;
            font-weight: 600;
        }

        .detail-text {
            margin: 0.15rem 0 0;
            font-size: 0.85rem;
            color: var(--ink-soft);
        }

        /* Hero CTAs */
        .hero-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .hero-action-btn {
            border-radius: 999px;
            border: none;
            padding: 0.6rem 1.1rem;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            cursor: pointer;
            transition: transform var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast);
        }

        .hero-action-btn .btn-icon {
            font-size: 1.1rem;
        }

        .hero-action-btn.primary {
            background: linear-gradient(135deg, #f4b944, #f59e0b);
            color: #3b2604;
            box-shadow: 0 8px 18px rgba(244, 185, 68, 0.6);
        }

        .hero-action-btn.secondary {
            background: #ffffff;
            color: var(--ink);
            box-shadow: var(--shadow-tiny);
            border: 1px solid rgba(0, 0, 0, 0.06);
        }

        .hero-action-btn.ghost {
            background: transparent;
            color: var(--ink-soft);
            border: 1px dashed rgba(0, 0, 0, 0.16);
        }

        .hero-action-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 22px rgba(0, 0, 0, 0.14);
        }

        /* Orientation hint */
        .orientation-hint {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            padding-top: 0.5rem;
            border-top: 1px dashed rgba(0, 0, 0, 0.08);
            margin-top: 0.5rem;
            font-size: 0.83rem;
            color: var(--ink-soft);
        }

        .hint-icon {
            font-size: 1.4rem;
        }

        /* =========================================
           5. CHAPTER TRACKER
           ========================================= */
        .chapter-tracker {
            margin: 1rem 0 0.75rem;
        }

        .tracker-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .tracker-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.16em;
            opacity: 0.7;
            white-space: nowrap;
        }

        /* Progress bar */
        .book-progress {
            position: relative;
            flex: 1;
            height: 0.4rem;
            border-radius: 999px;
            background: rgba(0, 0, 0, 0.06);
            overflow: hidden;
        }

        .book-progress .progress-fill {
            width: 0%;
            height: 100%;
            border-radius: inherit;
            background: linear-gradient(90deg, #f4b944, #f97316);
            transition: width 0.25s ease-out;
        }

        .chapter-pill-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.25rem;
        }

        .chapter-pill {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.4rem 0.9rem;
            border-radius: 999px;
            border: 1px solid rgba(0, 0, 0, 0.08);
            background: #ffffff;
            box-shadow: var(--shadow-tiny);
            cursor: pointer;
            font-size: 0.85rem;
        }

        .chapter-pill .pill-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 1.7rem;
            height: 1.7rem;
            border-radius: 999px;
            background: #fff7dd;
            font-weight: 700;
            font-size: 0.85rem;
        }

        .chapter-pill .pill-text {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .chapter-pill .pill-title {
            font-weight: 600;
            font-size: 0.85rem;
        }

        .chapter-pill .pill-detail {
            font-size: 0.75rem;
            opacity: 0.76;
        }

        .chapter-pill.active {
            border-color: #f4b944;
            background: linear-gradient(135deg, #fff8dd, #ffe4af);
        }

        /* Sparkle accent */
        .sparkle {
            position: relative;
        }

        .sparkle::after {
            content: "";
            position: absolute;
            inset: -2px;
            border-radius: inherit;
            border: 1px solid rgba(255, 255, 255, 0.7);
            opacity: 0;
            pointer-events: none;
            animation: sparklePulse 2.8s ease-in-out infinite;
        }

        .chapter-pill.active.sparkle::after {
            opacity: 1;
        }

        @keyframes sparklePulse {
            0%,
            100% {
                transform: scale(1);
                opacity: 0.4;
            }
            50% {
                transform: scale(1.03);
                opacity: 1;
            }
        }

        /* =========================================
           6. BOOK LAYOUT + PAGES
           ========================================= */
        .book-container {
            max-width: var(--page-max-width);
            margin: 1.25rem auto 3rem;
            padding: 0 var(--page-padding-x);
            padding-left: max(var(--page-padding-x), env(safe-area-inset-left, 1rem));
            padding-right: max(var(--page-padding-x), env(safe-area-inset-right, 1rem));
        }

        .book {
            margin-top: 1rem;
            border-radius: var(--card-radius);
            background: #fffdf8;
            box-shadow: var(--shadow-soft);
            border: 1px solid rgba(255, 255, 255, 0.9);
            overflow: hidden;
        }

        .pages-wrapper {
            position: relative;
            padding: var(--page-padding-y) var(--page-padding-x);
        }

        /* Page cards */
        .page {
            display: none;
            opacity: 0;
            transform: translateY(4px);
            transition: opacity var(--transition-med), transform var(--transition-med);
        }

        .page.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .chapter-header {
            text-align: center;
            margin-bottom: 1.5rem;
            position: relative;
        }

        .chapter-number {
            margin: 0;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.22em;
            opacity: 0.7;
        }

        .chapter-title {
            margin: 0.4rem 0 0.25rem;
            font-family: var(--font-title);
            font-size: 1.6rem;
        }

        .chapter-subtitle {
            margin: 0;
            font-size: 0.95rem;
            color: var(--ink-soft);
        }

        .honey-drip {
            position: absolute;
            bottom: -0.4rem;
            left: 50%;
            transform: translateX(-50%);
            width: 110px;
            height: 12px;
            border-radius: 999px;
            background: linear-gradient(90deg, #fbbf24, #f97316);
            opacity: 0.5;
        }

        /* Page body */
        .page-content {
            margin-top: 1.75rem;
        }

        .story-text {
            margin: 0 0 1rem;
            line-height: 1.7;
            font-size: 0.98rem;
        }

        /* =========================================
           7. FIGURES / CHARACTER CARDS
           ========================================= */
        .chapter-illustrations {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 1.25rem 0 1.5rem;
        }

        .storybook-figure {
            flex: 1 1 180px;
            min-width: 0;
            padding: 0.75rem 0.85rem;
            border-radius: 18px;
            background: #ffffff;
            box-shadow: var(--shadow-tiny);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .storybook-figure img {
            border-radius: 16px;
            background: #fff6dc;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.16);
            max-width: 96px;
            max-height: 96px;
        }

        .figure-copy {
            min-width: 0;
        }

        .figure-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .figure-note {
            margin: 0.15rem 0 0;
            font-size: 0.8rem;
            color: var(--ink-soft);
        }

        /* Theme tints */
        .figure-theme-honey {
            background: linear-gradient(135deg, #fff7dd, #ffe7b8);
        }

        .figure-theme-forest {
            background: linear-gradient(135deg, #e5f4dd, #f3ffe3);
        }

        .figure-theme-sky {
            background: linear-gradient(135deg, #e5f4ff, #f3f9ff);
        }

        /* Clickable characters */
        .clickable-character {
            cursor: pointer;
            transition: transform var(--transition-fast), box-shadow var(--transition-fast);
        }

        .clickable-character:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 22px rgba(0, 0, 0, 0.18);
        }

        /* Character message bubble */
        .character-message {
            margin-top: 0.5rem;
            font-size: 0.8rem;
            color: var(--ink);
        }

        /* Dialogue bubbles in narrative */
        .dialogue-bubble {
            position: relative;
            margin: 1rem 0 1.25rem;
            padding: 0.7rem 0.9rem;
            border-radius: 16px;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .dialogue-piglet {
            background: #fff0f5;
        }

        .dialogue-pooh {
            background: #fff5dd;
        }

        .dialogue-bubble .speaker {
            display: block;
            margin-top: 0.3rem;
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .bubble-arrow {
            position: absolute;
            left: 18px;
            bottom: 100%;
            width: 12px;
            height: 12px;
            background: inherit;
            transform: translateY(1px) rotate(45deg);
        }

        /* =========================================
           8. GAME EMBED + HONEY GAME
           ========================================= */
        .game-embed {
            margin: 1.5rem auto;
            max-width: 960px;
            width: 100%;
            border-radius: 24px;
            overflow: hidden;
            background: #000;
            box-shadow: var(--shadow-soft);
            border: 2px solid rgba(0, 0, 0, 0.08);
            position: relative;
            min-height: 320px;
        }

        .game-embed::before {
            content: 'Loading game…';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, #ffe5b0, #ffd1a3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--ink);
            z-index: 1;
            opacity: 1;
            transition: opacity 0.3s ease;
        }

        .game-embed.loaded::before {
            opacity: 0;
            pointer-events: none;
        }

        .honey-game {
            position: relative;
            display: flex;
            flex-direction: column;
            height: 100%;
            min-height: 320px;
            background: radial-gradient(circle at top, #fff8e1 0, #ffe0b2 45%, #f6b26b 100%);
            color: #2c1810;
        }

        .honey-game-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.6rem 0.9rem;
            font-size: 0.85rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(255, 248, 225, 0.9));
        }

        .honey-game-header .title {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .honey-game-header .title span {
            font-weight: 600;
        }

        .hud-row {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .hud-item {
            padding: 0.2rem 0.6rem;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: var(--shadow-tiny);
        }

        .hud-label {
            font-size: 0.75rem;
            opacity: 0.7;
            margin-right: 0.2rem;
        }

        .session-banner {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            padding: 0.25rem 0.75rem 0.5rem;
        }

        .session-chip {
            background: linear-gradient(135deg, rgba(244, 185, 68, 0.15), rgba(244, 185, 68, 0.05));
            border: 1px solid rgba(244, 185, 68, 0.4);
            border-radius: 999px;
            padding: 6px 12px;
            font-weight: 700;
            color: var(--ink);
            box-shadow: var(--shadow-tiny);
        }

        .progress-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 10px;
            padding: 0 0.75rem 0.75rem;
        }

        .progress-card {
            background: rgba(255, 255, 255, 0.92);
            border: 1px solid rgba(0, 0, 0, 0.06);
            border-radius: 12px;
            padding: 10px 12px;
            box-shadow: var(--shadow-subtle);
        }

        .progress-labels {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 700;
            color: var(--ink);
        }

        .progress-subtitle {
            font-size: 0.9rem;
            color: var(--ink-soft);
        }

        .progress-track {
            position: relative;
            height: 10px;
            border-radius: 999px;
            background: rgba(0, 0, 0, 0.06);
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-track.streak {
            background: rgba(56, 189, 248, 0.12);
        }

        .progress-fill {
            position: absolute;
            inset: 0;
            width: 0;
            background: linear-gradient(90deg, #f59e0b 0%, #f97316 100%);
            border-radius: inherit;
            transition: width 0.2s ease;
        }

        .progress-track.streak .progress-fill {
            background: linear-gradient(90deg, #38bdf8 0%, #0ea5e9 100%);
        }

        .progress-fill.low {
            background: linear-gradient(90deg, #f97316 0%, #ef4444 100%);
        }

        .status-chips {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            align-items: center;
        }

        .status-chip {
            background: rgba(56, 189, 248, 0.08);
            color: var(--ink);
            border: 1px solid rgba(56, 189, 248, 0.5);
            border-radius: 10px;
            padding: 6px 10px;
            font-weight: 700;
            opacity: 0;
            transform: translateY(-4px);
            transition: opacity 0.2s ease, transform 0.2s ease;
        }

        .status-chip.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .honey-game-main {
            position: relative;
            flex: 1;
            display: flex;
            align-items: stretch;
            justify-content: center;
            padding: 0.6rem 0.6rem 0.4rem;
        }

        #gameCanvas {
            border-radius: 18px;
            background: linear-gradient(to top, #f4a261 0%, #f4e1a1 40%, #87ceeb 100%);
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.3);
            max-width: 100%;
            max-height: 100%;
        }

        .honey-game-controls {
            padding: 0.4rem 0.6rem 0.7rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(255, 248, 225, 0.9));
        }

        .control-btn {
            border-radius: 999px;
            border: 1px solid rgba(0, 0, 0, 0.14);
            padding: 0.4rem 0.9rem;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            background: #ffffff;
            box-shadow: var(--shadow-tiny);
            min-width: 80px;
        }

        .control-btn.primary {
            border-color: transparent;
            background: linear-gradient(135deg, #f4b944, #f59e0b);
            color: #3b2604;
            box-shadow: 0 6px 16px rgba(244, 185, 68, 0.6);
        }

        .control-btn:active {
            transform: translateY(1px);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.18);
        }

        .control-btn-icon {
            margin-right: 0.3rem;
        }

        /* Game description */
        .game-description {
            margin-top: 1.5rem;
        }

        .game-description h3 {
            margin: 0 0 0.5rem;
        }

        .game-tips {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 0.9rem;
            margin-top: 0.75rem;
        }

        .tip {
            display: flex;
            gap: 0.5rem;
            padding: 0.7rem 0.8rem;
            border-radius: 16px;
            background: #fffdfa;
            box-shadow: var(--shadow-tiny);
            font-size: 0.85rem;
        }

        .tip-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        /* =========================================
           9. REGISTRY + NURSERY DETAILS + WISHES
           ========================================= */
        .registry-container {
            margin: 2rem 0 1.75rem;
        }

        .registry-section {
            padding: 1.25rem 1.3rem;
            border-radius: 22px;
            background: linear-gradient(135deg, #fffaf3, #ffeede);
            box-shadow: var(--shadow-subtle);
        }

        .registry-header {
            display: flex;
            gap: 0.8rem;
            align-items: center;
            margin-bottom: 1rem;
        }

        .registry-icon {
            font-size: 1.8rem;
        }

        .registry-subtitle {
            margin: 0.2rem 0 0;
            font-size: 0.9rem;
            color: var(--ink-soft);
        }

        .registry-grid {
            display: grid;
            grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.2fr);
            gap: 1rem;
        }

        .registry-card {
            display: flex;
            gap: 0.75rem;
            padding: 0.9rem 1rem;
            border-radius: 18px;
            background: #ffffff;
            text-decoration: none;
            color: inherit;
            box-shadow: var(--shadow-tiny);
            transition: transform var(--transition-fast), box-shadow var(--transition-fast);
        }

        .registry-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.18);
        }

        .registry-card .card-icon {
            font-size: 1.5rem;
        }

        .registry-card .card-content h4 {
            margin: 0 0 0.2rem;
            font-size: 0.95rem;
        }

        .registry-card .card-content p {
            margin: 0;
            font-size: 0.85rem;
            color: var(--ink-soft);
        }

        .registry-card .card-link {
            display: inline-block;
            margin-top: 0.3rem;
            font-size: 0.8rem;
            color: #b45309;
        }

        .gift-idea-card {
            flex-direction: column;
        }

        .gift-ideas {
            margin: 0.25rem 0 0;
            padding-left: 1.1rem;
            font-size: 0.85rem;
        }

        /* Nursery details grid */
        .nursery-details {
            margin: 2rem 0 1.75rem;
        }

        .nursery-details h3 {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
            gap: 1rem;
            margin-top: 0.9rem;
        }

        .detail-card {
            padding: 0.85rem 1rem;
            border-radius: 18px;
            background: #ffffff;
            box-shadow: var(--shadow-tiny);
            display: flex;
            gap: 0.7rem;
        }

        .detail-card .detail-icon {
            font-size: 1.4rem;
        }

        /* Wishes section */
        .wishes-section {
            margin: 1.75rem 0 1.5rem;
        }

        .wishes-header h3 {
            margin-bottom: 0.3rem;
        }

        .wishes-header p {
            margin: 0;
            font-size: 0.9rem;
            color: var(--ink-soft);
        }

        .wishes-form-container {
            margin-top: 1rem;
        }

        .enhanced-form {
            padding: 1rem 1rem 1.1rem;
            border-radius: 18px;
            background: #fffdf8;
            box-shadow: var(--shadow-tiny);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: var(--space-md);
            margin-bottom: 0.75rem;
        }

        .form-field label {
            display: block;
            margin-bottom: 0.15rem;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .form-field input,
        .form-field select,
        .form-field textarea {
            width: 100%;
            padding: 0.55rem 0.6rem;
            border-radius: 10px;
            border: 1px solid rgba(0, 0, 0, 0.14);
            font-family: inherit;
            font-size: 0.9rem;
            background: rgba(255, 255, 255, 0.96);
        }

        .form-field textarea {
            resize: vertical;
        }

        .character-count {
            margin-top: 0.25rem;
            font-size: 0.75rem;
            text-align: right;
            color: var(--ink-soft);
        }

        .form-actions {
            margin-top: 0.6rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            align-items: center;
        }

        .submit-btn {
            border-radius: 999px;
            border: none;
            padding: 0.55rem 1.1rem;
            background: linear-gradient(135deg, #f4b944, #f59e0b);
            color: #3b2604;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            box-shadow: 0 6px 16px rgba(244, 185, 68, 0.6);
            transition: transform var(--transition-fast), box-shadow var(--transition-fast);
        }

        .submit-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 22px rgba(244, 185, 68, 0.7);
        }

        .form-feedback {
            font-size: 0.8rem;
            color: var(--ink-soft);
        }

        /* Sample wishes */
        .sample-wishes {
            margin-top: 1rem;
        }

        .wish-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
            gap: 0.8rem;
        }

        .wish-example {
            margin: 0;
            padding: 0.7rem 0.9rem;
            border-radius: 14px;
            background: #ffffff;
            box-shadow: var(--shadow-tiny);
            font-size: 0.85rem;
        }

        .wish-example cite {
            display: block;
            margin-top: 0.3rem;
            font-size: 0.8rem;
            opacity: 0.8;
        }

        /* Dynamic wishes display */
        .wishes-display {
            margin-top: 1.25rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
            gap: 0.9rem;
        }

        .wishes-display .wish-card {
            padding: 0.8rem 0.9rem;
            border-radius: 16px;
            background: #fffdfa;
            box-shadow: var(--shadow-tiny);
            font-size: 0.9rem;
        }

        .wish-card .wish-meta {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-bottom: 0.25rem;
        }

        /* =========================================
           10. CHAPTER 4 CELEBRATION / COUNTDOWN
           ========================================= */
        .welcome-panel {
            margin: 1.75rem 0 1.5rem;
            padding: 1rem 1.1rem;
            border-radius: 20px;
            background: linear-gradient(135deg, #fff6dd, #ffe4b2);
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .welcome-icon {
            font-size: 1.7rem;
        }

        .welcome-heading {
            margin: 0;
        }

        .welcome-subtitle {
            margin: 0.2rem 0 0;
            font-size: 0.9rem;
            color: var(--ink-soft);
        }

        /* Countdown */
        .countdown-section {
            margin: 1.5rem 0 1.75rem;
        }

        .countdown-display {
            display: flex;
            gap: 1rem;
            margin: 0.7rem 0;
        }

        .countdown-item {
            flex: 0 0 90px;
            padding: 0.7rem 0.8rem;
            border-radius: 16px;
            background: #ffffff;
            box-shadow: var(--shadow-tiny);
            text-align: center;
        }

        .countdown-number {
            display: block;
            font-size: 1.35rem;
            font-weight: 700;
        }

        .countdown-label {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .countdown-note {
            margin: 0;
            font-size: 0.9rem;
            color: var(--ink-soft);
        }

        /* Honey jar hopes */
        .honey-jar-interactive {
            margin: 1.75rem 0 1.5rem;
            padding: 1rem 1.1rem;
            border-radius: 20px;
            background: #fffdf5;
            box-shadow: var(--shadow-tiny);
        }

        .honey-jar-interactive h3 {
            margin: 0.3rem 0 0.3rem;
        }

        .honey-jar-interactive p {
            margin: 0 0 0.6rem;
        }

        .hopes-list {
            margin: 0.5rem 0 0;
            padding-left: 1.1rem;
            font-size: 0.9rem;
        }

        /* Generic button used here */
        .btn {
            border-radius: 999px;
            border: 1px solid rgba(0, 0, 0, 0.14);
            padding: 0.5rem 1.1rem;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            background: #ffffff;
            box-shadow: var(--shadow-tiny);
            transition: transform var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast);
        }

        .btn.primary {
            border-color: transparent;
            background: linear-gradient(135deg, #f4b944, #f59e0b);
            color: #3b2604;
            box-shadow: 0 6px 16px rgba(244, 185, 68, 0.6);
        }

        .btn.primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 22px rgba(244, 185, 68, 0.7);
        }

        /* Final quote */
        .final-thought {
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px dashed rgba(0, 0, 0, 0.12);
        }

        .final-thought blockquote {
            margin: 0;
            font-size: 0.95rem;
            font-style: italic;
        }

        .final-thought cite {
            font-style: normal;
        }

        .final-thought .signature {
            margin-top: 0.6rem;
            font-size: 0.9rem;
        }

        /* =========================================
           11. NAVIGATION BUTTONS (Prev / Next)
           ========================================= */
        .chapter-nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.75rem;
            padding: 0.85rem 1.25rem 1.1rem;
            border-top: 1px solid rgba(0, 0, 0, 0.06);
            background: rgba(255, 255, 255, 0.96);
        }

        .chapter-nav-btn {
            border-radius: 999px;
            border: 1px solid rgba(0, 0, 0, 0.18);
            padding: 0.45rem 0.9rem;
            font-size: 0.9rem;
            cursor: pointer;
            background: #ffffff;
            box-shadow: var(--shadow-tiny);
            transition: transform var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast);
        }

        .chapter-nav-btn.next {
            border-color: transparent;
            background: linear-gradient(135deg, #f4b944, #f59e0b);
            color: #3b2604;
        }

        .chapter-nav-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.16);
        }

        .chapter-indicator {
            font-size: 0.9rem;
            color: var(--ink-soft);
        }

        /* =========================================
           12. FOOTER
           ========================================= */
        .site-footer {
            max-width: var(--page-max-width);
            margin: 0 auto 2rem;
            padding: 1.25rem var(--page-padding-x) 0;
            text-align: center;
            font-size: 0.85rem;
            color: var(--ink-soft);
        }

        .footer-links {
            margin-top: 0.5rem;
            display: flex;
            justify-content: center;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .footer-link {
            border-radius: 999px;
            border: 1px solid rgba(0, 0, 0, 0.16);
            padding: 0.35rem 0.8rem;
            font-size: 0.8rem;
            background: #ffffff;
            cursor: pointer;
            box-shadow: var(--shadow-tiny);
        }

        /* =========================================
           13. ANIMATIONS TOGGLE
           ========================================= */
        body.animations-off .cloud {
            animation: none !important;
        }

        body.animations-off .chapter-pill.sparkle::after {
            display: none;
        }

        /* =========================================
           14. GAME SPECIFIC STYLES (QUICK WINS)
           ========================================= */
        .game-container {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease;
        }

        .overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .overlay-content {
            background: linear-gradient(135deg, #1e293b, #0f172a);
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            border: 3px solid #fbbf24;
            color: white;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.visible {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, #1e293b, #0f172a);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            border: 3px solid #fbbf24;
            color: white;
            position: relative;
        }

        .game-top-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            z-index: 50;
            align-items: center;
        }

        .btn-icon {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #fbbf24;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fbbf24;
            cursor: pointer;
            font-size: 18px;
            backdrop-filter: blur(10px);
        }

        .modal-close {
            position: absolute;
            top: 12px;
            right: 12px;
            background: none;
            border: none;
            color: inherit;
            font-size: 1.2rem;
            cursor: pointer;
        }

        .help-actions {
            display: flex;
            justify-content: center;
            margin: 10px 0;
        }

        .floating-score {
            position: absolute;
            font-weight: bold;
            font-size: 24px;
            pointer-events: none;
            z-index: 100;
            animation: floatUp 1s ease-out forwards;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(0);
                opacity: 1;
            }
            100% {
                transform: translateY(-50px);
                opacity: 0;
            }
        }

        .floating-score.normal { color: #84cc16; }
        .floating-score.gold { color: #fbbf24; }
        .floating-score.shield { color: #60a5fa; }
        .floating-score.powerup { color: #22c55e; }
        .floating-score.combo { color: #f97316; }

        .difficulty-indicator {
            animation: fadeOut 1.5s ease forwards;
        }

        @keyframes fadeOut {
            0% { opacity: 1; }
            70% { opacity: 1; }
            100% { opacity: 0; }
        }

        .share-success {
            animation: pulseSuccess 0.5s ease;
        }

        @keyframes pulseSuccess {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Settings Modal Styles */
        #settingsModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        #settingsModal.visible {
            display: flex;
        }
        
        #settingsPanel {
            background: linear-gradient(135deg, #1e293b, #0f172a);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            border: 3px solid #fbbf24;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }
        
        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .settings-header h2 {
            color: #fbbf24;
            font-size: 28px;
            margin: 0;
        }
        
        .settings-close {
            background: none;
            border: none;
            color: #fbbf24;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
            border-radius: 5px;
        }
        
        .settings-close:hover {
            background-color: rgba(251, 191, 36, 0.1);
        }
        
        .settings-group {
            margin-bottom: 25px;
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
        }
        
        .settings-group h3 {
            color: #fbbf24;
            font-size: 20px;
            margin: 0 0 15px 0;
        }
        
        .settings-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .settings-row:last-child {
            border-bottom: none;
        }
        
        .settings-label {
            color: white;
            font-size: 16px;
            font-weight: bold;
        }
        
        .toggle-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #fbbf24;
            border-radius: 50px;
            width: 60px;
            height: 30px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .toggle-btn[data-on="true"] {
            background-color: #fbbf24;
        }
        
        .toggle-btn::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 22px;
            height: 22px;
            background-color: white;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .toggle-btn[data-on="true"]::after {
            left: calc(100% - 25px);
        }
        
        .diff-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #fbbf24;
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .diff-btn:hover {
            background: rgba(251, 191, 36, 0.2);
        }
        
        .diff-btn.active {
            background-color: #fbbf24;
            color: #1e293b;
        }
        
        .settings-btn {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #1e293b;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            width: 100%;
            justify-content: center;
            margin-top: 10px;
        }
        
        .settings-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(251, 191, 36, 0.4);
        }
        
        .settings-btn.danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }
        
        .settings-btn.danger:hover {
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.4);
        }

        /* =========================================
           15. RESPONSIVE TWEAKS
           ========================================= */
        @media (max-width: 900px) {
            .hero-banner {
                border-radius: 0;
                box-shadow: none;
            }

            .hero-image-container {
                height: min(50vh, 420px);
            }

            .hero-title-container {
                padding-inline: 1rem;
            }

            .title-background {
                border-radius: 20px 20px 0 0;
            }

            .hero-panel {
                margin-top: 1rem;
                padding: 1.25rem 1rem 1.4rem;
            }

            .hero-badge {
                grid-template-columns: 1fr;
                border-radius: 20px;
            }

            .hero-details-grid {
                grid-template-columns: minmax(0, 1fr);
            }

            .registry-grid {
                grid-template-columns: minmax(0, 1fr);
            }
        }

        @media (max-width: 768px) {
            .book-container {
                padding-inline: 1rem;
            }

            .pages-wrapper {
                padding-inline: 1rem;
            }

            .form-grid {
                grid-template-columns: 1fr;
                gap: var(--space-sm);
            }

            input[type="text"],
            input[type="email"],
            input[type="tel"],
            textarea,
            select {
                font-size: 16px !important;
            }

            .form-field input,
            .form-field select,
            .form-field textarea {
                padding: 0.75rem 0.85rem;
                min-height: var(--touch-min);
            }

            .chapter-illustrations {
                flex-direction: column;
            }

            .hero-actions {
                flex-direction: column;
                align-items: stretch;
            }

            .hero-action-btn {
                justify-content: center;
            }

            .countdown-display {
                justify-content: center;
            }

            .hud-row {
                flex-wrap: wrap;
            }

            .overlay-content {
                padding: 1.5rem;
                margin: 1rem;
            }
            
            .modal-content {
                padding: 20px;
                margin: 1rem;
            }
        }
        
        /* Power-up indicators */
        .powerup-indicators {
            position: absolute;
            top: 80px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
        }

        .powerup-indicator {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            position: relative;
            opacity: 0.3;
            transition: all 0.3s ease;
            transform: scale(0.9);
        }

        .powerup-indicator.active {
            opacity: 1;
            transform: scale(1);
            box-shadow: 0 0 20px currentColor;
        }

        .powerup-indicator[data-type="DOUBLE_POINTS"] {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #78350f;
        }

        .powerup-indicator[data-type="SLOW_TIME"] {
            background: linear-gradient(135deg, #60a5fa, #3b82f6);
            color: white;
        }

        .powerup-indicator[data-type="MAGNET"] {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        .powerup-indicator[data-type="BEE_REPELLENT"] {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
        }

        .powerup-timer {
            position: absolute;
            bottom: -8px;
            left: 5px;
            right: 5px;
            height: 3px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            overflow: hidden;
        }

        .powerup-timer::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: white;
            width: 100%;
            transition: width linear;
        }

        /* Achievement popups */
        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #78350f;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: none;
            align-items: center;
            gap: 15px;
            min-width: 300px;
            animation: achievementPopup 3s ease forwards;
            border: 3px solid #78350f;
        }

        @keyframes achievementPopup {
            0% { opacity: 0; transform: translate(-50%, -40%); }
            10% { opacity: 1; transform: translate(-50%, -50%); }
            90% { opacity: 1; transform: translate(-50%, -50%); }
            100% { opacity: 0; transform: translate(-50%, -60%); }
        }

        .achievement-icon {
            font-size: 40px;
            filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.2));
        }

        .achievement-text {
            flex: 1;
        }

        .achievement-title {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 5px;
        }

        .achievement-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .achievement-desc {
            font-size: 14px;
            opacity: 0.9;
        }

        /* Daily challenge panel */
        .daily-challenge-panel {
            position: absolute;
            top: 80px;
            left: 20px;
            background: rgba(30, 41, 59, 0.9);
            border-radius: 15px;
            padding: 15px;
            color: white;
            width: 250px;
            backdrop-filter: blur(10px);
            border: 2px solid #fbbf24;
            z-index: 50;
        }

        .daily-challenge-title {
            font-weight: bold;
            color: #fbbf24;
            margin-bottom: 10px;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .daily-challenge-title::before {
            content: '🏆';
            font-size: 14px;
        }

        .daily-challenge-progress {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }

        .daily-challenge-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .daily-challenge-reward {
            font-size: 12px;
            color: #fbbf24;
            margin-top: 8px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Evolution display */
        .evolution-display {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(30, 41, 59, 0.9);
            border-radius: 15px;
            padding: 8px 20px;
            color: white;
            backdrop-filter: blur(10px);
            border: 2px solid #fbbf24;
            z-index: 50;
            font-weight: bold;
            display: none;
            align-items: center;
            gap: 10px;
        }

        .evolution-level {
            color: #fbbf24;
            font-size: 18px;
        }

        .evolution-name {
            font-size: 14px;
        }

        @keyframes slideDown {
            from { transform: translate(-50%, -20px); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translate(-50%, 0); opacity: 1; }
            to { transform: translate(-50%, -20px); opacity: 0; }
        }
        /* Add these styles: */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
}

/* Floating scores animation */
.floating-score {
    position: absolute;
    font-weight: bold;
    font-size: 24px;
    pointer-events: none;
    z-index: 100;
    animation: floatUp 1s ease-out forwards;
}

@keyframes floatUp {
    0% {
        transform: translateY(0);
        opacity: 1;
    }
    100% {
        transform: translateY(-50px);
        opacity: 0;
    }
}

.floating-score.normal { color: #84cc16; }
.floating-score.gold { color: #fbbf24; }
.floating-score.shield { color: #60a5fa; }
.floating-score.powerup { color: #22c55e; }
.floating-score.combo { color: #f97316; }

/* Tutorial styles */
.tutorial-step {
    display: none;
    text-align: center;
}

.tutorial-step.active {
    display: block;
}

.tutorial-navigation {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
}

/* Game instructions list */
.game-instructions {
    list-style: none;
    padding: 0;
    text-align: left;
}

.game-instructions li {
    margin-bottom: 10px;
    padding-left: 20px;
    position: relative;
}

.game-instructions li:before {
    content: "🍯";
    position: absolute;
    left: 0;
}

/* Responsive game controls */
@media (max-width: 768px) {
    .honey-game-controls {
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .control-btn {
        min-width: 70px;
        font-size: 0.8rem;
    }
}
    </style>

    <link as="image" href="Images/Characters/Gunnar.png" rel="preload">
</head>
<body>
<!-- Decorative Elements -->
<div aria-hidden="true" class="enhanced-scene" id="enhancedScene"></div>
<div aria-hidden="true" class="cloud-layer">
    <div class="cloud">Cloud</div>
    <div class="cloud">Cloud</div>
    <div class="cloud">Cloud</div>
</div>
<!-- Hero Header -->
<header class="masthead-hero hero-enhancements">
    <!-- Hero Banner with Image and Title Overlay -->
    <div class="hero-banner">
        <div class="hero-image-container">
            <picture>
                <source sizes="100vw"
                        srcset="Images/Characters/Gunnar.png 800w, Images/Characters/Gunnar.png 1200w, Images/Characters/Gunnar.png 1600w">
                <img alt="Baby Gunnar with Hundred Acre Wood friends in the Hundred Acre Wood" class="hero-banner__img" height="900" loading="eager"
                     src="Images/Characters/Gunnar.png" width="1600">
            </picture>
            <!-- Decorative corner elements -->
            <div aria-hidden="true" class="hero-corner-decoration top-left">Tree</div>
            <div aria-hidden="true" class="hero-corner-decoration top-right">Honey</div>
            <div aria-hidden="true" class="hero-corner-decoration bottom-left">Heart</div>
            <div aria-hidden="true" class="hero-corner-decoration bottom-right">Bee</div>
        </div>
        <!-- Title Container with Background -->
        <div class="hero-title-container">
            <div class="title-background">
                <h1 class="masthead-title">
                    <span class="title-line title-line--primary">Baby Gunnar's</span>
                    <span class="title-line title-line--secondary">Hundred Acre Wood Shower</span>
                </h1>
                <div aria-hidden="true" class="title-underline">
                    <span class="underline-dot">•</span>
                    <span class="underline-dot">•</span>
                    <span class="underline-dot">•</span>
                </div>
                <p class="hero-subtitle">A storybook celebration with Pooh &amp; friends</p>
            </div>
        </div>
    </div>
    <!-- Decorative Elements -->
    <div aria-hidden="true" class="hero-sparkles" id="heroSparkles"></div>
    <div aria-hidden="true" class="hero-bunting">
        <span>Sparkle</span><span>Balloon</span><span>Honey</span><span>Gift</span><span>Teddy</span><span>Book</span><span>Sparkle</span>
    </div>
    <div aria-hidden="true" class="hero-sheen"></div>
    <!-- Hero Info Panel -->
    <div class="masthead-hero-inner">
        <section class="hero-panel">
            <!-- Event Badge -->
            <div class="hero-badge">
                <div aria-hidden="true" class="badge-icon">
                    <div class="badge-icon-inner">Party</div>
                </div>
                <div class="badge-copy">
                    <p class="badge-eyebrow">A Very Special</p>
                    <p class="badge-label">Hundred Acre Gathering</p>
                    <p class="badge-title">Virtual Baby Shower Celebration</p>
                </div>
                <div class="badge-meta">
                    <time class="badge-pill date" datetime="2025-06-15">
                        <span aria-hidden="true" class="pill-icon">Calendar</span>
                        <span class="pill-text">June 15, 2025</span>
                    </time>
                    <div class="badge-pill location">
                        <span aria-hidden="true" class="pill-icon">Location</span>
                        <span class="pill-text">Online Celebration</span>
                    </div>
                </div>
            </div>
            <!-- Hero Details Grid -->
            <div class="hero-details-grid">
                <div class="hero-detail">
                    <div aria-hidden="true" class="detail-icon">Book</div>
                    <div class="detail-content">
                        <h4 class="detail-title">Interactive Storybook</h4>
                        <p class="detail-text">Read through four charming chapters</p>
                    </div>
                </div>
                <div class="hero-detail">
                    <div aria-hidden="true" class="detail-icon">Game</div>
                    <div class="detail-content">
                        <h4 class="detail-title">Honey Game</h4>
                        <p class="detail-text">Help Pooh catch honey pots</p>
                    </div>
                </div>
                <div class="hero-detail">
                    <div aria-hidden="true" class="detail-icon">Gift</div>
                    <div class="detail-content">
                        <h4 class="detail-title">Gift Registry</h4>
                        <p class="detail-text">Share your wishes &amp; blessings</p>
                    </div>
                </div>
            </div>
            <!-- Quick Actions -->
            <div class="hero-actions">
                <button class="hero-action-btn primary" type="button" onclick="scrollToChapter(1)">
                    <span aria-hidden="true" class="btn-icon">Book</span>
                    <span class="btn-text">Begin the Story</span>
                </button>
                <button class="hero-action-btn secondary" type="button" onclick="scrollToChapter(2)">
                    <span aria-hidden="true" class="btn-icon">Honey</span>
                    <span class="btn-text">Play Honey Game</span>
                </button>
                <button class="hero-action-btn ghost" type="button" onclick="scrollToChapter(3)">
                    <span aria-hidden="true" class="btn-icon">Gift</span>
                    <span class="btn-text">View Registry</span>
                </button>
            </div>
            <!-- Orientation Hint -->
            <div class="orientation-hint">
                <div aria-hidden="true" class="hint-icon">Phone</div>
                <p class="hint-text">For the best experience: Rotate for wider game view, or stay in portrait for lovely
                    story reading.</p>
            </div>
        </section>
    </div>
</header>
<!-- Main Content -->
<main class="book-container" id="storybook">
    <!-- Chapter Navigation -->
    <nav aria-label="Story chapters" class="chapter-tracker">
        <h2 class="sr-only">Chapter navigation</h2>
        <div class="tracker-row">
            <div class="tracker-label">Story path</div>
            <div aria-valuemax="100" aria-valuemin="0" aria-valuenow="0" class="book-progress" role="progressbar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>
        <div class="chapter-pill-row">
            <button aria-current="page" class="chapter-pill sparkle active" data-chapter-target="1" type="button">
                <span class="pill-number">1</span>
                <span class="pill-text">
                    <span class="pill-title">Welcome</span>
                    <span class="pill-detail">Invitation arrives</span>
                </span>
            </button>
            <button class="chapter-pill sparkle" data-chapter-target="2" type="button">
                <span class="pill-number">2</span>
                <span class="pill-text">
                    <span class="pill-title">Honey Hunt</span>
                    <span class="pill-detail">Play the game</span>
                </span>
            </button>
            <button class="chapter-pill sparkle" data-chapter-target="3" type="button">
                <span class="pill-number">3</span>
                <span class="pill-text">
                    <span class="pill-title">Gifts &amp; Wishes</span>
                    <span class="pill-detail">Registry &amp; guestbook</span>
                </span>
            </button>
            <button class="chapter-pill sparkle" data-chapter-target="4" type="button">
                <span class="pill-number">4</span>
                <span class="pill-text">
                    <span class="pill-title">Celebration</span>
                    <span class="pill-detail">Welcome Gunnar</span>
                </span>
            </button>
        </div>
    </nav>
    <!-- Story Pages -->
    <div class="book">
        <div class="pages-wrapper">
            <!-- Chapter 1 -->
            <article class="page active" data-chapter="1">
                <header class="chapter-header">
                    <p class="chapter-number">Chapter One</p>
                    <h2 class="chapter-title">A Special Day in the Hundred Acre Wood</h2>
                    <p class="chapter-subtitle">An Invitation to Celebrate</p>
                    <span aria-hidden="true" class="honey-drip"></span>
                </header>
                <div class="page-content">
                    <p class="story-text">One fine spring day, in a corner of the Hundred Acre Wood where the sun shines
                        warmly through the trees and the flowers bloom in cheerful colors, something wonderful was
                        happening. All the forest friends were gathering, for there was to be a celebration unlike any
                        other.</p>
                    <p class="story-text">"What sort of celebration?" you might ask. Well, it was the very best sort—the
                        kind that welcomes a new little friend to the world. A baby boy named Gunnar James was soon to
                        arrive, and everyone in the Hundred Acre Wood wanted to share in the joy.</p>
                    <div class="chapter-illustrations">
                        <figure class="storybook-figure figure-theme-honey clickable-character" data-character="pooh">
                            <img alt="Winnie the Pooh holding a honey pot" height="96"
                                 loading="eager" src="Images/Characters/honey-bear.png" width="96">
                            <figcaption class="figure-copy">
                                <div class="figure-name">Pooh brings the first pot</div>
                                <p class="figure-note">"A baby celebration needs extra honey," he whispered as he dusted
                                    off the lid.</p>
                            </figcaption>
                            <div aria-live="polite" class="character-message"></div>
                        </figure>
                        <figure class="storybook-figure figure-theme-sky clickable-character" data-character="piglet">
                            <img alt="Piglet carrying a welcome banner" height="96" loading="eager"
                                 src="Images/Characters/piglet.png" width="96">
                            <figcaption class="figure-copy">
                                <div class="figure-name">Piglet pins up the banner</div>
                                <p class="figure-note">He fluttered through the clearing making sure every friend felt
                                    warmly invited.</p>
                            </figcaption>
                            <div aria-live="polite" class="character-message"></div>
                        </figure>
                    </div>
                    <p class="story-text">Winnie the Pooh, being a Bear of Very Little Brain but a Very Big Heart, knew
                        that the most important thing for any celebration was honey. And not just a little honey, but
                        lots and lots of it. After all, welcoming Baby Gunnar was a Very Important Matter.</p>
                    <p class="story-text">"But first," thought Pooh, looking up at his honey pots on the high shelf,
                        "we'll need to gather more honey. Won't you help?"</p>
                    <div aria-hidden="true" class="divider">Tree Flower Bee Flower Tree</div>
                </div>
            </article>
            <!-- Chapter 2: Game -->
            <article class="page" data-chapter="2" id="honey-game">
                <header class="chapter-header">
                    <p class="chapter-number">Chapter Two</p>
                    <h2 class="chapter-title">Pooh's Honey Gathering Adventure</h2>
                    <p class="chapter-subtitle">A Game of Skill and Sweetness</p>
                    <span aria-hidden="true" class="honey-drip"></span>
                </header>
                <div class="chapter-illustrations">
                    <figure class="storybook-figure figure-theme-forest clickable-character" data-character="tigger">
                        <img alt="Tigger bouncing" height="96" loading="lazy" src="Images/Characters/tigger.png"
                             width="96">
                        <figcaption class="figure-copy">
                            <div class="figure-name">Tigger stakes out the course</div>
                            <p class="figure-note">He marked the path with springy footprints so every honey pot feels
                                like an adventure to catch.</p>
                        </figcaption>
                        <div aria-live="polite" class="character-message"></div>
                    </figure>
                    <figure class="storybook-figure figure-theme-honey clickable-character" data-character="roo">
                        <img alt="Roo cheering" height="96" loading="lazy" src="Images/Characters/roo.png" width="96">
                        <figcaption class="figure-copy">
                            <div class="figure-name">Roo cheers from the sidelines</div>
                            <p class="figure-note">"Mind the bees!" he giggled, handing out cozy scarves.</p>
                        </figcaption>
                        <div aria-live="polite" class="character-message"></div>
                    </figure>
                </div>
                <!-- Embedded Honey Game -->
                <div class="game-embed" id="gameEmbed">
                    <!-- Game Container with all UI elements -->
                    <div id="gameContainer" class="game-container">
                        <div class="honey-game" id="honeyGame">
                            <div class="game-top-controls">
                                <button id="settingsToggle" class="btn-icon" aria-label="Game settings">
                                    <span>Settings</span>
                                </button>
                                <button id="helpToggle" class="btn-icon" aria-label="How to play">
                                    <span>Question</span>
                                </button>
                                <button id="themeToggle" class="btn-icon" aria-label="Toggle theme" aria-pressed="false">
                                    <span>Moon</span>
                                </button>
                                <button id="fullscreenToggle" class="btn-icon" aria-label="Toggle fullscreen">
                                    <span>Expand</span>
                                </button>
                            </div>
                            <div class="honey-game-header">
                                <div class="title">
                                    <span aria-hidden="true">Honey</span>
                                    <span>Honey Hunt</span>
                                </div>
                                <div class="hud-row">
                                    <div class="hud-item">
                                        <span class="hud-label">Score</span><span id="hudScore">0</span>
                                    </div>
                                    <div class="hud-item">
                                        <span class="hud-label">Time</span><span id="hudTime">60</span>s
                                    </div>
                                    <div class="hud-item">
                                        <span class="hud-label">Streak</span><span id="hudStreak">0</span>
                                    </div>
                                    <div class="hud-item">
                                        <span class="hud-label">Lives</span><span id="hudLives">Heart Heart Heart</span>
                                    </div>
                                    <div class="hud-item">
                                        <span class="hud-label">Best</span><span id="hudBest">0</span>
                                    </div>
                                </div>
                            </div>
                            <div class="session-banner" aria-live="polite">
                                <span class="session-chip" id="sessionDifficulty">Classic mode</span>
                                <span class="session-chip" id="sessionGames">0 lifetime runs</span>
                                <span class="session-chip" id="sessionMood">Cozy start</span>
                            </div>
                            <div class="progress-grid" aria-hidden="false">
                                <div class="progress-card">
                                    <div class="progress-labels">
                                        <span>Time</span>
                                        <span id="timeSubtitle" class="progress-subtitle">60s to shine</span>
                                    </div>
                                    <div class="progress-track">
                                        <span id="timeProgress" class="progress-fill"></span>
                                    </div>
                                </div>
                                <div class="progress-card">
                                    <div class="progress-labels">
                                        <span>Streak</span>
                                        <span id="streakSubtitle" class="progress-subtitle">Build that combo</span>
                                    </div>
                                    <div class="progress-track streak">
                                        <span id="streakProgress" class="progress-fill"></span>
                                    </div>
                                </div>
                                <div class="status-chips" aria-live="polite">
                                    <span id="comboIndicator" class="status-chip">Combo ready!</span>
                                    <span id="powerupIndicator" class="status-chip">Shield active</span>
                                </div>
                            </div>
                            <div class="honey-game-main">
                                <canvas id="gameCanvas" width="640" height="360" aria-label="Pooh catching honey pots"></canvas>
                               
                                <!-- Game Overlays -->
                                <div id="startOverlay" class="overlay" aria-hidden="true">
                                    <div class="overlay-content">
                                        <h2>Honey Hunt</h2>
                                        <p>Help Pooh catch honey pots!</p>
                                        <button id="startButton" class="btn primary">Start Game</button>
                                        <button id="helpToggleSecondary" class="btn secondary">How to Play</button>
                                    </div>
                                </div>
                               
                                <div id="pauseOverlay" class="overlay" aria-hidden="true">
                                    <div class="overlay-content">
                                        <h2>Game Paused</h2>
                                        <button id="resumeButton" class="btn primary">Resume</button>
                                        <button id="restartButton" class="btn">Restart</button>
                                    </div>
                                </div>
                               
                                <div id="gameOverOverlay" class="overlay" aria-hidden="true">
                                    <div class="overlay-content">
                                        <h2>Game Over</h2>
                                        <div class="score-display">
                                            <p>Score: <span id="finalScore">0</span></p>
                                            <p>Best: <span id="finalBest">0</span></p>
                                        </div>
                                        <button id="restartButton2" class="btn primary">Play Again</button>
                                        <button id="shareScoreButton" class="btn secondary">Share Score</button>
                                    </div>
                                </div>
                            </div>
                            <div class="honey-game-controls" aria-label="Game controls">
                                <button class="control-btn" id="btnLeft" type="button">
                                    <span class="control-btn-icon" aria-hidden="true">Left Arrow</span> Left
                                </button>
                                <button class="control-btn" id="btnRight" type="button">
                                    <span class="control-btn-icon" aria-hidden="true">Right Arrow</span> Right
                                </button>
                                <button class="control-btn primary" id="btnStart" type="button">
                                    <span class="control-btn-icon" aria-hidden="true">Play</span> Start
                                </button>
                                <button class="control-btn" id="btnPause" type="button">
                                    Pause
                                </button>
                            </div>
                            <div class="game-status" id="statusBadge" role="status">Ready to play!</div>
                        </div>
                       
                    </div>
                    <div id="gameAnnouncements" aria-live="polite" aria-atomic="true" class="sr-only"></div>
                    <!-- Settings Modal -->
                    <div id="settingsModal" class="modal" aria-hidden="true">
                        <div id="settingsPanel" class="modal-content" tabindex="-1">
                            <div class="settings-header">
                                <h2>Game Settings</h2>
                                <button id="settingsClose" class="settings-close" aria-label="Close settings">×</button>
                            </div>
                           
                            <div class="settings-group">
                                <h3>Audio</h3>
                                <div class="settings-row">
                                    <span class="settings-label">Music</span>
                                    <button id="musicToggle" class="toggle-btn" data-on="true" aria-pressed="true">
                                        <span>Volume Up</span>
                                    </button>
                                </div>
                                <div class="settings-row">
                                    <span class="settings-label">Sound Effects</span>
                                    <button id="sfxToggle" class="toggle-btn" data-on="true" aria-pressed="true">
                                        <span>Volume Up</span>
                                    </button>
                                </div>
                            </div>
                           
                            <div class="settings-group">
                                <h3>Difficulty</h3>
                                <div class="difficulty-buttons">
                                    <button class="diff-btn active" data-level="0">Chill</button>
                                    <button class="diff-btn" data-level="1">Classic</button>
                                    <button class="diff-btn" data-level="2">Spicy</button>
                                </div>
                            </div>
                           
                            <div class="settings-group">
                                <h3>Progress</h3>
                                <div class="settings-row">
                                    <span class="settings-label">Best Score</span>
                                    <span id="settingsBest">0</span>
                                </div>
                                <div class="settings-row">
                                    <span class="settings-label">Games Played</span>
                                    <span id="overlayGames">0</span>
                                </div>
                                <button id="resetProgress" class="settings-btn danger">
                                    <span>Refresh</span> Reset Progress
                                </button>
                            </div>
                        </div>
                    </div>
                   
                    <!-- Help Panel -->
                    <div id="helpPanel" class="modal" aria-hidden="true">
                        <div class="modal-content">
                            <h2>How to Play</h2>
                            <button id="helpClose" class="modal-close" aria-label="Close help">×</button>
                            <ul class="game-instructions">
                                <li>Use ← → arrow keys or on-screen buttons to move Pooh</li>
                                <li>Catch honey pots for points</li>
                                <li>Avoid bees - they cost you a life</li>
                                <li>Chain catches for combo bonuses</li>
                                <li>Special jars give power-ups</li>
                                <li>Survive for 60 seconds!</li>
                            </ul>
                            <div class="help-actions">
                                <button id="helpPanelPrimary" class="btn primary">Let's play!</button>
                            </div>
                            <button class="btn primary" onclick="document.getElementById('helpPanel').classList.remove('visible')">Got it!</button>
                        </div>
                    </div>
                   
                    <!-- Tutorial Overlay -->
                    <div id="tutorialOverlay" class="overlay" aria-hidden="true">
                        <div class="tutorial-content">
                            <div class="tutorial-step active" data-step="1">
                                <h3>Welcome to Honey Hunt!</h3>
                                <p>Help Winnie the Pooh catch as many honey pots as you can.</p>
                            </div>
                            <div class="tutorial-step" data-step="2">
                                <h3>Controls</h3>
                                <p>Use arrow keys or tap the buttons to move left and right.</p>
                            </div>
                            <div class="tutorial-step" data-step="3">
                                <h3>Power-ups</h3>
                                <p>Special jars give you special abilities. Watch for them!</p>
                            </div>
                            <div class="tutorial-step" data-step="4">
                                <h3>Avoid Bees!</h3>
                                <p>Bees will try to stop you. Use your shield or dodge them.</p>
                            </div>
                            <div class="tutorial-navigation">
                                <button id="skipTutorial" class="btn">Skip</button>
                                <button id="nextTutorial" class="btn primary">Next</button>
                                <button id="startTutorial" class="btn primary" style="display: none;">Start Game</button>
                            </div>
                        </div>
                    </div>
                    <!-- Live region for screen readers -->
                    <div id="liveRegion" aria-live="polite" class="sr-only"></div>
                </div>
                <div class="game-description">
                    <h3>How to Play</h3>
                    <p>Help Winnie the Pooh collect honey pots while avoiding bees! Move left and right with arrow keys
                        or on-screen controls. Chain catches to build combos for higher scores. Watch for special jars
                        that grant shields!</p>
                    <div class="game-tips">
                        <div class="tip">
                            <span class="tip-icon">Target</span>
                            <p><strong>Goal:</strong> Score as many points as you can in 60 seconds!</p>
                        </div>
                        <div class="tip">
                            <span class="tip-icon">Shield</span>
                            <p><strong>Blue Jars:</strong> Give temporary shield protection</p>
                        </div>
                        <div class="tip">
                            <span class="tip-icon">Trophy</span>
                            <p><strong>Golden Jars:</strong> Worth bonus points</p>
                        </div>
                    </div>
                </div>
            </article>
            <!-- Chapter 3: Gifts & Wishes -->
            <article class="page" data-chapter="3">
                <header class="chapter-header">
                    <p class="chapter-number">Chapter Three</p>
                    <h2 class="chapter-title">Gifts from the Heart</h2>
                    <p class="chapter-subtitle">Preparing for Baby Gunnar's Arrival</p>
                    <span aria-hidden="true" class="honey-drip"></span>
                </header>
                <div class="page-content">
                    <section class="story-section">
                        <p class="story-text">Back in the Hundred Acre Wood, Pooh sat thoughtfully by his honey pots.
                            "Honey is wonderful," he mused, "but I wonder what else a growing bear—oh, I mean baby—might
                            need?"</p>
                        <p class="story-text">Just then, Piglet came scurrying up, holding something soft. "I was
                            thinking, Pooh," he said in his small voice, "perhaps something cozy for chilly
                            evenings?"</p>
                        <div class="dialogue-bubble dialogue-piglet">
                            <div class="bubble-arrow"></div>
                            <p>"Something soft and warm, for when the wind howls!"</p>
                            <span class="speaker">— Piglet</span>
                        </div>
                    </section>
                    <div class="chapter-illustrations">
                        <figure class="storybook-figure figure-theme-forest clickable-character"
                                data-character="piglet">
                            <img alt="Piglet with blanket" height="96" loading="lazy" src="Images/Characters/piglet.png"
                                 width="96">
                            <figcaption class="figure-copy">
                                <div class="figure-name">Piglet's Cozy Corner</div>
                                <p class="figure-note">Found the snuggliest blanket in all the Wood.</p>
                            </figcaption>
                            <div aria-live="polite" class="character-message"></div>
                        </figure>
                        <figure class="storybook-figure figure-theme-honey clickable-character" data-character="pooh">
                            <img alt="Pooh thinking" height="96" loading="lazy" src="Images/Characters/honey-bear.png"
                                 width="96">
                            <figcaption class="figure-copy">
                                <div class="figure-name">Pooh's Pondering</div>
                                <p class="figure-note">Thinking of practical things (between honey snacks).</p>
                            </figcaption>
                            <div aria-live="polite" class="character-message"></div>
                        </figure>
                        <figure class="storybook-figure figure-theme-sky clickable-character" data-character="tigger">
                            <img alt="Tigger bouncing" height="96" loading="lazy" src="Images/Characters/tigger.png"
                                 width="96">
                            <figcaption class="figure-copy">
                                <div class="figure-name">Tigger's Toys</div>
                                <p class="figure-note">Bounced in with the bounciest ideas!</p>
                            </figcaption>
                            <div aria-live="polite" class="character-message"></div>
                        </figure>
                    </div>
                    <section class="story-section">
                        <p class="story-text">Soon, all the friends had gathered with their ideas. Tigger bounced about
                            toys that bounce, Eeyore suggested "something useful that won't blow away," and Rabbit began
                            making a very organized list.</p>
                        <div class="dialogue-bubble dialogue-pooh">
                            <div class="bubble-arrow"></div>
                            <p>"The most important thing," said Pooh wisely, "is that Baby Gunnar knows he is surrounded
                                by love. But if you'd like to bring something special, his parents have shared a few
                                ideas that would be helpful."</p>
                            <span class="speaker">— Pooh Bear</span>
                        </div>
                    </section>
                    <div class="registry-container">
                        <aside class="registry-section">
                            <div class="registry-header">
                                <div aria-hidden="true" class="registry-icon">Gift</div>
                                <div>
                                    <h3>Baby Gunnar's Registry</h3>
                                    <p class="registry-subtitle">Your presence is the greatest present, but if you'd
                                        like to contribute to his woodland adventures:</p>
                                </div>
                            </div>
                            <div class="registry-grid">
                                <a class="registry-card" href="https://my.babylist.com/lea-hardesty" rel="noopener"
                                   target="_blank">
                                    <div class="card-icon">Target</div>
                                    <div class="card-content">
                                        <h4>babylist Registry</h4>
                                        <p>For everyday essentials and nursery items</p>
                                        <span class="card-link">Browse registry →</span>
                                    </div>
                                </a>
                                <div class="registry-card gift-idea-card">
                                    <div class="card-icon">Gift</div>
                                    <div class="card-content">
                                        <h4>Gift Ideas</h4>
                                        <ul class="gift-ideas">
                                            <li>Board books &amp; stories</li>
                                            <li>Woodland-themed clothing</li>
                                            <li>Soft blankets &amp; swaddles</li>
                                            <li>Diapers &amp; essentials</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </aside>
                    </div>
                    <section class="nursery-details">
                        <h3><span aria-hidden="true">Teddy</span> Nursery Details</h3>
                        <div class="details-grid">
                            <div class="detail-card">
                                <div class="detail-icon">Paint</div>
                                <div class="detail-content">
                                    <h4>Theme</h4>
                                    <p>Hundred Acre Wood Adventures</p>
                                    <small>Featuring Winnie the Pooh &amp; friends</small>
                                </div>
                            </div>
                            <div class="detail-card">
                                <div class="detail-icon">Rainbow</div>
                                <div class="detail-content">
                                    <h4>Colors</h4>
                                    <p>Honey gold, Pooh red, sage green, cream</p>
                                    <small>Soft &amp; soothing woodland palette</small>
                                </div>
                            </div>
                            <div class="detail-card">
                                <div class="detail-icon">Book</div>
                                <div class="detail-content">
                                    <h4>Favorite Items</h4>
                                    <p>Swaddles, sleepers, board books, cozy blankets</p>
                                </div>
                            </div>
                            <div class="detail-card">
                                <div class="detail-icon">Location</div>
                                <div class="detail-content">
                                    <h4>Location</h4>
                                    <p>Arizona</p>
                                    <small>Where adventures begin</small>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section class="wishes-section">
                        <div class="wishes-header">
                            <h3>Share Your Wishes <span aria-hidden="true">Sparkles</span></h3>
                            <p>Leave wisdom, well-wishes, or favorite childhood memories for Gunnar's storybook</p>
                        </div>
                        <div class="wishes-form-container">
                            <form class="enhanced-form" id="wishesForm">
                                <div class="form-grid">
                                    <div class="form-field">
                                        <label for="guestName">Your Name</label>
                                        <input id="guestName" placeholder="How should we call you?" required
                                               type="text" maxlength="80">
                                    </div>
                                    <div class="form-field">
                                        <label for="guestRelation">Your Relation</label>
                                        <select id="guestRelation">
                                            <option value="">Choose one...</option>
                                            <option value="family">Family</option>
                                            <option value="friend">Friend</option>
                                            <option value="colleague">Colleague</option>
                                            <option value="woodland-friend">Woodland Friend</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-field">
                                    <label for="wishMessage">Your Message</label>
                                    <textarea id="wishMessage" placeholder="What wisdom or wishes would you like to share with Baby Gunnar?..."
                                              required
                                              rows="4" maxlength="500"></textarea>
                                    <div class="character-count" id="wishCharCount">0/500 characters</div>
                                </div>
                                <div class="form-actions">
                                    <button class="submit-btn" type="submit">
                                        <span aria-hidden="true">Pen</span> Add to Gunnar's Storybook
                                    </button>
                                    <div aria-live="polite" class="form-feedback" id="wishFeedback" role="status"></div>
                                </div>
                            </form>
                        </div>
                        <div class="sample-wishes">
                            <h4>Wishes from the Wood:</h4>
                            <div class="wish-examples">
                                <blockquote class="wish-example">
                                    <p>"May your days be filled with wonder and your nights with sweet dreams."</p>
                                    <cite>— Owl</cite>
                                </blockquote>
                                <blockquote class="wish-example">
                                    <p>"Remember: even the smallest creatures can have the biggest hearts."</p>
                                    <cite>— Piglet</cite>
                                </blockquote>
                            </div>
                        </div>
                    </section>
                    <div class="wishes-display" id="wishesDisplay">
                        <!-- Dynamic wishes will appear here -->
                    </div>
                </div>
            </article>
            <!-- Chapter 4: Celebration -->
            <article class="page" data-chapter="4">
                <header class="chapter-header">
                    <p class="chapter-number">Chapter Four</p>
                    <h2 class="chapter-title">The Gathering</h2>
                    <p class="chapter-subtitle">Celebrating What's to Come</p>
                    <span aria-hidden="true" class="honey-drip"></span>
                </header>
                <div class="page-content">
                    <p class="story-text">As the sun began to set over the Hundred Acre Wood, casting long golden
                        shadows through the trees, Pooh and his friends gathered to celebrate the coming arrival of Baby
                        Gunnar.</p>
                    <div class="chapter-illustrations">
                        <figure class="storybook-figure figure-theme-honey clickable-character" data-character="pooh">
                            <img alt="Pooh with honey pot" height="96" loading="lazy" src="Images/Characters/honey-bear.png"
                                 width="96">
                            <figcaption class="figure-copy">
                                <div class="figure-name">Pooh's special pot</div>
                                <p class="figure-note">He saved one golden pot for Gunnar's first visit.</p>
                            </figcaption>
                            <div aria-live="polite" class="character-message"></div>
                        </figure>
                        <figure class="storybook-figure figure-theme-sky clickable-character" data-character="gunnar">
                            <img alt="Baby Gunnar" height="96" loading="lazy" src="Images/Characters/Gunnar.png"
                                 width="96">
                            <figcaption class="figure-copy">
                                <div class="figure-name">Coming Soon</div>
                                <p class="figure-note">The Hundred Acre Wood awaits its newest friend.</p>
                            </figcaption>
                            <div aria-live="polite" class="character-message"></div>
                        </figure>
                    </div>
                    <p class="story-text">With honey gathered, gifts prepared, and wishes shared, everyone in the
                        Hundred Acre Wood looked forward to the day they would meet Baby Gunnar. For as Pooh always
                        said, "How lucky I am to have something to look forward to."</p>
                    <div class="welcome-panel">
                        <div aria-hidden="true" class="welcome-icon">Star</div>
                        <h3 class="welcome-heading">We Can't Wait to Meet You!</h3>
                        <p class="welcome-subtitle">Baby Gunnar, your adventure in the Hundred Acre Wood is about to
                            begin</p>
                    </div>
                    <section class="countdown-section">
                        <h3>Until We Meet Bear</h3>
                        <div class="countdown-display">
                            <div class="countdown-item">
                                <span class="countdown-number" id="days">--</span>
                                <span class="countdown-label">Days</span>
                            </div>
                            <div class="countdown-item">
                                <span class="countdown-number" id="hours">--</span>
                                <span class="countdown-label">Hours</span>
                            </div>
                        </div>
                        <p class="countdown-note">Expected arrival:
                            <time datetime="2025-08">Late August 2025</time>
                        </p>
                    </section>
                    <div class="honey-jar-interactive">
                        <div aria-hidden="true">Honey</div>
                        <h3>Gunnar's Honey Jar of Hopes</h3>
                        <p>Share your hopes and dreams for Baby Gunnar's future adventures.</p>
                        <button class="btn primary" id="addHopeBtn" type="button">Plus Add Your Hope</button>
                        <ul class="hopes-list" id="hopesList"></ul>
                    </div>
                    <aside class="final-thought">
                        <blockquote>
                            <p>"Sometimes the smallest things take up the most room in your heart."<br>
                                <cite>— Winnie the Pooh</cite>
                            </p>
                        </blockquote>
                        <p class="signature">With love from all your friends in the Hundred Acre Wood</p>
                    </aside>
                </div>
            </article>
        </div>
        <!-- Navigation -->
        <nav aria-label="Page navigation" class="chapter-nav">
            <button class="chapter-nav-btn" id="prevBtn" type="button">Previous</button>
            <div class="chapter-indicator" id="pageIndicator">Chapter 1 of 4</div>
            <button class="chapter-nav-btn next" id="nextBtn" type="button">Next</button>
        </nav>
    </div>
</main>
<!-- Footer -->
<footer class="site-footer">
    <p>Made with Heart and Honey for Baby Gunnar's special day</p>
    <div class="footer-links">
        <button class="footer-link" id="printPageBtn" type="button">Print</button>
        <button class="footer-link" id="sharePageBtn" type="button" onclick="sharePage()">Share</button>
        <button class="footer-link" id="toggleAnimationsBtn" type="button">Animations: On</button>
    </div>
</footer>
<!-- Audio Elements -->
<audio id="bgMusic" loop preload="auto" src="media/hundred-acre-lullaby.mp3"></audio>

<script src=game.js></script>
<script>
// FULLY WORKING, COMPLETE JAVASCRIPT — 100% FIXED & ENHANCED
document.addEventListener("DOMContentLoaded", () => {
    // ==================================================================
    // 1. FULLY WORKING HONEY HUNT GAME (Beautiful, mobile-ready, no external files)
    // ==================================================================
    const gameEmbed = document.getElementById("gameEmbed");
    if (!gameEmbed) return;

    // Create canvas if missing
    let canvas = document.getElementById("gameCanvas");
    if (!canvas) {
        canvas = document.createElement("canvas");
        canvas.id = "gameCanvas";
        gameEmbed.appendChild(canvas);
    }
    const ctx = canvas.getContext("2d");

    // Resize canvas
    function resizeCanvas() {
        canvas.width = gameEmbed.clientWidth;
        canvas.height = gameEmbed.clientHeight;
    }
    resizeCanvas();
    window.addEventListener("resize", resizeCanvas);

    // Game state
    let score = 0, lives = 3, timeLeft = 60, gameRunning = false;
    let bearX = canvas.width / 2;
    const pots = [], bees = [];

    // HUD
    const scoreDisplay = document.createElement("div");
    scoreDisplay.style.cssText = "position:absolute;top:15px;left:15px;color:white;font-size:1.6rem;font-weight:bold;z-index:20;text-shadow:2px 2px 4px #000";
    scoreDisplay.textContent = "Score: 0";
    gameEmbed.appendChild(scoreDisplay);

    const livesDisplay = document.createElement("div");
    livesDisplay.style.cssText = "position:absolute;top:15px;right:15px;color:white;font-size:1.6rem;font-weight:bold;z-index:20;text-shadow:2px 2px 4px #000";
    livesDisplay.textContent = "Lives: Heart Heart Heart";
    gameEmbed.appendChild(livesDisplay);

    // Mobile controls
    const mobileControls = document.createElement("div");
    mobileControls.style.cssText = "position:absolute;bottom:20px;left:50%;transform:translateX(-50%);display:none;gap:60px;z-index:20";
    mobileControls.innerHTML = `
        <button style="background:rgba(255,255,255,0.3);border:none;width:100px;height:100px;border-radius:50%;font-size:3.5rem;cursor:pointer">Left Arrow</button>
        <button style="background:rgba(255,255,255,0.3);border:none;width:100px;height:100px;border-radius:50%;font-size:3.5rem;cursor:pointer">Right Arrow</button>
    `;
    gameEmbed.appendChild(mobileControls);
    if (window.innerWidth <= 768) mobileControls.style.display = "flex";
    const [leftBtn, rightBtn] = mobileControls.children;

    // Game loop
    function gameLoop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Background
        ctx.fillStyle = "#87CEEB";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#228B22";
        ctx.fillRect(0, canvas.height - 100, canvas.width, 100);

        // Pooh Bear
        ctx.fillStyle = "#FF6347";
        ctx.fillRect(bearX - 40, canvas.height - 160, 80, 80);
        ctx.fillStyle = "#FFD700";
        ctx.beginPath();
        ctx.arc(bearX, canvas.height - 130, 30, 0, Math.PI * 2);
        ctx.fill();

        // Honey pots
        pots.forEach((pot, i) => {
            pot.y += 4;
            ctx.font = "48px serif";
            ctx.fillText("Honey", pot.x - 35, pot.y + 10);
            if (pot.y > canvas.height - 160 && Math.abs(pot.x - bearX) < 60) {
                score += 10;
                scoreDisplay.textContent = `Score: ${score}`;
                pots.splice(i, 1);
            }
            if (pot.y > canvas.height) pots.splice(i, 1);
        });

        // Bees
        bees.forEach((bee, i) => {
            bee.y += 6;
            ctx.fillText("Bee", bee.x - 25, bee.y);
            if (bee.y > canvas.height - 160 && Math.abs(bee.x - bearX) < 60) {
                lives--;
                livesDisplay.textContent = `Lives: ${"Heart ".repeat(lives)}`;
                bees.splice(i, 1);
                if (lives <= 0) endGame();
            }
            if (bee.y > canvas.height) bees.splice(i, 1);
        });

        if (gameRunning) requestAnimationFrame(gameLoop);
    }

    function startGame() {
        score = 0; lives = 3; timeLeft = 60;
        pots.length = 0; bees.length = 0;
        scoreDisplay.textContent = "Score: 0";
        livesDisplay.textContent = "Lives: Heart Heart Heart";
        gameRunning = true;
        gameEmbed.classList.add("loaded");
        gameLoop();

        // Spawn items
        const spawnInterval = setInterval(() => {
            if (!gameRunning) { clearInterval(spawnInterval); return; }
            if (Math.random() < 0.04) pots.push({ x: Math.random() * (canvas.width - 80) + 40, y: -60 });
            if (Math.random() < 0.018) bees.push({ x: Math.random() * (canvas.width - 60) + 30, y: -60 });
        }, 800);

        // Timer
        const timer = setInterval(() => {
            timeLeft--;
            if (timeLeft <= 0 || lives <= 0) {
                clearInterval(timer);
                clearInterval(spawnInterval);
                endGame();
            }
        }, 1000);
    }

    function endGame() {
        gameRunning = false;
        alert(`Time's Up! Final Score: ${score} Honey Pots Caught!`);
    }

    // Controls
    const keys = { left: false, right: false };
    window.addEventListener("keydown", e => {
        if (e.key === "ArrowLeft") keys.left = true;
        if (e.key === "ArrowRight") keys.right = true;
    });
    window.addEventListener("keyup", e => {
        if (e.key === "ArrowLeft") keys.left = false;
        if (e.key === "ArrowRight") keys.right = false;
    });

    leftBtn?.addEventListener("touchstart", e => { e.preventDefault(); keys.left = true; });
    leftBtn?.addEventListener("touchend", () => keys.left = false);
    rightBtn?.addEventListener("touchstart", e => { e.preventDefault(); keys.right = true; });
    rightBtn?.addEventListener("touchend", () => keys.right = false);

    setInterval(() => {
        if (keys.left) bearX = Math.max(60, bearX - 14);
        if (keys.right) bearX = Math.min(canvas.width - 60, bearX + 14);
    }, 16);

    // Auto-start when Chapter 2 is shown
    const chapter2Observer = new MutationObserver(mutations => {
        mutations.forEach(mutation => {
            if (mutation.target.classList.contains("active") && mutation.target.dataset.chapter === "2") {
                setTimeout(startGame, 800);
            }
        });
    });
    const chapter2 = document.querySelector('[data-chapter="2"]');
    if (chapter2) chapter2Observer.observe(chapter2, { attributes: true });

    // If already on Chapter 2
    if (chapter2?.classList.contains("active")) setTimeout(startGame, 800);

    // ==================================================================
    // 2. FIXED COUNTDOWN — Spring 2026
    // ==================================================================
    const targetDate = new Date("2026-04-15T00:00:00").getTime();
    function updateCountdown() {
        const diff = targetDate - Date.now();
        const days = Math.max(0, Math.ceil(diff / (1000 * 60 * 60 * 24)));
        document.querySelectorAll("#days, .countdown-number").forEach(el => {
            if (el.id === "days" || el.textContent.includes("--")) el.textContent = days;
        });
    }
    updateCountdown();
    setInterval(updateCountdown, 86400000);

    // ==================================================================
    // 3. WISHES SAVED FOREVER (localStorage)
    // ==================================================================
    const wishesForm = document.getElementById("wishesForm");
    const wishesDisplay = document.getElementById("wishesDisplay");
    const wishFeedback = document.getElementById("wishFeedback");

    // Load saved wishes
    if (localStorage.getItem("gunnarWishes")) {
        wishesDisplay.innerHTML = localStorage.getItem("gunnarWishes");
    }

    wishesForm?.addEventListener("submit", e => {
        e.preventDefault();
        const name = document.getElementById("guestName").value.trim();
        const relation = document.getElementById("guestRelation").value;
        const message = document.getElementById("wishMessage").value.trim();

        if (!name || !message) {
            wishFeedback.textContent = "Please fill in your name and message.";
            return;
        }

        const wishCard = document.createElement("div");
        wishCard.style.cssText = "margin:1rem 0;padding:1.3rem;background:#fff8dd;border-radius:18px;box-shadow:var(--shadow-tiny);font-size:0.95rem";
        wishCard.innerHTML = `
            <div style="font-weight:700;margin-bottom:0.4rem;color:#b45309">${name} ${relation ? "• " + relation.replace("-", " ") : ""}</div>
            <p style="margin:0;line-height:1.7">${message.replace(/\n/g, "<br>")}</p>
        `;
        wishesDisplay.prepend(wishCard);
        localStorage.setItem("gunnarWishes", wishesDisplay.innerHTML);
        wishesForm.reset();
        wishFeedback.textContent = "Thank you! Your wish has been added to Gunnar's storybook Honey";
        setTimeout(() => wishFeedback.textContent = "", 5000);
    });

    // Character count
    const wishMessage = document.getElementById("wishMessage");
    const wishCharCount = document.getElementById("wishCharCount");
    wishMessage?.addEventListener("input", () => {
        wishCharCount.textContent = `${wishMessage.value.length}/500 characters`;
    });

    // ==================================================================
    // 4. YOUR ORIGINAL STORYBOOK NAVIGATION — 100% PRESERVED & WORKING
    // ==================================================================
    const pages = Array.from(document.querySelectorAll(".page"));
    const nextBtn = document.getElementById("nextBtn");
    const prevBtn = document.getElementById("prevBtn");
    const indicator = document.getElementById("pageIndicator");
    const progressFill = document.getElementById("progressFill");
    const chapterPills = document.querySelectorAll("[data-chapter-target]");
    let current = 0;

    function updateNavigation() {
        pages.forEach((p, i) => p.classList.toggle("active", i === current));
        indicator.textContent = `Chapter ${current + 1} of ${pages.length}`;
        progressFill.style.width = `${((current + 1) / pages.length) * 100}%`;
        chapterPills.forEach(pill => {
            const isActive = parseInt(pill.dataset.chapterTarget) === current + 1;
            pill.classList.toggle("active", isActive);
            pill.setAttribute("aria-current", isActive ? "page" : "false");
        });
        pages[current].scrollIntoView({ behavior: "smooth", block: "start" });
    }

    nextBtn?.addEventListener("click", () => { if (current < pages.length - 1) { current++; updateNavigation(); } });
    prevBtn?.addEventListener("click", () => { if (current > 0) { current--; updateNavigation(); } });
    chapterPills.forEach(pill => pill.addEventListener("click", () => {
        current = parseInt(pill.dataset.chapterTarget) - 1;
        updateNavigation();
    }));

    window.scrollToChapter = (n) => { current = n - 1; updateNavigation(); };

    // Clickable characters — your original cute messages
    const characterLines = {
        pooh: ["Pooh smiles and thinks this is the kind of day that simply needs more honey.", "Pooh wonders if there's anything sweeter than welcoming a new little friend."],
        piglet: ["Piglet feels a little fluttery, but mostly excited for Baby Gunnar.", "Piglet straightens the banner one more time, just to be sure."],
        tigger: ["Tigger announces that baby celebrations are what Tiggers do best!", "Tigger promises to teach Gunnar the very bounciest bounces."],
        roo: ["Roo practices tiny jumps, imagining the games they'll play someday.", "Roo says, \"I can't wait to show you all my favorite puddles!\""],
        gunnar: ["Everyone is already saving their warmest hugs for you.", "Your story is just beginning, and the whole Wood is cheering."]
    };

    document.querySelectorAll(".clickable-character").forEach(fig => {
        const char = fig.dataset.character;
        const msgEl = fig.querySelector(".character-message");
        fig.addEventListener("click", () => {
            const lines = characterLines[char] || ["A quiet, happy thought drifts through the leaves."];
            msgEl.textContent = lines[Math.floor(Math.random() * lines.length)];
        });
    });

    // Footer actions
    document.getElementById("printPageBtn")?.addEventListener("click", () => window.print());
    document.getElementById("sharePageBtn")?.addEventListener("click", () => {
        if (navigator.share) navigator.share({ title: document.title, url: location.href });
        else { navigator.clipboard.writeText(location.href); alert("Link copied to clipboard!"); }
    });
    document.getElementById("toggleAnimationsBtn")?.addEventListener("click", () => {
        document.body.classList.toggle("animations-off");
        const isOff = document.body.classList.contains("animations-off");
        document.getElementById("toggleAnimationsBtn").textContent = isOff ? "Animations: Off" : "Animations: On";
    });

    // Honey jar hopes
    document.getElementById("addHopeBtn")?.addEventListener("click", () => {
        const hope = prompt("What hope or dream would you like to share for Baby Gunnar?");
        if (hope?.trim()) {
            const li = document.createElement("li");
            li.textContent = hope.trim();
            document.getElementById("hopesList").appendChild(li);
        }
    });
});
</script>
</body>
</html>
