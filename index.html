<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>For Baby Gunnar — A Hundred Acre Wood Baby Shower Story</title>
  <meta name="description" content="A calm, storybook baby shower invitation for Baby Gunnar — with Hundred Acre Wood warmth, friends, and a keepsake guestbook page." />
  <meta name="theme-color" content="#FFB020" />
  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet" />

  <style>
    /* =========================================================
       CORE TOKENS — QUIET, WARM, STORYBOOK
    ========================================================= */
    :root {
      --paper: #FFF8E8;
      --paper-shadow: #F1E4CF;
      --ink: #3A2618;

      --pooh-red: #C62828;
      --honey: #FFB020;
      --honey-soft: #FFD87A;

      --leaf: #5A7A3B;
      --sky: #E9F1F8;

      --shadow: 0 18px 50px rgba(58, 38, 24, 0.18);
      --shadow-soft: 0 10px 28px rgba(58, 38, 24, 0.14);
      --slow: cubic-bezier(.22,.61,.36,1);

      --font-story: 'Patrick Hand', cursive;
      --font-title: 'Playfair Display', serif;

      --radius: 18px;
      --radius-sm: 12px;
    }

    /* =========================================================
       BASE RESET + ACCESSIBILITY
    ========================================================= */
    * { box-sizing: border-box; margin: 0; padding: 0; }

    html { scroll-behavior: smooth; }

    body {
      font-family: var(--font-story);
      background: var(--paper);
      color: var(--ink);
      line-height: 1.7;
      overflow-x: hidden;
      -webkit-text-size-adjust: 100%;
      text-rendering: optimizeLegibility;
    }

    a, button, input, textarea, select {
      font-family: inherit;
    }

    :focus-visible {
      outline: 3px solid rgba(255, 176, 32, 0.65);
      outline-offset: 3px;
      border-radius: 10px;
    }

    .skip-link {
      position: absolute;
      left: 14px;
      top: 14px;
      padding: 10px 14px;
      background: rgba(255,255,255,0.95);
      border: 1px solid rgba(58,38,24,0.25);
      border-radius: 12px;
      box-shadow: var(--shadow-soft);
      transform: translateY(-160%);
      transition: transform .25s var(--slow);
      z-index: 999;
      color: var(--ink);
      text-decoration: none;
      font-size: 1rem;
    }

    .skip-link:focus {
      transform: translateY(0);
    }

    /* Subtle paper grain */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      background:
        repeating-linear-gradient(
          0deg,
          rgba(58,38,24,0.05) 0px,
          rgba(58,38,24,0.05) 1px,
          transparent 2px,
          transparent 6px
        );
      opacity: .32;
      z-index: 0;
    }

    /* Gentle vignette to “hold” the page */
    body::after {
      content: "";
      position: fixed;
      inset: -10%;
      pointer-events: none;
      background: radial-gradient(circle at 50% 20%, transparent 35%, rgba(58,38,24,0.08) 75%, rgba(58,38,24,0.12) 100%);
      opacity: .55;
      z-index: 0;
    }

    /* =========================================================
       OPENING COVER (THE BOOK OPENS ONCE)
    ========================================================= */
    .cover {
      min-height: 100vh;
      display: grid;
      place-items: center;
      background: linear-gradient(var(--paper), var(--paper-shadow));
      position: relative;
      z-index: 2;
      padding: 28px;
    }

    .cover__paper {
      background: rgba(255, 248, 232, 0.96);
      padding: clamp(44px, 7vw, 88px) clamp(26px, 6vw, 62px);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      text-align: center;
      max-width: 820px;
      width: 100%;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(58, 38, 24, 0.20);
    }

    .cover__paper::before{
      content:"";
      position:absolute;
      inset:-40%;
      background:
        radial-gradient(circle at 30% 25%, rgba(255, 216, 122, 0.45), transparent 52%),
        radial-gradient(circle at 80% 30%, rgba(90, 122, 59, 0.10), transparent 55%),
        repeating-linear-gradient(0deg, rgba(58,38,24,0.04) 0, rgba(58,38,24,0.04) 1px, transparent 2px, transparent 8px);
      opacity: .55;
      transform: rotate(-6deg);
      pointer-events: none;
      z-index: 0;
    }

    .cover__eyebrow {
      letter-spacing: 2.4px;
      text-transform: uppercase;
      font-size: .92rem;
      opacity: .78;
      margin-bottom: 12px;
      position: relative;
      z-index: 1;
    }

    .cover h1 {
      font-family: var(--font-title);
      font-size: clamp(2.2rem, 4.8vw, 3.6rem);
      margin-bottom: 12px;
      position: relative;
      z-index: 1;
    }

    .cover__sub {
      font-size: clamp(1.15rem, 2.4vw, 1.5rem);
      margin-bottom: 40px;
      opacity: .92;
      position: relative;
      z-index: 1;
    }

    .cover__openRow {
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      position: relative;
      z-index: 1;
    }

    .btn {
      border: none;
      cursor: pointer;
      border-radius: 999px;
      padding: 14px 26px;
      font-size: 1.1rem;
      transition: transform .25s var(--slow), box-shadow .25s var(--slow), background .25s var(--slow);
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }

    .btn--primary {
      background: var(--pooh-red);
      color: white;
      box-shadow: 0 12px 28px rgba(198, 40, 40, 0.22);
    }

    .btn--primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 18px 42px rgba(198, 40, 40, 0.26);
    }

    .btn--ghost {
      background: transparent;
      color: var(--ink);
      border: 1px solid rgba(58,38,24,0.28);
      box-shadow: var(--shadow-soft);
    }

    .btn--ghost:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 40px rgba(58,38,24,0.16);
    }

    .cover__hint {
      margin-top: 22px;
      font-size: 1.06rem;
      opacity: .78;
      position: relative;
      z-index: 1;
    }

    /* =========================================================
       MAIN SECTIONS — BREATHING, KEEPSAKE SPACING
    ========================================================= */
    main { position: relative; z-index: 2; }

    .section {
      max-width: 860px;
      margin: 110px auto;
      padding: 0 24px;
    }

    .section h2 {
      font-family: var(--font-title);
      font-size: clamp(1.9rem, 3.4vw, 2.6rem);
      margin-bottom: 18px;
    }

    .section p {
      font-size: clamp(1.14rem, 2.2vw, 1.3rem);
      margin-bottom: 18px;
      opacity: .98;
    }

    .section .soft {
      opacity: .86;
    }

    .divider {
      max-width: 860px;
      margin: 0 auto;
      padding: 0 24px;
      opacity: .55;
    }

    .divider hr {
      border: none;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(58,38,24,0.32), transparent);
    }

    /* =========================================================
       GATHERING DETAILS — INVITATION, NOT BROCHURE
    ========================================================= */
    .gathering {
      background: rgba(255,255,255,0.55);
      padding: 44px 38px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid rgba(58,38,24,0.20);
      position: relative;
      overflow: hidden;
    }

    .gathering::before{
      content:"";
      position:absolute;
      inset:-40%;
      background:
        radial-gradient(circle at 25% 30%, rgba(255,176,32,0.12), transparent 55%),
        radial-gradient(circle at 80% 25%, rgba(90,122,59,0.10), transparent 55%);
      opacity: .9;
      transform: rotate(10deg);
      pointer-events:none;
    }

    .gathering__details {
      display: grid;
      gap: 12px;
      margin-top: 18px;
      position: relative;
      z-index: 1;
    }

    .gathering__row {
      display: flex;
      justify-content: space-between;
      gap: 18px;
      font-size: 1.15rem;
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(255,255,255,0.45);
      border: 1px solid rgba(58,38,24,0.12);
    }

    .gathering__row strong {
      font-family: var(--font-title);
      letter-spacing: .2px;
    }

    .gathering__note {
      margin-top: 14px;
      font-size: 1.08rem;
      opacity: .84;
      position: relative;
      z-index: 1;
    }

    /* =========================================================
       “A LITTLE TRADITION” CALLOUT
    ========================================================= */
    .tradition {
      background: rgba(255, 176, 32, 0.10);
      border-left: 5px solid rgba(255, 176, 32, 0.85);
      border-radius: 14px;
      padding: 18px 18px;
      margin-top: 14px;
    }

    /* =========================================================
       FRIENDS — ILLUSTRATED CHARACTER GALLERY (YOUR IMAGES)
    ========================================================= */
    .friends {
      background: rgba(255,255,255,0.55);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 44px 38px;
      border: 1px solid rgba(58,38,24,0.20);
      position: relative;
      overflow: hidden;
    }

    .friends::before{
      content:"";
      position:absolute;
      inset:-40%;
      background:
        radial-gradient(circle at 30% 20%, rgba(255,176,32,0.12), transparent 52%),
        radial-gradient(circle at 78% 28%, rgba(90,122,59,0.10), transparent 55%),
        repeating-linear-gradient(0deg, rgba(58,38,24,0.03) 0, rgba(58,38,24,0.03) 1px, transparent 2px, transparent 9px);
      opacity: .7;
      transform: rotate(-7deg);
      pointer-events:none;
    }

    .friends__grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
      gap: 16px;
      margin-top: 20px;
      position: relative;
      z-index: 1;
    }

    .friend-card {
      appearance: none;
      -webkit-appearance: none;
      border: 1px solid rgba(58,38,24,0.22);
      border-radius: 16px;
      background: rgba(255,255,255,0.62);
      padding: 18px 16px 16px;
      cursor: pointer;
      transition: transform .25s var(--slow), box-shadow .25s var(--slow);
      position: relative;
      overflow: hidden;
      text-align: left;
    }

    .friend-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 16px 40px rgba(58,38,24,0.18);
    }

    .friend-portrait {
      width: 92px;
      height: 92px;
      border-radius: 999px;
      margin: 0 auto 12px;
      position: relative;
      background: radial-gradient(circle at 40% 35%, var(--paper), var(--paper-shadow));
      border: 2px solid rgba(58,38,24,0.42);
      box-shadow: 0 10px 22px rgba(58,38,24,0.18);
      overflow: hidden;
    }

    .friend-portrait img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scale(1.05);
      filter: saturate(1.05) contrast(1.02);
      display: block;
    }

    .friend-name {
      font-family: var(--font-title);
      text-align: center;
      font-size: 1.22rem;
      margin-bottom: 6px;
    }

    .friend-trait {
      text-align: center;
      font-size: 1.03rem;
      opacity: .84;
      margin-bottom: 8px;
    }

    .friend-quote {
      text-align: center;
      font-style: italic;
      opacity: .78;
      font-size: 1.02rem;
    }

    /* Modal (calm, booklike) */
    .friend-modal {
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      background: rgba(0,0,0,0.55);
      opacity: 0;
      pointer-events: none;
      transition: opacity .25s var(--slow);
      z-index: 50;
      padding: 18px;
    }

    .friend-modal.is-open {
      opacity: 1;
      pointer-events: auto;
    }

    .friend-modal__card {
      width: min(720px, calc(100vw - 28px));
      background: linear-gradient(var(--paper), var(--paper-shadow));
      border-radius: var(--radius);
      box-shadow: 0 30px 90px rgba(0,0,0,0.35);
      padding: 26px 22px;
      border: 1px solid rgba(58,38,24,0.28);
      position: relative;
    }

    .friend-modal__close {
      position: absolute;
      top: 10px;
      right: 12px;
      border: 0;
      background: transparent;
      font-size: 24px;
      cursor: pointer;
      color: rgba(58,38,24,0.75);
      padding: 6px 10px;
      border-radius: 12px;
    }

    .friend-modal__close:hover {
      background: rgba(255,255,255,0.55);
    }

    .friend-modal__top {
      display: grid;
      grid-template-columns: 112px 1fr;
      gap: 18px;
      align-items: center;
      margin-bottom: 10px;
    }

    .friend-modal__portrait {
      width: 112px;
      height: 112px;
      border-radius: 999px;
      border: 2px solid rgba(58,38,24,0.42);
      overflow: hidden;
      background: radial-gradient(circle at 40% 35%, var(--paper), var(--paper-shadow));
      box-shadow: 0 12px 28px rgba(58,38,24,0.22);
    }

    .friend-modal__portrait img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scale(1.05);
      display: block;
    }

    .friend-modal__title {
      font-family: var(--font-title);
      font-size: 2rem;
      margin: 0;
      line-height: 1.2;
    }

    .friend-modal__subtitle {
      opacity: .82;
      font-size: 1.15rem;
      margin-top: 4px;
    }

    .friend-modal__body {
      margin-top: 12px;
      font-size: 1.2rem;
      opacity: .95;
    }

    .friend-modal__quote {
      margin-top: 14px;
      padding: 14px 14px;
      border-left: 4px solid var(--honey);
      background: rgba(255,176,32,0.10);
      border-radius: 10px;
      font-style: italic;
      opacity: .92;
    }

    /* =========================================================
       GUESTBOOK — “KEPT” FEELING
    ========================================================= */
    .guestbookCard {
      background: rgba(255,255,255,0.55);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 44px 38px;
      border: 1px solid rgba(58,38,24,0.20);
      position: relative;
      overflow: hidden;
    }

    .guestbookCard::before{
      content:"";
      position:absolute;
      inset:-40%;
      background:
        radial-gradient(circle at 22% 30%, rgba(255,216,122,0.22), transparent 55%),
        radial-gradient(circle at 75% 22%, rgba(90,122,59,0.08), transparent 55%);
      opacity: .9;
      transform: rotate(6deg);
      pointer-events:none;
    }

    .guestbookForm {
      margin-top: 14px;
      position: relative;
      z-index: 1;
      display: grid;
      gap: 14px;
    }

    .fieldRow {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }

    .field {
      display: grid;
      gap: 6px;
    }

    .label {
      font-family: var(--font-title);
      font-size: 1.02rem;
      opacity: .9;
    }

    .input, .textarea {
      width: 100%;
      background: rgba(255,255,255,0.40);
      border: 1px solid rgba(58,38,24,0.18);
      border-bottom: 2px solid rgba(58,38,24,0.42);
      border-radius: 14px;
      padding: 12px 12px;
      font-size: 1.12rem;
      color: var(--ink);
    }

    .textarea {
      min-height: 150px;
      resize: vertical;
      padding: 14px 12px;
      line-height: 1.6;
    }

    .guestbookActions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
      margin-top: 6px;
    }

    .btn--honey {
      background: var(--honey);
      color: #2b1a10;
      box-shadow: 0 14px 34px rgba(255,176,32,0.20);
    }

    .btn--honey:hover {
      transform: translateY(-2px);
      box-shadow: 0 18px 44px rgba(255,176,32,0.24);
    }

    .guestbook__note {
      margin-top: 8px;
      font-style: italic;
      opacity: .78;
    }

    .mini {
      font-size: 1.02rem;
      opacity: .80;
    }

    /* =========================================================
       CORNER COMPANION — POOH IMAGE FLOAT (GENTLE, NOT LOUD)
    ========================================================= */
    .companion {
      position: fixed;
      right: 22px;
      bottom: 22px;
      width: 86px;
      height: 86px;
      border-radius: 999px;
      background: radial-gradient(circle at 40% 35%, rgba(255,255,255,0.75), rgba(241,228,207,0.72));
      border: 1px solid rgba(58,38,24,0.22);
      box-shadow: 0 18px 44px rgba(58,38,24,0.20);
      overflow: hidden;
      opacity: .90;
      z-index: 3;
      transform: translateY(0);
      transition: transform .15s linear, opacity .3s var(--slow);
      pointer-events: none; /* purely decorative */
    }

    .companion img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scale(1.06);
      display: block;
      filter: saturate(1.03) contrast(1.02);
    }

    @media (max-width: 520px) {
      .companion { width: 74px; height: 74px; right: 14px; bottom: 14px; }
      .fieldRow { grid-template-columns: 1fr; }
      .gathering, .friends, .guestbookCard { padding: 34px 22px; }
      .section { margin: 86px auto; }
    }

    /* =========================================================
       GUNNAR — AUTO-HIGHLIGHT “HONEYLIGHT PROMISE”
    ========================================================= */
    .gunnar{
      position: relative;
      display: inline-block;
      padding: 0 .10em;
      color: var(--ink);
      text-shadow:
        0 1px 0 rgba(255,255,255,0.55),
        0 12px 30px rgba(255,176,32,0.14);
    }

    .gunnar::before{
      content:"";
      position:absolute;
      left:-0.10em; right:-0.10em;
      bottom: .10em;
      height: .58em;
      border-radius: 999px;
      background: linear-gradient(90deg,
        rgba(255,176,32,0.14),
        rgba(255,216,122,0.62),
        rgba(255,176,32,0.14)
      );
      transform: rotate(-1deg);
      z-index: -1;
    }

    .gunnar::after{
      content:"";
      position:absolute;
      inset: -0.22em -0.35em -0.12em -0.35em;
      border-radius: 999px;
      background: radial-gradient(circle at 35% 40%,
        rgba(255,216,122,0.40),
        rgba(255,176,32,0.06) 58%,
        transparent 72%
      );
      opacity: .85;
      z-index: -2;
      animation: gunnarPromise 4.8s var(--slow) infinite;
    }

    @keyframes gunnarPromise{
      0%,100% { transform: scale(1); opacity: .68; }
      50%     { transform: scale(1.03); opacity: .95; }
    }

    /* =========================================================
       FOOTER
    ========================================================= */
    footer {
      text-align: center;
      padding: 90px 24px 70px;
      opacity: .88;
      position: relative;
      z-index: 2;
    }

    footer p {
      font-size: 1.18rem;
      margin-bottom: 10px;
    }

    /* =========================================================
       PRINT / KEEPSAKE MODE
    ========================================================= */
    @media print {
      body::before, body::after, .companion, .btn, .friend-modal { display: none !important; }
      body { background: white; color: black; }
      .cover { display: none !important; }
      .section { margin: 52px auto; }
      .gathering, .friends, .guestbookCard { box-shadow: none; border: 1px solid #ddd; }
    }

    /* Reduce motion for folks who prefer it */
    @media (prefers-reduced-motion: reduce) {
      html { scroll-behavior: auto; }
      .btn, .friend-card, .companion, .gunnar::after, .friend-modal { transition: none !important; animation: none !important; }
    }
  </style>
</head>

<body>
  <a class="skip-link" href="#story">Skip to the story</a>

  <!-- Ambient forest sound: starts only after user opens the book -->
  <audio id="forestSound" preload="auto" loop>
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-light-wind-in-leaves-118.mp3" type="audio/mpeg">
  </audio>

  <!-- COVER -->
  <section class="cover" id="cover" aria-label="Cover page">
    <div class="cover__paper">
      <p class="cover__eyebrow">A Baby Shower Story</p>
      <h1>For Baby Gunnar</h1>
      <p class="cover__sub">On the way, and already so loved.</p>

      <div class="cover__openRow">
        <button class="btn btn--primary" id="openBook" type="button">Open the Book</button>
        <button class="btn btn--ghost" id="printStory" type="button">Print Keepsake</button>
      </div>

      <p class="cover__hint">A quiet little scroll. A warm little world.</p>
    </div>
  </section>

  <main id="story">
    <section class="section">
      <h2>The News</h2>
      <p>
        In a calm corner of the Hundred Acre Wood, a wonderful thing became known.
        A new little friend is on the way.
      </p>
      <p class="soft">
        The trees seem to lean closer. The bees hum softer. Even the sunlight feels like it’s waiting.
      </p>
      <p>
        Everyone agrees on one thing: when Baby Gunnar arrives, there should already be love waiting.
      </p>
    </section>

    <div class="divider"><hr></div>

    <section class="section gathering" aria-label="Gathering details">
      <h2>A Gathering in the Wood</h2>
      <p>
        To celebrate Baby Gunnar—who’s on the way—we’re gathering for honey, stories,
        and the kind of happiness that doesn’t hurry.
      </p>

      <div class="gathering__details">
        <div class="gathering__row">
          <strong>Date</strong>
          <span>April 15</span>
        </div>
        <div class="gathering__row">
          <strong>Time</strong>
          <span>2–5 PM</span>
        </div>
        <div class="gathering__row">
          <strong>Place</strong>
          <span>The Hundred Acre Wood</span>
        </div>
      </div>

      <p class="gathering__note">
        Come as you are. Stay as long as you like. If you arrive early, that’s just more time for quiet joy.
      </p>
    </section>

    <section class="section">
      <h2>A Little Tradition</h2>
      <p>
        If you’d like to bring something, Pooh thought a book might be nice.
      </p>
      <div class="tradition">
        <p style="margin-bottom:0;">
          Write your name inside. Baby Gunnar will read it one day and know you were here from the beginning.
        </p>
      </div>
    </section>

    <div class="divider"><hr></div>

    <!-- FRIENDS -->
    <section class="section friends" id="friends" aria-label="Meet the friends">
      <h2>Meet the Friends</h2>
      <p class="soft">
        In the Wood, everyone has a way of making you feel like you belong.
        These friends are saving a place for Baby Gunnar.
      </p>

      <div class="friends__grid" id="friendsGrid">
        <button class="friend-card" type="button" data-friend="pooh">
          <div class="friend-portrait">
            <img src="Images/Characters/honey-bear.png" alt="Winnie the Pooh holding honey" loading="lazy" decoding="async">
          </div>
          <div class="friend-name">Winnie the Pooh</div>
          <div class="friend-trait">Gentle. Loyal. Slightly honey-motivated.</div>
          <div class="friend-quote">“Sometimes the smallest things…”</div>
        </button>

        <button class="friend-card" type="button" data-friend="piglet">
          <div class="friend-portrait">
            <img src="Images/Characters/piglet.png" alt="Piglet" loading="lazy" decoding="async">
          </div>
          <div class="friend-name">Piglet</div>
          <div class="friend-trait">Small, but brave when it matters.</div>
          <div class="friend-quote">“Oh d-d-dear…”</div>
        </button>

        <button class="friend-card" type="button" data-friend="tigger">
          <div class="friend-portrait">
            <img src="Images/Characters/tigger.png" alt="Tigger" loading="lazy" decoding="async">
          </div>
          <div class="friend-name">Tigger</div>
          <div class="friend-trait">Joy on springs. Energy for days.</div>
          <div class="friend-quote">“TTFN!”</div>
        </button>

        <button class="friend-card" type="button" data-friend="eeyore">
          <div class="friend-portrait">
            <img src="Images/Characters/eeyore.png" alt="Eeyore" loading="lazy" decoding="async">
          </div>
          <div class="friend-name">Eeyore</div>
          <div class="friend-trait">Quiet. Steady. Always shows up.</div>
          <div class="friend-quote">“Thanks for noticing me.”</div>
        </button>

        <button class="friend-card" type="button" data-friend="roo">
          <div class="friend-portrait">
            <img src="Images/Characters/roo.png" alt="Roo" loading="lazy" decoding="async">
          </div>
          <div class="friend-name">Roo</div>
          <div class="friend-trait">Curious heart. Big jumps ahead.</div>
          <div class="friend-quote">“Can I come too?”</div>
        </button>

        <button class="friend-card" type="button" data-friend="owl">
          <div class="friend-portrait">
            <img src="Images/Characters/owl.png" alt="Owl" loading="lazy" decoding="async">
          </div>
          <div class="friend-name">Owl</div>
          <div class="friend-trait">Stories, advice, and helpful opinions.</div>
          <div class="friend-quote">“Ahem…”</div>
        </button>
      </div>
    </section>

    <!-- Friend Modal -->
    <div class="friend-modal" id="friendModal" aria-hidden="true">
      <div class="friend-modal__card" role="dialog" aria-modal="true" aria-labelledby="friendModalTitle">
        <button class="friend-modal__close" type="button" id="friendModalClose" aria-label="Close">×</button>

        <div class="friend-modal__top">
          <div class="friend-modal__portrait">
            <img id="friendModalImg" src="" alt="" decoding="async">
          </div>
          <div>
            <h3 class="friend-modal__title" id="friendModalTitle"></h3>
            <div class="friend-modal__subtitle" id="friendModalSubtitle"></div>
          </div>
        </div>

        <div class="friend-modal__body" id="friendModalBody"></div>
        <div class="friend-modal__quote" id="friendModalQuote"></div>
      </div>
    </div>

    <div class="divider"><hr></div>

    <!-- GUESTBOOK -->
    <section class="section guestbookCard" id="guestbook" aria-label="Guestbook">
      <h2>Your Page</h2>
      <p>
        If you’d like, leave a few words for Baby Gunnar.
        They’ll be kept, the way a real book keeps things.
      </p>

      <form class="guestbookForm" id="guestbookForm" autocomplete="on">
        <div class="fieldRow">
          <div class="field">
            <label class="label" for="guestName">Your name</label>
            <input class="input" id="guestName" name="guestName" type="text" placeholder="Christopher Robin" required />
          </div>

          <div class="field">
            <label class="label" for="guestRelation">How you know the family (optional)</label>
            <input class="input" id="guestRelation" name="guestRelation" type="text" placeholder="Friend / Family / Coworker" />
          </div>
        </div>

        <div class="field">
          <label class="label" for="guestMessage">Your words</label>
          <textarea class="textarea" id="guestMessage" name="guestMessage" placeholder="Write something gentle…" required></textarea>
        </div>

        <div class="guestbookActions">
          <button class="btn btn--honey" type="submit">Add Your Words</button>
          <button class="btn btn--ghost" type="button" id="printPage">Print This Story</button>
          <span class="mini">Tip: keep it simple. A line is enough.</span>
        </div>

        <p class="guestbook__note" id="guestNote" hidden>Your words have found their page.</p>
      </form>
    </section>

    <footer aria-label="Closing">
      <p>With love, honey, and quiet joy.</p>
      <p class="soft">Baby Gunnar is on the way. The story is already beginning.</p>
    </footer>
  </main>

  <!-- Corner companion (your Pooh image), gently “present” -->
  <div class="companion" id="companion" aria-hidden="true">
    <img src="Images/Characters/honey-bear.png" alt="" decoding="async" loading="eager">
  </div>

  <script>
    /* =========================================================
       AUTO-HIGHLIGHT “Gunnar” EVERYWHERE (safe DOM text-node wrap)
       - wraps whole-word matches only
       - skips scripts/styles/inputs/code/pre/textarea
       - skips nodes already inside .gunnar
    ========================================================= */
    function highlightNameEverywhere(root = document.body, name = "Gunnar") {
      const SKIP_TAGS = new Set(["SCRIPT", "STYLE", "NOSCRIPT", "TEXTAREA", "CODE", "PRE", "INPUT", "SELECT", "OPTION"]);
      const re = new RegExp(`\\b(${name})\\b`, "g");

      const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, {
        acceptNode(node) {
          const parent = node.parentElement;
          if (!parent) return NodeFilter.FILTER_REJECT;

          if (SKIP_TAGS.has(parent.tagName)) return NodeFilter.FILTER_REJECT;
          if (parent.closest && parent.closest(".gunnar")) return NodeFilter.FILTER_REJECT;
          if (!node.nodeValue || !node.nodeValue.trim()) return NodeFilter.FILTER_REJECT;

          re.lastIndex = 0;
          return re.test(node.nodeValue) ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_REJECT;
        }
      });

      const nodes = [];
      while (walker.nextNode()) nodes.push(walker.currentNode);

      for (const textNode of nodes) {
        const text = textNode.nodeValue;
        re.lastIndex = 0;
        if (!re.test(text)) continue;

        const frag = document.createDocumentFragment();
        let last = 0;
        re.lastIndex = 0;

        let m;
        while ((m = re.exec(text)) !== null) {
          const start = m.index;
          const end = start + m[0].length;

          if (start > last) frag.appendChild(document.createTextNode(text.slice(last, start)));

          const span = document.createElement("span");
          span.className = "gunnar";
          span.textContent = m[0];
          frag.appendChild(span);

          last = end;
        }

        if (last < text.length) frag.appendChild(document.createTextNode(text.slice(last)));
        textNode.parentNode.replaceChild(frag, textNode);
      }
    }

    /* =========================================================
       FRIENDS — MODAL DATA + WIRING (uses your local images)
    ========================================================= */
    const FRIENDS = {
      pooh: {
        name: "Winnie the Pooh",
        subtitle: "Gentle bear with a heart full of honey",
        img: "Images/Characters/honey-bear.png",
        body: "Pooh doesn’t hurry. He notices. He stays. He makes room for people—especially small new people like Gunnar.",
        quote: "“Sometimes the smallest things take up the most room in your heart.”"
      },
      piglet: {
        name: "Piglet",
        subtitle: "Small, but brave when it matters",
        img: "Images/Characters/piglet.png",
        body: "Piglet will teach Gunnar that courage isn’t loud. It’s showing up—even when you’re nervous.",
        quote: "“It’s hard to be brave when you’re such a small animal.”"
      },
      tigger: {
        name: "Tigger",
        subtitle: "Joy on springs. Energy for days.",
        img: "Images/Characters/tigger.png",
        body: "Tigger will remind Gunnar that joy is allowed. That laughter can be a plan.",
        quote: "“TTFN! Ta-ta for now!”"
      },
      eeyore: {
        name: "Eeyore",
        subtitle: "Quiet loyalty. A steady heart.",
        img: "Images/Characters/eeyore.png",
        body: "Eeyore will teach Gunnar the underrated superpower of being dependable. Not flashy. Just there.",
        quote: "“Thanks for noticing me.”"
      },
      roo: {
        name: "Roo",
        subtitle: "Curious, kind, always ready",
        img: "Images/Characters/roo.png",
        body: "Roo understands being little. He’ll show Gunnar how to be brave in new places—with good friends nearby.",
        quote: "“Can I come too?”"
      },
      owl: {
        name: "Owl",
        subtitle: "Storyteller of the Wood",
        img: "Images/Characters/owl.png",
        body: "Owl will fill Gunnar’s world with stories—some accurate, some improved. All told with love.",
        quote: "“Ahem… as I was saying…”"
      }
    };

    const modal = document.getElementById('friendModal');
    const modalClose = document.getElementById('friendModalClose');
    const modalTitle = document.getElementById('friendModalTitle');
    const modalSubtitle = document.getElementById('friendModalSubtitle');
    const modalBody = document.getElementById('friendModalBody');
    const modalQuote = document.getElementById('friendModalQuote');
    const modalImg = document.getElementById('friendModalImg');

    function openFriendModal(key){
      const f = FRIENDS[key];
      if (!f) return;

      modalTitle.textContent = f.name;
      modalSubtitle.textContent = f.subtitle;
      modalBody.textContent = f.body;
      modalQuote.textContent = f.quote;

      modalImg.src = f.img;
      modalImg.alt = f.name;

      modal.classList.add('is-open');
      modal.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
      modalClose.focus();
    }

    function closeFriendModal(){
      modal.classList.remove('is-open');
      modal.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    }

    /* =========================================================
       COVER OPEN + AMBIENT SOUND + PRINT
    ========================================================= */
    const forest = document.getElementById('forestSound');
    const openBookBtn = document.getElementById('openBook');
    const printStoryBtn = document.getElementById('printStory');
    const printPageBtn = document.getElementById('printPage');

    function openBook(){
      const cover = document.getElementById('cover');
      if (cover) cover.style.display = 'none';

      // Start ambience only after user intent
      if (forest) {
        forest.volume = 0.22;
        forest.play().catch(() => {});
      }

      // Ensure first section is visible at top
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function printKeepsake(){
      window.print();
    }

    /* =========================================================
       COMPANION FLOAT — gentle follow (quiet presence)
    ========================================================= */
    function updateCompanion(){
      const y = window.scrollY || 0;
      const c = document.getElementById('companion');
      if (!c) return;

      const wobble = Math.sin(y * 0.002) * 2;
      const drift = y * 0.06;
      c.style.transform = `translateY(${drift}px) rotate(${wobble}deg)`;
    }

    /* =========================================================
       GUESTBOOK — “kept” acknowledgement
       (local-only; wire to backend later if you want)
    ========================================================= */
    const guestForm = document.getElementById('guestbookForm');
    const guestNote = document.getElementById('guestNote');

    function setNote(on){
      if (!guestNote) return;
      guestNote.hidden = !on;
    }

    /* =========================================================
       INIT
    ========================================================= */
    document.addEventListener('DOMContentLoaded', () => {
      // Auto-highlight Gunnar everywhere
      highlightNameEverywhere(document.body, "Gunnar");

      // Cover buttons
      openBookBtn?.addEventListener('click', openBook);
      printStoryBtn?.addEventListener('click', printKeepsake);
      printPageBtn?.addEventListener('click', printKeepsake);

      // Friends grid
      document.getElementById('friendsGrid')?.addEventListener('click', (e) => {
        const card = e.target.closest('.friend-card');
        if (!card) return;
        openFriendModal(card.dataset.friend);
      });

      // Modal close
      modalClose?.addEventListener('click', closeFriendModal);
      modal?.addEventListener('click', (e) => {
        if (e.target === modal) closeFriendModal();
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.classList.contains('is-open')) closeFriendModal();
      });

      // Guestbook submit (keepsake acknowledgement)
      guestForm?.addEventListener('submit', (e) => {
        e.preventDefault();
        setNote(true);

        // Keep the message visible in case they want to copy it,
        // but reset name fields to feel “submitted”
        const name = document.getElementById('guestName');
        const rel = document.getElementById('guestRelation');
        if (name) name.value = "";
        if (rel) rel.value = "";

        // Gentle auto-scroll to the note
        guestNote?.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      });

      // Companion follow
      updateCompanion();
      window.addEventListener('scroll', updateCompanion, { passive: true });
    });
  </script>
</body>
</html>